package archenoah.web.normal.main.Menuepunkte.Individuelle.Projekte.tools;

import java.util.HashMap;
import java.util.Map;
import java.util.concurrent.TimeUnit;

import archenoah.config.CMS_Config_Std;
import archenoah.lib.custom.MyUtils;
import archenoah.lib.tool.comunication.dbclass.DBClass;
import archenoah.lib.tool.comunication.dbclass.DBClass.CustomQuery;
import archenoah.lib.tool.comunication.google.maps.gmaps;
import archenoah.lib.tool.comunication.google.maps.gmaps_viewer;
import archenoah.lib.vaadin.Components.Fields.CustomTimePicker;
import archenoah.lib.vaadin.Components.Steppers.FloatStepper;
import archenoah.lib.vaadin.Components.Steppers.IntStepper;
import archenoah.lib.vaadin.Components.Window_Tab_Generierer.Build_Window_Button;
import archenoah.lib.vaadin.Language.i18n.I18nManager;
import archenoah.web.normal.UserInfo.UserData;

import com.vaadin.annotations.AutoGenerated;
import com.vaadin.data.Container;
import com.vaadin.data.Property.ValueChangeEvent;
import com.vaadin.data.Property.ValueChangeListener;
import com.vaadin.server.ExternalResource;
import com.vaadin.server.ThemeResource;
import com.vaadin.shared.ui.combobox.FilteringMode;
import com.vaadin.ui.AbstractField;
import com.vaadin.ui.AbstractTextField;
import com.vaadin.ui.Alignment;
import com.vaadin.ui.Button;
import com.vaadin.ui.Button.ClickEvent;
import com.vaadin.ui.Button.ClickListener;
import com.vaadin.ui.CheckBox;
import com.vaadin.ui.ComboBox;
import com.vaadin.ui.CustomComponent;
import com.vaadin.ui.Embedded;
import com.vaadin.ui.HorizontalLayout;
import com.vaadin.ui.NativeSelect;
import com.vaadin.ui.Panel;
import com.vaadin.ui.TextField;
import com.vaadin.ui.UI;
import com.vaadin.ui.VerticalLayout;
import com.vaadin.ui.Window;

@SuppressWarnings("unchecked")
public class form_Berrechnen_Strecke extends CustomComponent {

    /*- VaadinEditorProperties={"grid":"RegularGrid,20","showGrid":true,"snapToGrid":true,"snapToObject":true,"movingGuides":false,"snappingDistance":10} */

    @AutoGenerated
    private VerticalLayout mainLayout;
    @AutoGenerated
    private Button btn_uebernehmen;
    @AutoGenerated
    private Embedded emb_gmaps;
    @AutoGenerated
    private HorizontalLayout horizontalLayout_2;
    @AutoGenerated
    private Button btn_ber;
    @AutoGenerated
    private CheckBox cb_timestwo;
    @AutoGenerated
    private TextField txt_fahrtzeit;
    @AutoGenerated
    private TextField txt_km;
    @AutoGenerated
    private HorizontalLayout horizontalLayout_1;
    @AutoGenerated
    private Panel pan_Nach;
    @AutoGenerated
    private VerticalLayout verticalLayout_2;
    @AutoGenerated
    private HorizontalLayout horizontalLayout_6;
    @AutoGenerated
    private TextField txt_Ort_nach;
    @AutoGenerated
    private TextField txt_PLZ_nach;
    @AutoGenerated
    private TextField txt_strasse_nach;
    @AutoGenerated
    private HorizontalLayout horizontalLayout_5;
    @AutoGenerated
    private ComboBox cb_patient_nach;
    @AutoGenerated
    private Button btn_home_nach;
    @AutoGenerated
    private Panel pan_Von;
    @AutoGenerated
    private VerticalLayout verticalLayout_3;
    @AutoGenerated
    private HorizontalLayout horizontalLayout_4;
    @AutoGenerated
    private TextField txt_ort_von;
    @AutoGenerated
    private TextField txt_plz_von;
    @AutoGenerated
    private TextField txt_Str_von;
    @AutoGenerated
    private HorizontalLayout horizontalLayout_3;
    @AutoGenerated
    private ComboBox cb_patient;
    @AutoGenerated
    private Button btn_Home_von;
    /**
     * The constructor should first build the main layout, set the composition root and then do any custom initialization.
     * 
     * The constructor will not be automatically regenerated by the visual editor.
     */

    private Button Temp_Btn = null;

    /************ ----->Einstellungen<-- ********************/
    private String LNG_FRM_ID = "27";
    private Map<Object, String> ValidateMap;

    private String Windows_Height = "600px";
    private String Windows_Width = "900px";

    private Window win = null;

    private String G_Km;
    private int Stunden = 0;
    private int min = 0;

    private long dauer;
    private int strecke;

    public AbstractField fieldDistance;
    public AbstractField fieldMin;
    public AbstractField fieldHours;
    public CustomTimePicker fieldDuration;

    private Boolean nurse = false;
    private Integer nurseID = null;
    
    org.slf4j.Logger log;
    private I18nManager i18n;

    /******************************************************/

    public form_Berrechnen_Strecke(Button Arg_btn) {
        log = org.slf4j.LoggerFactory.getLogger(this.getClass());
        
        buildMainLayout();
        i18n = new I18nManager(this);
        Temp_Btn = Arg_btn;

    }

    public void Init_Class_Window() {
        if (Windows_Height.equals("") == true || Windows_Width.equals("") == true) {
            System.out.println("Form Einstellung Fehlt: !!!");
            return;
        }

        Standard_Init();

        if (Temp_Btn != null) {

            Build_Window_Button bwb = new Build_Window_Button(Temp_Btn.getCaption(), mainLayout, Windows_Height, Windows_Width, Temp_Btn.getIcon());
            win = bwb.ReturnWindow();
        }

    }

    public void Init_Class_Window(Integer NID) {
        nurseID = NID;
        Init_Class_Window();
        Zuhause_von();
        // Berrechnen(); // rechnet hier falsch? eventuell wegen map-init
    }

    private void Standard_Init() {

        Combo_Popup_Patient();
        Init_Berrechnen();
        checkNurse();

        cb_timestwo.setImmediate(true);
        cb_timestwo.setValue(true);

        cb_patient.setItemCaptionPropertyId("patient");
        cb_patient.setFilteringMode(FilteringMode.CONTAINS);
        cb_patient_nach.setItemCaptionPropertyId("patient");
        cb_patient_nach.setFilteringMode(FilteringMode.CONTAINS);
        
        event();
    }

    private void event() {

        cb_timestwo.addValueChangeListener(new ValueChangeListener() {

            @Override
            public void valueChange(ValueChangeEvent event) {
                btn_ber.click();
            }
        });

        btn_ber.addClickListener(new ClickListener() {

            @Override
            public void buttonClick(ClickEvent event) {
                // TODO Automatisch generierter Methodenstub

                if ((txt_ort_von.getValue() == "" && txt_plz_von.getValue() == "") | (txt_Ort_nach.getValue() == "" && txt_PLZ_nach.getValue() == "")) {

                    return;
                }

                Berrechnen();
            }
        });

        cb_patient.addValueChangeListener(new ValueChangeListener() {

            @Override
            public void valueChange(ValueChangeEvent event) {

                if (cb_patient.getValue() != null) {
                    Fill_Adresse_Von(cb_patient.getValue() + "");
                }

            }
        });

        cb_patient_nach.addValueChangeListener(new ValueChangeListener() {

            @Override
            public void valueChange(ValueChangeEvent event) {

                if (cb_patient_nach.getValue() != null) {
                    Fill_Adresse_Nach(cb_patient_nach.getValue() + "");
                }

            }
        });

        btn_Home_von.addClickListener(new ClickListener() {

            @Override
            public void buttonClick(ClickEvent event) {
                // TODO Automatisch generierter Methodenstub

                cb_patient.setValue(null);
                Zuhause_von();

            }
        });

        btn_home_nach.addClickListener(new ClickListener() {

            @Override
            public void buttonClick(ClickEvent event) {
                // TODO Automatisch generierter Methodenstub
                cb_patient_nach.setValue(null);
                Zuhause_bis();

            }
        });

        btn_uebernehmen.addClickListener(new ClickListener() {

            @Override
            public void buttonClick(ClickEvent event) {
                // TODO Automatisch generierter Methodenstub

                if (txt_km.getValue() == "" | txt_fahrtzeit.getValue() == "") {
                    return;
                }

                Stunden = (int) TimeUnit.SECONDS.toHours(dauer);
                dauer = dauer - (Stunden * 60 * 60);
                min = (int) TimeUnit.SECONDS.toMinutes(dauer);
                dauer = dauer - (min * 60);

                if (dauer >= 30) {
                    min = min + 1;
                }

                setValues(Stunden, min, strecke);
                
                UI.getCurrent().getUI().removeWindow(win);
            }
        });
    }
    
    private void setValues(Integer h, Integer m, Integer s) {
        
        if(fieldMin != null && fieldHours != null) {
            castValue(fieldMin, m);
            castValue(fieldHours, h);
        }else if (fieldDuration != null) {
            fieldDuration.setValue(h, m);
        }
        
        castValue(fieldDistance, s);
        
    }
    
    private void castValue(AbstractField field, Integer value) {
        if(field instanceof AbstractTextField) {
            field.setValue(value.toString());
        }else if(
                field instanceof NativeSelect
                || field instanceof FloatStepper
                || field instanceof IntStepper
                ){
            field.setValue(value);
        }else {
            log.warn("could not set value for field {} of type {}", field.getCaption(), field.getClass());
            field.setValue(null);
        }
    }
    
    
    public void Set_nach(int ID) {
        cb_patient_nach.setValue(ID);

        if (cb_patient_nach.getValue() != null) {
            Fill_Adresse_Nach(cb_patient_nach.getValue() + "");
        }

    }

    private void Fill_Adresse_Von(String ID) {
        CMS_Config_Std std = CMS_Config_Std.getInstance();
        DBClass db = new DBClass();
        db.DB_Data_Get.DB_Spalten.Standard.DB_set_Spalten_All();
        db.DB_Data_Get.DB_Tabellen.DB_set_Tabelle_Einzeln("cust_patient_stammdaten_liste");
        db.DB_Data_Get.DB_Filter.DB_WHERE_Allgemein("cust_patient_stammdaten_liste", "PSL_ID", "=", ID + "", "");
        Container con = db.DB_Data_Get.DB_SEND_AND_GET_Container();

        for (Object ItemIda : con.getItemIds()) {

            txt_Str_von.setValue((String) con.getContainerProperty(ItemIda, "PSL_STRASSE").getValue());
            txt_plz_von.setValue((String) con.getContainerProperty(ItemIda, "PSL_PLZ").getValue());
            txt_ort_von.setValue((String) con.getContainerProperty(ItemIda, "PSL_ORT").getValue());
        }

    }

    private void Fill_Adresse_Nach(String ID) {
        CMS_Config_Std std = CMS_Config_Std.getInstance();
        DBClass db = new DBClass();
        db.DB_Data_Get.DB_Spalten.Standard.DB_set_Spalten_All();
        db.DB_Data_Get.DB_Tabellen.DB_set_Tabelle_Einzeln("cust_patient_stammdaten_liste");
        db.DB_Data_Get.DB_Filter.DB_WHERE_Allgemein("cust_patient_stammdaten_liste", "PSL_ID", "=", ID + "", "");
        Container con = db.DB_Data_Get.DB_SEND_AND_GET_Container();

        for (Object ItemIda : con.getItemIds()) {

            txt_strasse_nach.setValue((String) con.getContainerProperty(ItemIda, "PSL_STRASSE").getValue());
            txt_PLZ_nach.setValue((String) con.getContainerProperty(ItemIda, "PSL_PLZ").getValue());
            txt_Ort_nach.setValue((String) con.getContainerProperty(ItemIda, "PSL_ORT").getValue());
        }

    }

    /***** -> Combo Patient<-- ***/

    private void Combo_Popup_Patient() {
        
        String where = "";
        
        if(UserData.get().getUserId() == 1 || UserData.get().getCS().isCS()) {
            
        }else if(UserData.get().getNurse().isNurse()) {
            
            where = "where PSL_ID In (select VH_PATIENT_ID from cust_verk_haupt where VH_NURSE_ID = " + UserData.get().getNurse().getNurseId()
                + "\n " + "                    union distinct"
                + "\n " + "                    select CVS_PATIENT_ID from cust_verk_subs where CVS_NURSE_ID = " +  UserData.get().getNurse().getNurseId() + ")";
            
        }else {
            where = "where 0";
        }
        
        CustomQuery q = new DBClass().CustomQuery;
        String sql = "select PSL_ID,    CONCAT_WS('', PSA_NAME,' ',PSL_VORNAME,' ',PSL_NAME) as patient"
             + "\n " + "from view_patient_stammdaten_liste"
             + "\n " + "left join cust_patient_stammdaten_anrede on PSL_ANREDE = PSA_ID"
             + "\n " + where
             + "\n " + "order by LOWER(PSL_NAME), LOWER(PSL_VORNAME)";
        q.setSqlString(sql);
//        q.db.debugNextQuery(true);
        Container con = q.query();
        
        // instantiate new containers to avoid ConcurrentModificationException with filters
        cb_patient.setContainerDataSource(MyUtils.convertIndex(con, "PSL_ID"));
        cb_patient_nach.setContainerDataSource(MyUtils.convertIndex(con, "PSL_ID"));
        
        
    }

    /***************************/

    private void checkNurse() {
        int UID = (int) UI.getCurrent().getSession().getSession().getAttribute("Userid");
        CMS_Config_Std std = CMS_Config_Std.getInstance();
        DBClass db = new DBClass();

        db.DB_Data_Get.DB_Spalten.Standard.DB_set_Spalten_All();
        db.DB_Data_Get.DB_Tabellen.DB_set_Tabelle_Einzeln("cms_auth_liste_gu");
        db.DB_Data_Get.DB_Filter.DB_WHERE_Allgemein("cms_auth_liste_gu", "AL_U_ID", "=", "'" + UID + "'", "AND");
        db.DB_Data_Get.DB_Filter.DB_WHERE_Allgemein("cms_auth_liste_gu", "AL_G_ID", "=", "'12'", "");

        Container con = db.DB_Data_Get.DB_SEND_AND_GET_Container();

        if (con.size() > 0) {
            nurse = true;
        } else {
            nurse = false;
        }

    }

    private void Zuhause_von() {

        int K_ID_int = (int) UI.getCurrent().getSession().getSession().getAttribute("Userid");

        CMS_Config_Std std = CMS_Config_Std.getInstance();
        DBClass db = new DBClass();
        db.DB_Data_Get.DB_Spalten.Standard.DB_set_Spalten_All();
        db.DB_Data_Get.DB_Tabellen.DB_set_Tabelle_Einzeln("cust_krankenschwester_stammdaten_ks");

        if (nurseID != null) {
            db.DB_Data_Get.DB_Filter.DB_WHERE_Allgemein("cust_krankenschwester_stammdaten_ks", "KSK_ID", "=", nurseID + "", "");
        } else {
            db.DB_Data_Get.DB_Filter.DB_WHERE_Allgemein("cust_krankenschwester_stammdaten_ks", "KSK_U_ID", "=", K_ID_int + "", "");
        }

        Container con = db.DB_Data_Get.DB_SEND_AND_GET_Container();

        if (con.size() > 0) {
            for (Object ItemIda : con.getItemIds()) {

                txt_Str_von.setValue((String) con.getContainerProperty(ItemIda, "KSK_STRASSE").getValue());
                txt_plz_von.setValue((String) con.getContainerProperty(ItemIda, "KSK_PLZ").getValue());
                txt_ort_von.setValue((String) con.getContainerProperty(ItemIda, "KSK_ORT").getValue());

            }
        }

    }

    private void Zuhause_bis() {

        int K_ID_int = (int) UI.getCurrent().getSession().getSession().getAttribute("Userid");

        CMS_Config_Std std = CMS_Config_Std.getInstance();
        DBClass db = new DBClass();
        db.DB_Data_Get.DB_Spalten.Standard.DB_set_Spalten_All();
        db.DB_Data_Get.DB_Tabellen.DB_set_Tabelle_Einzeln("cust_krankenschwester_stammdaten_ks");
        if (nurseID != null) {
            db.DB_Data_Get.DB_Filter.DB_WHERE_Allgemein("cust_krankenschwester_stammdaten_ks", "KSK_ID", "=", nurseID + "", "");
        } else {
            db.DB_Data_Get.DB_Filter.DB_WHERE_Allgemein("cust_krankenschwester_stammdaten_ks", "KSK_U_ID", "=", K_ID_int + "", "");
        }

        Container con = db.DB_Data_Get.DB_SEND_AND_GET_Container();

        if (con.size() > 0) {
            for (Object ItemIda : con.getItemIds()) {

                txt_strasse_nach.setValue((String) con.getContainerProperty(ItemIda, "KSK_STRASSE").getValue());
                txt_PLZ_nach.setValue((String) con.getContainerProperty(ItemIda, "KSK_PLZ").getValue());
                txt_Ort_nach.setValue((String) con.getContainerProperty(ItemIda, "KSK_ORT").getValue());

            }
        }

    }

    private void Berrechnen() {

        int mult = (cb_timestwo.getValue()) ? 2 : 1;

        String Adresse_von = txt_plz_von.getValue() + " " + txt_ort_von.getValue() + " " + txt_Str_von.getValue();
        String Adresse_bis = txt_PLZ_nach.getValue() + " " + txt_Ort_nach.getValue() + " " + txt_strasse_nach.getValue();

        gmaps gm = new gmaps();

        gm.Start("", txt_Str_von.getValue(), txt_plz_von.getValue(), txt_ort_von.getValue());
        gm.Ende("", txt_strasse_nach.getValue(), txt_PLZ_nach.getValue(), txt_Ort_nach.getValue());
        gm.Datenholen();

        dauer = gm.Zeit_int * mult;
        strecke = gm.Strecke_int * mult;

        txt_km.setValue(strecke + " km");

        Long hours = TimeUnit.SECONDS.toHours(dauer + 30);
        Long minutes = TimeUnit.SECONDS.toMinutes(dauer + 30 - TimeUnit.HOURS.toSeconds(hours));

        String time = String.format("%02d:%02d", hours, minutes);

        txt_fahrtzeit.setValue(time);

        gmaps_viewer gv = new gmaps_viewer(Adresse_von, Adresse_bis, "270", "800");

        emb_gmaps.setSource(new ExternalResource(gv.gmaps_php));
        emb_gmaps.setType(2);
        emb_gmaps.setMimeType("image/png");

    }

    private void Init_Berrechnen() {

        gmaps_viewer gv = new gmaps_viewer("Germany", "Germany", "270", "800");

        emb_gmaps.setSource(new ExternalResource(gv.gmaps_php));
        emb_gmaps.setType(2);
        emb_gmaps.setMimeType("image/png");

        /****** Settings ******/

        cb_patient.setImmediate(true);
        cb_patient_nach.setImmediate(true);

    }

    private void Set_Validate_Map() {
        ValidateMap = new HashMap<>();
        // ValidateMap.put(txt_username,"");

    }

    @AutoGenerated
    private VerticalLayout buildMainLayout() {
        // common part: create layout
        mainLayout = new VerticalLayout();
        mainLayout.setImmediate(false);
        mainLayout.setWidth("100%");
        mainLayout.setHeight("100%");
        mainLayout.setMargin(false);

        // top-level component properties
        setWidth("100.0%");
        setHeight("100.0%");

        // horizontalLayout_1
        horizontalLayout_1 = buildHorizontalLayout_1();
        mainLayout.addComponent(horizontalLayout_1);
        mainLayout.setExpandRatio(horizontalLayout_1, 2.5f);
        mainLayout.setComponentAlignment(horizontalLayout_1, new Alignment(48));

        // horizontalLayout_2
        horizontalLayout_2 = buildHorizontalLayout_2();
        mainLayout.addComponent(horizontalLayout_2);
        mainLayout.setExpandRatio(horizontalLayout_2, 1.0f);
        mainLayout.setComponentAlignment(horizontalLayout_2, new Alignment(48));

        // emb_gmaps
        emb_gmaps = new Embedded();
        emb_gmaps.setImmediate(false);
        emb_gmaps.setWidth("90.0%");
        emb_gmaps.setHeight("100.0%");
        emb_gmaps.setSource(new ThemeResource("img/component/embedded_icon.png"));
        emb_gmaps.setType(1);
        emb_gmaps.setMimeType("image/png");
        mainLayout.addComponent(emb_gmaps);
        mainLayout.setExpandRatio(emb_gmaps, 5.0f);
        mainLayout.setComponentAlignment(emb_gmaps, new Alignment(20));

        // btn_uebernehmen
        btn_uebernehmen = new Button();
        btn_uebernehmen.setCaption("Ãœbernehmen");
        btn_uebernehmen.setImmediate(true);
        btn_uebernehmen.setWidth("-1px");
        btn_uebernehmen.setHeight("-1px");
        mainLayout.addComponent(btn_uebernehmen);
        mainLayout.setExpandRatio(btn_uebernehmen, 1.0f);
        mainLayout.setComponentAlignment(btn_uebernehmen, new Alignment(48));

        return mainLayout;
    }

    @AutoGenerated
    private HorizontalLayout buildHorizontalLayout_1() {
        // common part: create layout
        horizontalLayout_1 = new HorizontalLayout();
        horizontalLayout_1.setImmediate(false);
        horizontalLayout_1.setWidth("100.0%");
        horizontalLayout_1.setHeight("100.0%");
        horizontalLayout_1.setMargin(false);

        // pan_Von
        pan_Von = buildPan_Von();
        horizontalLayout_1.addComponent(pan_Von);
        horizontalLayout_1.setComponentAlignment(pan_Von, new Alignment(48));

        // pan_Nach
        pan_Nach = buildPan_Nach();
        horizontalLayout_1.addComponent(pan_Nach);
        horizontalLayout_1.setComponentAlignment(pan_Nach, new Alignment(48));

        return horizontalLayout_1;
    }

    @AutoGenerated
    private Panel buildPan_Von() {
        // common part: create layout
        pan_Von = new Panel();
        pan_Von.setCaption("Von");
        pan_Von.setImmediate(false);
        pan_Von.setWidth("95.0%");
        pan_Von.setHeight("90.0%");

        // verticalLayout_3
        verticalLayout_3 = buildVerticalLayout_3();
        pan_Von.setContent(verticalLayout_3);

        return pan_Von;
    }

    @AutoGenerated
    private VerticalLayout buildVerticalLayout_3() {
        // common part: create layout
        verticalLayout_3 = new VerticalLayout();
        verticalLayout_3.setImmediate(false);
        verticalLayout_3.setWidth("100.0%");
        verticalLayout_3.setHeight("100.0%");
        verticalLayout_3.setMargin(false);

        // horizontalLayout_3
        horizontalLayout_3 = buildHorizontalLayout_3();
        verticalLayout_3.addComponent(horizontalLayout_3);
        verticalLayout_3.setComponentAlignment(horizontalLayout_3, new Alignment(48));

        // horizontalLayout_4
        horizontalLayout_4 = buildHorizontalLayout_4();
        verticalLayout_3.addComponent(horizontalLayout_4);
        verticalLayout_3.setComponentAlignment(horizontalLayout_4, new Alignment(48));

        return verticalLayout_3;
    }

    @AutoGenerated
    private HorizontalLayout buildHorizontalLayout_3() {
        // common part: create layout
        horizontalLayout_3 = new HorizontalLayout();
        horizontalLayout_3.setImmediate(false);
        horizontalLayout_3.setWidth("100.0%");
        horizontalLayout_3.setHeight("100.0%");
        horizontalLayout_3.setMargin(true);

        // btn_Home_von
        btn_Home_von = new Button();
        btn_Home_von.setCaption("Zuhause");
        btn_Home_von.setImmediate(true);
        btn_Home_von.setWidth("-1px");
        btn_Home_von.setHeight("-1px");
        horizontalLayout_3.addComponent(btn_Home_von);
        horizontalLayout_3.setExpandRatio(btn_Home_von, 1.0f);
        horizontalLayout_3.setComponentAlignment(btn_Home_von, new Alignment(24));

        // cb_patient
        cb_patient = new ComboBox();
        cb_patient.setCaption("Patient");
        cb_patient.setImmediate(false);
        cb_patient.setWidth("80.0%");
        cb_patient.setHeight("-1px");
        horizontalLayout_3.addComponent(cb_patient);
        horizontalLayout_3.setExpandRatio(cb_patient, 3.0f);
        horizontalLayout_3.setComponentAlignment(cb_patient, new Alignment(24));

        return horizontalLayout_3;
    }

    @AutoGenerated
    private HorizontalLayout buildHorizontalLayout_4() {
        // common part: create layout
        horizontalLayout_4 = new HorizontalLayout();
        horizontalLayout_4.setImmediate(false);
        horizontalLayout_4.setWidth("100.0%");
        horizontalLayout_4.setHeight("100.0%");
        horizontalLayout_4.setMargin(false);

        // txt_Str_von
        txt_Str_von = new TextField();
        txt_Str_von.setCaption("Strasse");
        txt_Str_von.setImmediate(false);
        txt_Str_von.setWidth("80.0%");
        txt_Str_von.setHeight("-1px");
        horizontalLayout_4.addComponent(txt_Str_von);
        horizontalLayout_4.setExpandRatio(txt_Str_von, 2.0f);
        horizontalLayout_4.setComponentAlignment(txt_Str_von, new Alignment(48));

        // txt_plz_von
        txt_plz_von = new TextField();
        txt_plz_von.setCaption("PLZ");
        txt_plz_von.setImmediate(false);
        txt_plz_von.setWidth("80.0%");
        txt_plz_von.setHeight("-1px");
        horizontalLayout_4.addComponent(txt_plz_von);
        horizontalLayout_4.setExpandRatio(txt_plz_von, 1.0f);
        horizontalLayout_4.setComponentAlignment(txt_plz_von, new Alignment(48));

        // txt_ort_von
        txt_ort_von = new TextField();
        txt_ort_von.setCaption("Ort");
        txt_ort_von.setImmediate(false);
        txt_ort_von.setWidth("80.0%");
        txt_ort_von.setHeight("-1px");
        horizontalLayout_4.addComponent(txt_ort_von);
        horizontalLayout_4.setExpandRatio(txt_ort_von, 2.0f);
        horizontalLayout_4.setComponentAlignment(txt_ort_von, new Alignment(48));

        return horizontalLayout_4;
    }

    @AutoGenerated
    private Panel buildPan_Nach() {
        // common part: create layout
        pan_Nach = new Panel();
        pan_Nach.setCaption("Nach");
        pan_Nach.setImmediate(false);
        pan_Nach.setWidth("95.0%");
        pan_Nach.setHeight("90.0%");

        // verticalLayout_2
        verticalLayout_2 = buildVerticalLayout_2();
        pan_Nach.setContent(verticalLayout_2);

        return pan_Nach;
    }

    @AutoGenerated
    private VerticalLayout buildVerticalLayout_2() {
        // common part: create layout
        verticalLayout_2 = new VerticalLayout();
        verticalLayout_2.setImmediate(false);
        verticalLayout_2.setWidth("100.0%");
        verticalLayout_2.setHeight("100.0%");
        verticalLayout_2.setMargin(false);

        // horizontalLayout_5
        horizontalLayout_5 = buildHorizontalLayout_5();
        verticalLayout_2.addComponent(horizontalLayout_5);

        // horizontalLayout_6
        horizontalLayout_6 = buildHorizontalLayout_6();
        verticalLayout_2.addComponent(horizontalLayout_6);

        return verticalLayout_2;
    }

    @AutoGenerated
    private HorizontalLayout buildHorizontalLayout_5() {
        // common part: create layout
        horizontalLayout_5 = new HorizontalLayout();
        horizontalLayout_5.setImmediate(false);
        horizontalLayout_5.setWidth("100.0%");
        horizontalLayout_5.setHeight("100.0%");
        horizontalLayout_5.setMargin(true);

        // btn_home_nach
        btn_home_nach = new Button();
        btn_home_nach.setCaption("Zuhause");
        btn_home_nach.setImmediate(true);
        btn_home_nach.setWidth("-1px");
        btn_home_nach.setHeight("-1px");
        horizontalLayout_5.addComponent(btn_home_nach);
        horizontalLayout_5.setExpandRatio(btn_home_nach, 1.0f);
        horizontalLayout_5.setComponentAlignment(btn_home_nach, new Alignment(24));

        // cb_patient_nach
        cb_patient_nach = new ComboBox();
        cb_patient_nach.setCaption("Patient");
        cb_patient_nach.setImmediate(false);
        cb_patient_nach.setWidth("80.0%");
        cb_patient_nach.setHeight("-1px");
        horizontalLayout_5.addComponent(cb_patient_nach);
        horizontalLayout_5.setExpandRatio(cb_patient_nach, 3.0f);
        horizontalLayout_5.setComponentAlignment(cb_patient_nach, new Alignment(24));

        return horizontalLayout_5;
    }

    @AutoGenerated
    private HorizontalLayout buildHorizontalLayout_6() {
        // common part: create layout
        horizontalLayout_6 = new HorizontalLayout();
        horizontalLayout_6.setImmediate(false);
        horizontalLayout_6.setWidth("100.0%");
        horizontalLayout_6.setHeight("100.0%");
        horizontalLayout_6.setMargin(false);

        // txt_strasse_nach
        txt_strasse_nach = new TextField();
        txt_strasse_nach.setCaption("Strasse");
        txt_strasse_nach.setImmediate(false);
        txt_strasse_nach.setWidth("80.0%");
        txt_strasse_nach.setHeight("-1px");
        horizontalLayout_6.addComponent(txt_strasse_nach);
        horizontalLayout_6.setExpandRatio(txt_strasse_nach, 2.0f);
        horizontalLayout_6.setComponentAlignment(txt_strasse_nach, new Alignment(48));

        // txt_PLZ_nach
        txt_PLZ_nach = new TextField();
        txt_PLZ_nach.setCaption("PLZ");
        txt_PLZ_nach.setImmediate(false);
        txt_PLZ_nach.setWidth("80.0%");
        txt_PLZ_nach.setHeight("-1px");
        horizontalLayout_6.addComponent(txt_PLZ_nach);
        horizontalLayout_6.setExpandRatio(txt_PLZ_nach, 1.0f);
        horizontalLayout_6.setComponentAlignment(txt_PLZ_nach, new Alignment(48));

        // txt_Ort_nach
        txt_Ort_nach = new TextField();
        txt_Ort_nach.setCaption("Ort");
        txt_Ort_nach.setImmediate(false);
        txt_Ort_nach.setWidth("80.0%");
        txt_Ort_nach.setHeight("-1px");
        horizontalLayout_6.addComponent(txt_Ort_nach);
        horizontalLayout_6.setExpandRatio(txt_Ort_nach, 1.0f);
        horizontalLayout_6.setComponentAlignment(txt_Ort_nach, new Alignment(48));

        return horizontalLayout_6;
    }

    @AutoGenerated
    private HorizontalLayout buildHorizontalLayout_2() {
        // common part: create layout
        horizontalLayout_2 = new HorizontalLayout();
        horizontalLayout_2.setImmediate(false);
        horizontalLayout_2.setWidth("75.0%");
        horizontalLayout_2.setHeight("50.0%");
        horizontalLayout_2.setMargin(false);

        // txt_km
        txt_km = new TextField();
        txt_km.setCaption("Gesamte Km");
        txt_km.setImmediate(false);
        txt_km.setWidth("100px");
        txt_km.setHeight("-1px");
        horizontalLayout_2.addComponent(txt_km);
        horizontalLayout_2.setExpandRatio(txt_km, 1.0f);
        horizontalLayout_2.setComponentAlignment(txt_km, new Alignment(20));

        // txt_fahrtzeit
        txt_fahrtzeit = new TextField();
        txt_fahrtzeit.setCaption("Fahrtzeit");
        txt_fahrtzeit.setImmediate(false);
        txt_fahrtzeit.setWidth("100px");
        txt_fahrtzeit.setHeight("-1px");
        horizontalLayout_2.addComponent(txt_fahrtzeit);
        horizontalLayout_2.setExpandRatio(txt_fahrtzeit, 1.0f);
        horizontalLayout_2.setComponentAlignment(txt_fahrtzeit, new Alignment(20));

        // cb_timestwo
        cb_timestwo = new CheckBox();
        cb_timestwo.setCaption("Doppelte Strecke");
        cb_timestwo.setImmediate(false);
        cb_timestwo.setWidth("100px");
        cb_timestwo.setHeight("-1px");
        horizontalLayout_2.addComponent(cb_timestwo);
        horizontalLayout_2.setExpandRatio(cb_timestwo, 1.0f);
        horizontalLayout_2.setComponentAlignment(cb_timestwo, new Alignment(24));

        // btn_ber
        btn_ber = new Button();
        btn_ber.setCaption("Berrechnen");
        btn_ber.setImmediate(true);
        btn_ber.setWidth("-1px");
        btn_ber.setHeight("-1px");
        horizontalLayout_2.addComponent(btn_ber);
        horizontalLayout_2.setExpandRatio(btn_ber, 2.0f);
        horizontalLayout_2.setComponentAlignment(btn_ber, new Alignment(24));

        return horizontalLayout_2;
    }

}
