package archenoah.web.normal.main.Menuepunkte.Standard.Administration.Benutzerverwaltung.Form;

import java.io.UnsupportedEncodingException;
import java.security.NoSuchAlgorithmException;
import java.util.ArrayList;
import java.util.HashMap;
import java.util.Iterator;
import java.util.Map;

import archenoah.config.CMS_Config_Std;
import archenoah.lib.tool.comunication.dbclass.DBClass;
import archenoah.lib.tool.comunication.email.Mailer;
import archenoah.lib.tool.comunication.email.Mailer.MAIL_TYPE;
import archenoah.lib.tool.encryption.sha1.Crypt_SHA1;
import archenoah.lib.tool.java_plugin.array_builder.classes.ArrayBuilder_Einzel;
import archenoah.lib.tool.java_plugin.randomgenerator.classes.RandomStringGenerator;
import archenoah.lib.tool.templating.TemplatingRenderer;
import archenoah.lib.vaadin.Components.Combo.nativecombo;
import archenoah.lib.vaadin.Components.Twinlist.Twinlist_Getarray;
import archenoah.lib.vaadin.Components.Twinlist.twinlist_Set_val;
import archenoah.lib.vaadin.Components.Twinlist.twinlist_fill;
import archenoah.lib.vaadin.Components.Window_Tab_Generierer.Build_Window_Button;
import archenoah.lib.vaadin.Forms_Builder.Form_Bind;
import archenoah.lib.vaadin.Language.i18n.I18nGlobalNotifiers;
import archenoah.lib.vaadin.Language.i18n.I18nManager;
import archenoah.lib.vaadin.resources.Icons;
import archenoah.lib.vaadin.valchecker.val_checker4;
import archenoah.web.normal.main.Menuepunkte.Standard.Administration.Benutzerverwaltung.Validatoren.Custom_Benutzerform_tel;
import archenoah.web.normal.main.Menuepunkte.Standard.Administration.Benutzerverwaltung.Validatoren.password_complexity;
import archenoah.web.normal.main.Menuepunkte.Standard.Administration.Benutzerverwaltung.Validatoren.password_matching;

import com.vaadin.annotations.AutoGenerated;
import com.vaadin.data.Container;
import com.vaadin.data.Property.ValueChangeEvent;
import com.vaadin.data.Property.ValueChangeListener;
import com.vaadin.data.validator.EmailValidator;
import com.vaadin.event.FieldEvents.BlurEvent;
import com.vaadin.event.FieldEvents.BlurListener;
import com.vaadin.ui.AbstractField;
import com.vaadin.ui.Alignment;
import com.vaadin.ui.Button;
import com.vaadin.ui.Button.ClickEvent;
import com.vaadin.ui.Button.ClickListener;
import com.vaadin.ui.CheckBox;
import com.vaadin.ui.CustomComponent;
import com.vaadin.ui.HorizontalLayout;
import com.vaadin.ui.Layout;
import com.vaadin.ui.MenuBar.MenuItem;
import com.vaadin.ui.NativeSelect;
import com.vaadin.ui.Panel;
import com.vaadin.ui.PasswordField;
import com.vaadin.ui.TextField;
import com.vaadin.ui.TwinColSelect;
import com.vaadin.ui.UI;
import com.vaadin.ui.VerticalLayout;
import com.vaadin.ui.Window;

import de.steinwedel.messagebox.ButtonId;
import de.steinwedel.messagebox.Icon;
import de.steinwedel.messagebox.MessageBox;

public class pop_benutzer_insert_edit extends CustomComponent {

    /*- VaadinEditorProperties={"grid":"RegularGrid,20","showGrid":true,"snapToGrid":true,"snapToObject":true,"movingGuides":false,"snappingDistance":10} */

    @AutoGenerated
    private VerticalLayout mainLayout;

    @AutoGenerated
    private Button btn_save;

    @AutoGenerated
    private HorizontalLayout horizontalLayout_2;

    @AutoGenerated
    private Panel pan_grp;

    @AutoGenerated
    private VerticalLayout verticalLayout_2;

    @AutoGenerated
    private TwinColSelect twin_grp;

    @AutoGenerated
    private HorizontalLayout horizontalLayout_1;

    @AutoGenerated
    private VerticalLayout verticalLayout_4;

    @AutoGenerated
    private Panel pan_stamm_daten;

    @AutoGenerated
    private VerticalLayout verticalLayout_6;

    @AutoGenerated
    private TextField txt_email;

    @AutoGenerated
    private TextField txt_tel;

    @AutoGenerated
    private TextField txt_vorname;

    @AutoGenerated
    private TextField txt_name;

    @AutoGenerated
    private NativeSelect ns_anrede;

    @AutoGenerated
    private VerticalLayout verticalLayout_3;

    @AutoGenerated
    private Panel pann_acc_daten;

    @AutoGenerated
    private VerticalLayout verticalLayout_5;

    @AutoGenerated
    private CheckBox cb_pass_aendern;

    @AutoGenerated
    private CheckBox cb_aktiv;

    @AutoGenerated
    private CheckBox ck_psw_send_per_email;

    @AutoGenerated
    private CheckBox ck_psw_gen;

    @AutoGenerated
    private PasswordField psw_pass_2;

    @AutoGenerated
    private PasswordField psw_pass_1;

    @AutoGenerated
    private TextField txt_username;

    /**
     * The constructor should first build the main layout, set the composition root and then do any custom initialization.
     * 
     * The constructor will not be automatically regenerated by the visual editor.
     */
    /********************** Standard Deklarationen **********************/
    
    private static org.slf4j.Logger log = org.slf4j.LoggerFactory.getLogger(pop_benutzer_insert_edit.class);
    
    private String Form_ID = "";
    private Map<Object, String> DBMap;

    private Map<Object, String> ValidateMap;
    private final CMS_Config_Std std;
    private DBClass db;
    private Form_Bind fb;
    private Window win;
    
    private Boolean readonly = false;
    private ArrayList<AbstractField> fieldList = null;
    
    private Container DB_R_S = null; // Ist Zustand Datenbank
    private String[] Del_Grp; // Zu Löschen
    private String[] Insert_Grp; // Zu Erstellen

    private I18nManager i18n;

    /*******************************************************************/
    public pop_benutzer_insert_edit(MenuItem selectedItem, String Arg_Form_ID, Boolean readonly) {
        buildMainLayout();
        i18n = new I18nManager(this);
        
        buildFieldList();
        std = CMS_Config_Std.getInstance();
        fb = new Form_Bind();
        Form_ID = Arg_Form_ID;
        this.readonly = readonly;

        Gen_Window(selectedItem);

        Set_DB_Map();
        Validate();
        Anrede_holen();
        Gruppenholen();
        // Validate_Test();

        if (Form_ID != "") {
            Forms_Fill();
            Gruppenholen_bearbeiten_Rechts();
        }
        event();

        form_config();
        
        
        
//        if(!this.readonly){
//            win.addAction(new ClickShortcut(btn_save, KeyCode.ENTER));
//        }

        // TODO add user code here
    }
    
    public pop_benutzer_insert_edit(MenuItem selectedItem, String Arg_Form_ID){
        this(selectedItem, Arg_Form_ID, false);
    }
    
    private void buildFieldList(){
        fieldList = new ArrayList<AbstractField>();
        
        Layout acc = (Layout) pann_acc_daten.getContent();
        Iterator accIt = acc.iterator();
        
        while(accIt.hasNext()){
            AbstractField c = (AbstractField) accIt.next();
            fieldList.add(c);
        }
        
        Layout st = (Layout) pan_stamm_daten.getContent();
        Iterator stIt = st.iterator();
        
        while(stIt.hasNext()){
            AbstractField c = (AbstractField) stIt.next();
            fieldList.add(c);
        }
        
        fieldList.add(twin_grp);
        
       
    }
    
    private void form_config() {
        psw_pass_1.setImmediate(true);
        psw_pass_2.setImmediate(true);
        
        // migrated from database
        btn_save.setIcon(Icons.White.save_16);
        txt_vorname.setRequired(true);
        txt_tel.setRequired(true);
        twin_grp.setRequired(true);
        txt_email.setRequired(true);
        txt_name.setRequired(true);
        psw_pass_2.setRequired(true);
        psw_pass_1.setRequired(true);
        txt_username.setRequired(true);
        ns_anrede.setRequired(true);
        // migration end
        
        if(readonly){
            
            btn_save.setEnabled(!readonly);
            
            for (AbstractField field : fieldList) {
                field.setReadOnly(readonly);
            }
        }
        
    }

    private void event() {
        btn_save.addClickListener(new ClickListener() {

            @Override
            public void buttonClick(ClickEvent event) {
                // TODO Automatisch generierter Methodenstub

                if (Validate_Test() == false) {
                    I18nManager.global(I18nGlobalNotifiers.fields_empty);
                    return;
                }

                String Pass = psw_pass_1.getValue();

                if (Form_ID.equals("") == true) {
                    Forms_Insert();
                    Gen_arrs_Groups();
                    Gruppen_Insert();
                    if (ck_psw_gen.getValue() == true) {
                        MessageBox.showHTML(Icon.INFO, "Passwort", "Passwort: " + Pass, ButtonId.OK);
                    }

                } else {
                    Gen_arrs_Groups();
                    Gruppen_Insert();
                    Gruppen_Delete();
                    Forms_Update();
                    if (ck_psw_gen.getValue() == true) {
                        MessageBox.showHTML(Icon.INFO, "Passwort", "Passwort: " + Pass, ButtonId.OK);
                    }

                }

                if (ck_psw_send_per_email.getValue() == true) {

                    Email_Schreiben(Pass);
                    I18nManager.global(I18nGlobalNotifiers.mail_sent);

                }

                UI.getCurrent().getUI().removeWindow(win);
            }

        });

        ck_psw_gen.addValueChangeListener(new ValueChangeListener() {

            @Override
            public void valueChange(ValueChangeEvent event) {
                // TODO Automatisch generierter Methodenstub

                if (ck_psw_gen.getValue() == true) {
                    RandomStringGenerator rnd = new RandomStringGenerator();

                    String tmp = rnd.generateRandomString(rnd.TYPE_MIXED_CASE, 8);
                    psw_pass_1.setValue((tmp));

                    psw_pass_2.setValue((tmp));

                    cb_pass_aendern.setValue(true);
                } else {
                    psw_pass_1.setValue("");

                    psw_pass_2.setValue("");
                    cb_pass_aendern.setValue(false);
                }
            }
        });

        BlurListener bl = new BlurListener() {

            @Override
            public void blur(BlurEvent event) {

                try {
                    psw_pass_1.validate();
                    psw_pass_2.validate();
                } catch (Exception e) {
                    // validation errors are handled automatically
                }

            }
        };

        psw_pass_1.addBlurListener(bl);
        psw_pass_2.addBlurListener(bl);
    }

    private void Email_Schreiben(String Pass) {
        TemplatingRenderer render = new TemplatingRenderer();
        render.loadTemplate("tpl_user_password");
        
        Mailer mail = new Mailer(CMS_Config_Std.getInstance());
        mail.setSender("kundenservice@hah.de.com");
        mail.setSubject("Zugangsdaten für Serviceportal");
        mail.setType(MAIL_TYPE.HTML);
        
        render.with("username", txt_username.getValue());
        render.with("password", Pass);
        
        
        log.info("sending mail for " + txt_email.getValue());
        mail.addRecipient(txt_email.getValue());
        mail.setContent(render.render());
        
        try {
            mail.send();
        } catch (IllegalStateException e) {
            log.warn("mail could not be sent for {}", txt_email.getValue());
        }

    }

    private String GET_Template() {
        DBClass db = new DBClass();
        db.DB_Data_Get.DB_Spalten.Standard.DB_set_Spalten_Einzeln("ELV_VORLAGE");
        db.DB_Data_Get.DB_Tabellen.DB_set_Tabelle_Einzeln("cms_email_liste_vorlage");
        db.DB_Data_Get.DB_Filter.DB_WHERE_Allgemein("cms_email_liste_vorlage", "ELV_ID", "=", "1", "");
        Container con = db.DB_Data_Get.DB_SEND_AND_GET_Container();

        String Narricht = "";
        for (Object ItemIda : con.getItemIds()) {
            // UserId = (int) result.getItem(ItemIda).getItemProperty(this.Spalte_ID)
            // .getValue();

            Narricht = (String) con.getItem(ItemIda).getItemProperty("ELV_VORLAGE").getValue();

        }

        return Narricht;
    }

    public void Gen_Window(MenuItem selectedItem) {
        Build_Window_Button bwb = new Build_Window_Button(selectedItem.getText(), mainLayout, "700px", "700px", selectedItem.getIcon());
        win = bwb.ReturnWindow();
    }

    private void Anrede_holen() {
        CMS_Config_Std std = CMS_Config_Std.getInstance();

        DBClass db = new DBClass();
        db.DB_Data_Get.DB_Spalten.Standard.DB_set_Spalten_All();
        db.DB_Data_Get.DB_Tabellen.DB_set_Tabelle_Einzeln("cms_auth_stammdaten_anrede");

        nativecombo nc = new nativecombo(db.DB_Data_Get.DB_SEND_AND_GET(), ns_anrede, "ASA_ID", "ASA_NAME");

        db.DB_Data_Get.connclose();

    }

    // /************************** Gruppen Holen***************************///
    private void Gruppenholen() {
        CMS_Config_Std std = CMS_Config_Std.getInstance();

        DBClass db = new DBClass();
        db.DB_Data_Get.DB_Spalten.Standard.DB_set_Spalten_Einzeln("AGL_ID");
        db.DB_Data_Get.DB_Spalten.Standard.DB_set_Spalten_Einzeln("AGL_NAME");
        db.DB_Data_Get.DB_Tabellen.DB_set_Tabelle_Einzeln("cms_auth_stammdaten_group");

        Container con = db.DB_Data_Get.DB_SEND_AND_GET();

        twinlist_fill tf = new twinlist_fill(con, twin_grp, "AGL_ID", "AGL_NAME");

    }

    private void Gruppenholen_bearbeiten_Rechts() {

        CMS_Config_Std std = CMS_Config_Std.getInstance();
        DBClass db = new DBClass();
        db.DB_Data_Get.DB_Spalten.Standard.DB_set_Spalten_Einzeln("AL_G_ID");
        db.DB_Data_Get.DB_Tabellen.DB_set_Tabelle_Einzeln("cms_auth_liste_gu");
        db.DB_Data_Get.DB_Filter.DB_WHERE_Allgemein("cms_auth_liste_gu", "AL_U_ID", "=", Form_ID, "");
        DB_R_S = db.DB_Data_Get.DB_SEND_AND_GET_Container();

        twinlist_Set_val sv = new twinlist_Set_val(DB_R_S, twin_grp, "AL_G_ID");

    }

    private void Gen_arrs_Groups() {

        /**** Insert Part ******/
        Twinlist_Getarray tg = new Twinlist_Getarray(twin_grp.getValue());

        String[] ar = tg.Arrayholen();

        if (DB_R_S == null) {
            Insert_Grp = ar;

        } else {
            for (int i = 0; i < ar.length; i++) {
                boolean gef = false;

                for (Object ItemIda : DB_R_S.getItemIds()) {
                    // UserId = (int) result.getItem(ItemIda).getItemProperty(this.Spalte_ID).getValue;
                    //
                    if (ar[i].equals(DB_R_S.getItem(ItemIda).getItemProperty("AL_G_ID").getValue().toString()) == true) {
                        gef = true;
                    }
                }

                if (gef == false) {
                    ArrayBuilder_Einzel ae = new ArrayBuilder_Einzel(Insert_Grp);
                    Insert_Grp = ae.Array_Holen();

                    Insert_Grp[Insert_Grp.length - 1] = ar[i];
                }
            }

            for (Object ItemIda : DB_R_S.getItemIds()) {
                // UserId = (int) result.getItem(ItemIda).getItemProperty(this.Spalte_ID).getValue;
                //
                boolean gef = false;

                for (int i = 0; i < ar.length; i++) {
                    if (ar[i].equals(DB_R_S.getItem(ItemIda).getItemProperty("AL_G_ID").getValue().toString()) == true) {
                        gef = true;
                    }

                }

                if (gef == false) {
                    ArrayBuilder_Einzel ae = new ArrayBuilder_Einzel(Del_Grp);
                    Del_Grp = ae.Array_Holen();

                    Del_Grp[Del_Grp.length - 1] = DB_R_S.getItem(ItemIda).getItemProperty("AL_G_ID").getValue().toString();
                }

            }
        }

    }

    private void Gruppen_Insert() {
        if (Insert_Grp == null) {
            return;
        }

        CMS_Config_Std std = CMS_Config_Std.getInstance();
        DBClass db = new DBClass();

        for (int i = 0; i < Insert_Grp.length; i++) {
            db = new DBClass();
            db.DB_Data_Insert.DB_Tabellen.DB_set_Tabelle_Einzeln("cms_auth_liste_gu");
            db.DB_Data_Insert.DB_Daten.DB_Data("cms_auth_liste_gu", "AL_G_ID", Insert_Grp[i]);
            db.DB_Data_Insert.DB_Daten.DB_Data("cms_auth_liste_gu", "AL_U_ID", Form_ID);
            db.DB_Data_Insert.DB_Insert();
        }

    }

    private void Gruppen_Delete() {
        if (Del_Grp == null) {
            return;
        }

        CMS_Config_Std std = CMS_Config_Std.getInstance();
        DBClass db = new DBClass();

        for (int i = 0; i < Del_Grp.length; i++) {
            db = new DBClass();
            db.DB_Data_Delete.DB_Tabellen.DB_set_Tabelle_Einzeln("cms_auth_liste_gu");
            db.DB_Data_Delete.DB_Filter.DB_WHERE_Allgemein("cms_auth_liste_gu", "AL_G_ID", "=", Del_Grp[i], "AND");
            db.DB_Data_Delete.DB_Filter.DB_WHERE_Allgemein("cms_auth_liste_gu", "AL_U_ID", "=", Form_ID, "");
            db.DB_Data_Delete.DB_Delete();
        }

    }

    // **********************************************************************************//
    private void Set_DB_Map() {
        DBMap = new HashMap<>();
        DBMap.put(txt_username, "cms_auth_stammdaten_user:AUL_USERNAME");
        DBMap.put(cb_aktiv, "cms_auth_stammdaten_user:AUL_AKTIV");
        DBMap.put(cb_pass_aendern, "cms_auth_stammdaten_user:AUL_PASS_RESET");
        DBMap.put(ns_anrede, "cms_auth_stammdaten_user:AUL_ANREDE_ID");
        DBMap.put(txt_name, "cms_auth_stammdaten_user:AUL_NAME");
        DBMap.put(txt_vorname, "cms_auth_stammdaten_user:AUL_VORNAME");
        DBMap.put(txt_tel, "cms_auth_stammdaten_user:AUL_TEL");
        DBMap.put(txt_email, "cms_auth_stammdaten_user:AUL_EMAIL");
        // DBMap.put(txt_grp,"cms_auth_stammdaten_group:AGL_NAME");
    }

    private void Validate() {
        Set_Validate_Map();

        // psw_pass_1.addValidator(new Custom_Benutzerform_psw_ändern(psw_pass_1, psw_pass_2));
        // psw_pass_2.addValidator(new Custom_Benutzerform_psw_ändern(psw_pass_1, psw_pass_2));
        psw_pass_1.addValidator(new password_complexity());
        psw_pass_2.addValidator(new password_matching(psw_pass_1));

        txt_email.addValidator(new EmailValidator("Die Eingabe entspricht keiner Emailadresse !"));
        // System.out.println(txt_email.getErrorMessage());
        txt_tel.addValidator(new Custom_Benutzerform_tel());

    }

    private void Set_Validate_Map() {
        ValidateMap = new HashMap<>();
        ValidateMap.put(txt_username, "txt_username");
        ValidateMap.put(txt_name, "txt_name");
        ValidateMap.put(txt_vorname, "txt_vorname");
        ValidateMap.put(ns_anrede, "ns_anrede");
        ValidateMap.put(psw_pass_1, "psw_pass_1");
        ValidateMap.put(psw_pass_2, "psw_pass_2");
        ValidateMap.put(twin_grp, "twin_grp");
        ValidateMap.put(txt_tel, "txt_tel");
        ValidateMap.put(txt_email, "txt_email");

    }

    private void Forms_Fill() {
        db = new DBClass();
        db.DB_Data_Get.DB_Spalten.Standard.DB_set_Spalten_All();
        DB_Table();
        DB_Filter();
        Container con = db.DB_Data_Get.DB_SEND_AND_GET_Container();
        fb = new Form_Bind();

        for (Object ItemIda : con.getItemIds()) {
            fb.Get_and_Fill(con, DBMap);
        }

        psw_pass_1.setValue("*1Default1*");
        psw_pass_2.setValue("*1Default1*");

    }

    private void Forms_Insert() {
        db = new DBClass();
        fb = new Form_Bind();
        fb.Insert(db, DBMap);
        db.DB_Data_Insert.DB_Tabellen.DB_set_Tabelle_Einzeln("cms_auth_stammdaten_user");
        // DB_Filter();
        db.DB_Data_Insert.DB_Daten.DB_Data("cms_auth_stammdaten_user", "AUL_PASSWORT", EncryptPass());
        Form_ID = Integer.toString(db.DB_Data_Insert.DB_Insert());
    }

    private void Forms_Update() {
        db = new DBClass();
        fb = new Form_Bind();
        fb.Update(db, DBMap);

        if (psw_pass_1.getValue().equals("*1Default1*") == false) {
            db.DB_Data_Update.DB_Daten.DB_Data("cms_auth_stammdaten_user", "AUL_PASSWORT", EncryptPass());
        }

        db.DB_Data_Update.DB_Tabellen.DB_set_Tabelle_Einzeln("cms_auth_stammdaten_user");
        db.DB_Data_Update.DB_Filter.DB_WHERE_Allgemein("cms_auth_stammdaten_user", "AUL_ID", "=", Form_ID, "");
        db.DB_Data_Update.DB_Update();
    }

    private void DB_Table() {
        db.DB_Data_Get.DB_Tabellen.DB_set_Tabelle_Einzeln("cms_auth_stammdaten_user");

    }

    private void DB_Filter() {
        db.DB_Data_Get.DB_Filter.DB_WHERE_Allgemein("cms_auth_stammdaten_user", "AUL_ID", "=", Form_ID, "");

    }

    /********************** END Datenbank Funktionen **********************/
    private boolean Validate_Test() {
        val_checker4 val = new val_checker4(ValidateMap);
        if (val.Is_Valid() == false) {
            return false;
        } else {
            return true;
        }

    }

    private String EncryptPass() {
        String newPass = null;

        try {
            newPass = Crypt_SHA1.SHA512(txt_username.getValue() + psw_pass_1.getValue() + "6545465258552455554424");

        } catch (NoSuchAlgorithmException ex) {
            System.out.println(ex.getMessage());
        } catch (UnsupportedEncodingException ex) {
            System.out.println(ex.getMessage());
        }

        return newPass;
    }

    @AutoGenerated
    private VerticalLayout buildMainLayout() {
        // common part: create layout
        mainLayout = new VerticalLayout();
        mainLayout.setImmediate(false);
        mainLayout.setWidth("100%");
        mainLayout.setHeight("100%");
        mainLayout.setMargin(true);

        // top-level component properties
        setWidth("100.0%");
        setHeight("100.0%");

        // horizontalLayout_1
        horizontalLayout_1 = buildHorizontalLayout_1();
        mainLayout.addComponent(horizontalLayout_1);
        mainLayout.setExpandRatio(horizontalLayout_1, 2.0f);
        mainLayout.setComponentAlignment(horizontalLayout_1, new Alignment(20));

        // horizontalLayout_2
        horizontalLayout_2 = buildHorizontalLayout_2();
        mainLayout.addComponent(horizontalLayout_2);
        mainLayout.setExpandRatio(horizontalLayout_2, 1.0f);
        mainLayout.setComponentAlignment(horizontalLayout_2, new Alignment(20));

        // btn_save
        btn_save = new Button();
        btn_save.setCaption("Speichern");
        btn_save.setImmediate(true);
        btn_save.setWidth("-1px");
        btn_save.setHeight("-1px");
        mainLayout.addComponent(btn_save);
        mainLayout.setExpandRatio(btn_save, 0.3f);
        mainLayout.setComponentAlignment(btn_save, new Alignment(48));

        return mainLayout;
    }

    @AutoGenerated
    private HorizontalLayout buildHorizontalLayout_1() {
        // common part: create layout
        horizontalLayout_1 = new HorizontalLayout();
        horizontalLayout_1.setImmediate(false);
        horizontalLayout_1.setWidth("100.0%");
        horizontalLayout_1.setHeight("100.0%");
        horizontalLayout_1.setMargin(false);

        // verticalLayout_3
        verticalLayout_3 = buildVerticalLayout_3();
        horizontalLayout_1.addComponent(verticalLayout_3);
        horizontalLayout_1.setComponentAlignment(verticalLayout_3, new Alignment(20));

        // verticalLayout_4
        verticalLayout_4 = buildVerticalLayout_4();
        horizontalLayout_1.addComponent(verticalLayout_4);
        horizontalLayout_1.setComponentAlignment(verticalLayout_4, new Alignment(20));

        return horizontalLayout_1;
    }

    @AutoGenerated
    private VerticalLayout buildVerticalLayout_3() {
        // common part: create layout
        verticalLayout_3 = new VerticalLayout();
        verticalLayout_3.setImmediate(false);
        verticalLayout_3.setWidth("100.0%");
        verticalLayout_3.setHeight("100.0%");
        verticalLayout_3.setMargin(false);

        // pann_acc_daten
        pann_acc_daten = buildPann_acc_daten();
        verticalLayout_3.addComponent(pann_acc_daten);
        verticalLayout_3.setComponentAlignment(pann_acc_daten, new Alignment(48));

        return verticalLayout_3;
    }

    @AutoGenerated
    private Panel buildPann_acc_daten() {
        // common part: create layout
        pann_acc_daten = new Panel();
        pann_acc_daten.setCaption("Account Daten");
        pann_acc_daten.setImmediate(false);
        pann_acc_daten.setWidth("80.0%");
        pann_acc_daten.setHeight("90.0%");

        // verticalLayout_5
        verticalLayout_5 = buildVerticalLayout_5();
        pann_acc_daten.setContent(verticalLayout_5);

        return pann_acc_daten;
    }

    @AutoGenerated
    private VerticalLayout buildVerticalLayout_5() {
        // common part: create layout
        verticalLayout_5 = new VerticalLayout();
        verticalLayout_5.setImmediate(false);
        verticalLayout_5.setWidth("100.0%");
        verticalLayout_5.setHeight("100.0%");
        verticalLayout_5.setMargin(false);

        // txt_username
        txt_username = new TextField();
        txt_username.setCaption("Benutzername");
        txt_username.setImmediate(false);
        txt_username.setWidth("-1px");
        txt_username.setHeight("-1px");
        verticalLayout_5.addComponent(txt_username);
        verticalLayout_5.setComponentAlignment(txt_username, new Alignment(48));

        // psw_pass_1
        psw_pass_1 = new PasswordField();
        psw_pass_1.setCaption("Passwort");
        psw_pass_1.setImmediate(false);
        psw_pass_1.setWidth("-1px");
        psw_pass_1.setHeight("-1px");
        verticalLayout_5.addComponent(psw_pass_1);
        verticalLayout_5.setComponentAlignment(psw_pass_1, new Alignment(48));

        // psw_pass_2
        psw_pass_2 = new PasswordField();
        psw_pass_2.setCaption("Passwort Wiederholen");
        psw_pass_2.setImmediate(false);
        psw_pass_2.setWidth("-1px");
        psw_pass_2.setHeight("-1px");
        verticalLayout_5.addComponent(psw_pass_2);
        verticalLayout_5.setComponentAlignment(psw_pass_2, new Alignment(48));

        // ck_psw_gen
        ck_psw_gen = new CheckBox();
        ck_psw_gen.setCaption("Passwort Generieren");
        ck_psw_gen.setImmediate(false);
        ck_psw_gen.setWidth("-1px");
        ck_psw_gen.setHeight("-1px");
        verticalLayout_5.addComponent(ck_psw_gen);
        verticalLayout_5.setComponentAlignment(ck_psw_gen, new Alignment(48));

        // ck_psw_send_per_email
        ck_psw_send_per_email = new CheckBox();
        ck_psw_send_per_email.setCaption("Passwort  per Email senden");
        ck_psw_send_per_email.setImmediate(false);
        ck_psw_send_per_email.setWidth("-1px");
        ck_psw_send_per_email.setHeight("-1px");
        verticalLayout_5.addComponent(ck_psw_send_per_email);
        verticalLayout_5.setComponentAlignment(ck_psw_send_per_email, new Alignment(48));

        // cb_aktiv
        cb_aktiv = new CheckBox();
        cb_aktiv.setCaption("Benutzer aktiv");
        cb_aktiv.setImmediate(false);
        cb_aktiv.setWidth("-1px");
        cb_aktiv.setHeight("-1px");
        verticalLayout_5.addComponent(cb_aktiv);
        verticalLayout_5.setComponentAlignment(cb_aktiv, new Alignment(48));

        // cb_pass_aendern
        cb_pass_aendern = new CheckBox();
        cb_pass_aendern.setCaption("Passwort Ändern bei Anmeldung");
        cb_pass_aendern.setImmediate(false);
        cb_pass_aendern.setWidth("-1px");
        cb_pass_aendern.setHeight("-1px");
        verticalLayout_5.addComponent(cb_pass_aendern);
        verticalLayout_5.setComponentAlignment(cb_pass_aendern, new Alignment(48));

        return verticalLayout_5;
    }

    @AutoGenerated
    private VerticalLayout buildVerticalLayout_4() {
        // common part: create layout
        verticalLayout_4 = new VerticalLayout();
        verticalLayout_4.setImmediate(false);
        verticalLayout_4.setWidth("100.0%");
        verticalLayout_4.setHeight("100.0%");
        verticalLayout_4.setMargin(false);

        // pan_stamm_daten
        pan_stamm_daten = buildPan_stamm_daten();
        verticalLayout_4.addComponent(pan_stamm_daten);
        verticalLayout_4.setComponentAlignment(pan_stamm_daten, new Alignment(48));

        return verticalLayout_4;
    }

    @AutoGenerated
    private Panel buildPan_stamm_daten() {
        // common part: create layout
        pan_stamm_daten = new Panel();
        pan_stamm_daten.setCaption("Stammdaten");
        pan_stamm_daten.setImmediate(false);
        pan_stamm_daten.setWidth("80.0%");
        pan_stamm_daten.setHeight("90.0%");

        // verticalLayout_6
        verticalLayout_6 = buildVerticalLayout_6();
        pan_stamm_daten.setContent(verticalLayout_6);

        return pan_stamm_daten;
    }

    @AutoGenerated
    private VerticalLayout buildVerticalLayout_6() {
        // common part: create layout
        verticalLayout_6 = new VerticalLayout();
        verticalLayout_6.setImmediate(false);
        verticalLayout_6.setWidth("100.0%");
        verticalLayout_6.setHeight("100.0%");
        verticalLayout_6.setMargin(false);

        // ns_anrede
        ns_anrede = new NativeSelect();
        ns_anrede.setCaption("Anrede");
        ns_anrede.setImmediate(false);
        ns_anrede.setWidth("50.0%");
        ns_anrede.setHeight("-1px");
        verticalLayout_6.addComponent(ns_anrede);
        verticalLayout_6.setComponentAlignment(ns_anrede, new Alignment(48));

        // txt_name
        txt_name = new TextField();
        txt_name.setCaption("Name");
        txt_name.setImmediate(false);
        txt_name.setWidth("50.0%");
        txt_name.setHeight("-1px");
        verticalLayout_6.addComponent(txt_name);
        verticalLayout_6.setComponentAlignment(txt_name, new Alignment(48));

        // txt_vorname
        txt_vorname = new TextField();
        txt_vorname.setCaption("Vorname");
        txt_vorname.setImmediate(false);
        txt_vorname.setWidth("50.0%");
        txt_vorname.setHeight("-1px");
        verticalLayout_6.addComponent(txt_vorname);
        verticalLayout_6.setComponentAlignment(txt_vorname, new Alignment(48));

        // txt_tel
        txt_tel = new TextField();
        txt_tel.setCaption("Telefon");
        txt_tel.setImmediate(false);
        txt_tel.setWidth("50.0%");
        txt_tel.setHeight("-1px");
        verticalLayout_6.addComponent(txt_tel);
        verticalLayout_6.setComponentAlignment(txt_tel, new Alignment(48));

        // txt_email
        txt_email = new TextField();
        txt_email.setCaption("Email");
        txt_email.setImmediate(false);
        txt_email.setWidth("50.0%");
        txt_email.setHeight("-1px");
        verticalLayout_6.addComponent(txt_email);
        verticalLayout_6.setComponentAlignment(txt_email, new Alignment(48));

        return verticalLayout_6;
    }

    @AutoGenerated
    private HorizontalLayout buildHorizontalLayout_2() {
        // common part: create layout
        horizontalLayout_2 = new HorizontalLayout();
        horizontalLayout_2.setImmediate(false);
        horizontalLayout_2.setWidth("100.0%");
        horizontalLayout_2.setHeight("100.0%");
        horizontalLayout_2.setMargin(false);

        // pan_grp
        pan_grp = buildPan_grp();
        horizontalLayout_2.addComponent(pan_grp);
        horizontalLayout_2.setComponentAlignment(pan_grp, new Alignment(48));

        return horizontalLayout_2;
    }

    @AutoGenerated
    private Panel buildPan_grp() {
        // common part: create layout
        pan_grp = new Panel();
        pan_grp.setCaption("Gruppe Beitreten");
        pan_grp.setImmediate(false);
        pan_grp.setWidth("70.0%");
        pan_grp.setHeight("90.0%");

        // verticalLayout_2
        verticalLayout_2 = buildVerticalLayout_2();
        pan_grp.setContent(verticalLayout_2);

        return pan_grp;
    }

    @AutoGenerated
    private VerticalLayout buildVerticalLayout_2() {
        // common part: create layout
        verticalLayout_2 = new VerticalLayout();
        verticalLayout_2.setImmediate(false);
        verticalLayout_2.setWidth("100.0%");
        verticalLayout_2.setHeight("100.0%");
        verticalLayout_2.setMargin(false);

        // twin_grp
        twin_grp = new TwinColSelect();
        twin_grp.setImmediate(false);
        twin_grp.setWidth("80.0%");
        twin_grp.setHeight("80.0%");
        verticalLayout_2.addComponent(twin_grp);
        verticalLayout_2.setComponentAlignment(twin_grp, new Alignment(48));

        return verticalLayout_2;
    }

}
