package archenoah.web.normal.main.Menuepunkte.Individuelle.Stammdaten.Benutzerverwaltung;

import org.tepi.filtertable.FilterTable;

import archenoah.UIS.UI_Functions;
import archenoah.config.CMS_Config_Std;
import archenoah.lib.tool.comunication.dbclass.DBClass;
import archenoah.lib.tool.java_plugin.array_builder.classes.ArrayBuilder_Mehrfach;
import archenoah.lib.vaadin.Components.ClickMenuBar.ClickCommand;
import archenoah.lib.vaadin.Components.Window_Tab_Generierer.Build_Tab_Menue_Item;
import archenoah.lib.vaadin.Components.Window_Tab_Generierer.Build_Window_Button;
import archenoah.lib.vaadin.Language.i18n.I18nGlobalMessages;
import archenoah.lib.vaadin.Language.i18n.I18nGlobalNotifiers;
import archenoah.lib.vaadin.Language.i18n.I18nManager;
import archenoah.lib.vaadin.MenuBerechtigung.Rechteholen;
import archenoah.lib.vaadin.resources.Icons;
import archenoah.web.normal.main.Menuepunkte.Individuelle.Stammdaten.Benutzerverwaltung.Filter.Decorator_benutzerverwaltung;

import com.github.wolfie.refresher.Refresher;
import com.github.wolfie.refresher.Refresher.RefreshListener;
import com.vaadin.addon.tableexport.ExcelExport;
import com.vaadin.annotations.AutoGenerated;
import com.vaadin.data.Container;
import com.vaadin.server.ThemeResource;
import com.vaadin.ui.Alignment;
import com.vaadin.ui.Button;
import com.vaadin.ui.CustomComponent;
import com.vaadin.ui.HorizontalLayout;
import com.vaadin.ui.MenuBar;
import com.vaadin.ui.MenuBar.Command;
import com.vaadin.ui.MenuBar.MenuItem;
import com.vaadin.ui.TabSheet;
import com.vaadin.ui.Table;
import com.vaadin.ui.UI;
import com.vaadin.ui.VerticalLayout;
import com.vaadin.ui.Window;

import de.steinwedel.messagebox.ButtonId;
import de.steinwedel.messagebox.MessageBoxListener;

public class data_view_benutzerverwaltung extends CustomComponent {

    /*- VaadinEditorProperties={"grid":"RegularGrid,20","showGrid":true,"snapToGrid":true,"snapToObject":true,"movingGuides":false,"snappingDistance":10} */

    @AutoGenerated
    private HorizontalLayout mainLayout;

    @AutoGenerated
    private HorizontalLayout horizontalLayout_1;

    @AutoGenerated
    private VerticalLayout verticalLayout_2;

    @AutoGenerated
    private FilterTable tbl_frm;

    @AutoGenerated
    private MenuBar men_frm;

    @AutoGenerated
    private HorizontalLayout horizontalLayout_2;

    /**
     * The constructor should first build the main layout, set the composition root and then do any custom initialization.
     * 
     * The constructor will not be automatically regenerated by the visual editor.
     */

    /**************** --> Allgemein <--- ********************/
    // Allgemein
    private UI_Functions me;
    private Refresher refresher;
    private CMS_Config_Std std;
    private String Exportname;
    // Datenbank
    private Object[][] Filter = null;
    private Container cont_Momentan;

    // Berrechtigung
    private int ACC_ID;
    private int Lesen;
    private int Schreiben;
    private int Erstellen;
    private int Edit;
    private int Löschen;

    private MenuItem Temp_Menü = null;

    private Button Temp_Btn = null;
    /******************************************************/
    /**************** --> Tabsheetvars <--- *****************/
    private TabSheet tab = null;

    /******************************************************/
    /**************** --> Windowvars <--- *******************/
    private Window win = null;
    /******************************************************/
    /******************* -> Menüpunkte <- ********************/
    MenuBar.MenuItem Btn_Add;

    MenuBar.MenuItem Btn_EDIT;

    MenuBar.MenuItem Btn_DEL;

    MenuBar.MenuItem Btn_EXP;

    MenuBar.MenuItem Btn_EXP_excel;

    MenuBar.MenuItem Btn_EXP_csv;

    MenuBar.MenuItem Btn_FT;
    MenuBar.MenuItem Btn_READ;

    /*******************************************************/
    /******************* --> Custom <--- ********************/
    /******************************************************/

    /************ ----->Einstellungen<-- ********************/
//    private String LNG_FRM_ID = "18";
    private String BER_MEN_ID = "";
    private String Windows_Height = "600px";
    private String Windows_Width = "1024px";
    private int Datenholen_MS = 5000;
    private boolean Datenholen_An = true;

    private String TBL_ID = "AUL_ID";

    private String NOT_Del = "17";

    private String Exporttitel = "";
    private String Export_Filename = "";
    private String F_ID;

    private I18nManager i18n;

    /******************************************************/

    public data_view_benutzerverwaltung(MenuItem Arg_Menü) {
        Temp_Menü = Arg_Menü;

        // TODO add user code here
    }

    public data_view_benutzerverwaltung(Button Arg_btn) {

        Temp_Btn = Arg_btn;

        // TODO add user code here
    }

    /***************************** ---> Feste Funtionen<--- **************************************/

    /********* INIT-Window ************/
    public void Init_Class_Window() {
        if (Windows_Height.equals("") == true || Windows_Width.equals("") == true) {
            System.out.println("Form Einstellung Fehlt: !!!");
            return;
        }

        Standard_Init();

        if (Temp_Menü != null) {
            String Recourcename = Temp_Menü.getIcon().toString();
            Recourcename = Recourcename.substring(0, Recourcename.length() - 12) + "white-16.png";

            Exportname = Temp_Menü.getText();
            Build_Window_Button bwb = new Build_Window_Button(Temp_Menü.getText(), mainLayout, Windows_Height, Windows_Width, new ThemeResource(Recourcename));
            win = bwb.ReturnWindow();
        }
        if (Temp_Btn != null) {
            Exportname = Temp_Btn.getCaption();
            Build_Window_Button bwb = new Build_Window_Button(Temp_Btn.getCaption(), mainLayout, Windows_Height, Windows_Width, Temp_Btn.getIcon());
            win = bwb.ReturnWindow();
        }

    }

    /********* INIT-Tray ************/
    public void Init_Class_Tab(TabSheet Arg_tab) {

        Standard_Init();
        tab = Arg_tab;
        if (Temp_Menü != null) {
            Exportname = Temp_Menü.getText();
            Build_Tab_Menue_Item bt = new Build_Tab_Menue_Item(Arg_tab, Temp_Menü.getText(), mainLayout, Temp_Menü.getIcon());
        }
        if (Temp_Btn != null) {
            Exportname = Temp_Btn.getCaption();
            Build_Tab_Menue_Item bt = new Build_Tab_Menue_Item(Arg_tab, Temp_Btn.getCaption(), mainLayout, Temp_Btn.getIcon());
        }

    }

    /********* Init-Standard ************/
    private void Standard_Init() {
        buildMainLayout();
        i18n = new I18nManager(this);

        Generate_Menüs();
        me = new UI_Functions();
        std = CMS_Config_Std.getInstance();
        Config_TBL();

        if (Datenholen_An == true) {
            Datenholen();
            set_refresher();
        }
        i18n.refresh();
    }

    public void Set_Berrechtigung_Database() {
        if (BER_MEN_ID == "") {
            System.out.println("Form Einstellung Fehlt: !!!");
            return;
        }

        ACC_ID = (int) UI.getCurrent().getSession().getSession().getAttribute("Userid");
        Rechteholen r = new Rechteholen(ACC_ID + "");
        String[][] Asan = r.Datenholen();

        for (int i = 0; i < Asan.length; i++) {
            if (Asan[i][0].equals(BER_MEN_ID) == true) {

                Lesen = Integer.valueOf(Asan[i][3]);

                Schreiben = Integer.valueOf(Asan[i][4]);
                Erstellen = Integer.valueOf(Asan[i][6]);
                Löschen = Integer.valueOf(Asan[i][5]);
            }
        }
    }

    public void Set_Berrechtigung_Custom(int Arg_Lesen, int Arg_Erstellen, int Arg_Bearbeiten, int Arg_Loeschen) {
        Lesen = Arg_Lesen;
        Schreiben = Arg_Erstellen;
        Erstellen = Arg_Erstellen;
        Edit = Arg_Bearbeiten;
        Löschen = Arg_Loeschen;
    }

    private boolean Prüfung_Del_Arzt(final int ID) {
        CMS_Config_Std std = CMS_Config_Std.getInstance();
        DBClass db = new DBClass();
        db.DB_Data_Get.DB_Tabellen.DB_set_Tabelle_Einzeln("cust_arzt_stammdaten_arzt");
        db.DB_Data_Get.DB_Spalten.Standard.DB_set_Spalten_All();
        db.DB_Data_Get.DB_Filter.DB_WHERE_Allgemein("cust_arzt_stammdaten_arzt", "ASA_U_ID", "=", "" + ID, "");

        Container con = db.DB_Data_Get.DB_SEND_AND_GET_Container();

        if (con.size() > 0) {
            return true;
        } else {
            return false;
        }

    }

    private boolean Prüfung_Del_KS(final int ID) {
        CMS_Config_Std std = CMS_Config_Std.getInstance();
        DBClass db = new DBClass();
        db.DB_Data_Get.DB_Tabellen.DB_set_Tabelle_Einzeln("cust_krankenschwester_stammdaten_ks");
        db.DB_Data_Get.DB_Spalten.Standard.DB_set_Spalten_All();
        db.DB_Data_Get.DB_Filter.DB_WHERE_Allgemein("cust_krankenschwester_stammdaten_ks", "KSK_U_ID", "=", "" + ID, "");

        Container con = db.DB_Data_Get.DB_SEND_AND_GET_Container();

        if (con.size() > 0) {
            return true;
        } else {
            return false;
        }

    }

    private void Datenlöschen(final int ID) {

        if (ID == 1) {

            I18nManager.global(I18nGlobalNotifiers.admin_user_not_deletable);

            return;

        } else {
            if (F_ID == "11") {
                if (Prüfung_Del_Arzt(ID) == true) {

                    I18nManager.global(I18nGlobalNotifiers.assignment_blocking_delete);

                    return;

                }
            }
            if (F_ID == "12") {
                if (Prüfung_Del_KS(ID) == true) {

                    I18nManager.global(I18nGlobalNotifiers.assignment_blocking_delete);

                    return;

                }
            }

            I18nManager.global(I18nGlobalMessages.confirm_delete, new MessageBoxListener() {
                
                @Override
                public void buttonClicked(ButtonId arg0) {
                    if(ButtonId.YES == arg0) {
                        Del(ID);
                    }
                }
            });
        }
    }

    /************ -><- ******************/
    public void Set_ID(String Arg_F_ID) {
        F_ID = Arg_F_ID;
    }

    /***************** Comands *********************/
    public ClickCommand cmd_btn_add = new ClickCommand() {
        @Override
        public void menuClicked(MenuItem selectedItem) {
            // TODO Auto-generated method stub

            form_benutzer_insert_edit pie = new form_benutzer_insert_edit(selectedItem, "");
            pie.G_ID = F_ID;
            pie.Init_Class_Window();
            pie.Set_Berrechtigung_Custom(1, 1, 1, 1);
            this.setParent(men_frm);
            this.setWindow(pie.getWindow());
        }
    };
    public ClickCommand cmd_btn_edit = new ClickCommand() {
        @Override
        public void menuClicked(MenuItem selectedItem) {
            // TODO Auto-generated method stub

            Object rowId = tbl_frm.getValue(); // get the selected rows id

            if (rowId == null) {

                I18nManager.global(I18nGlobalNotifiers.no_entry_selected);
                return;
            }
            final int ID = (int) tbl_frm.getContainerProperty(rowId, TBL_ID).getValue();
            form_benutzer_insert_edit pie = new form_benutzer_insert_edit(selectedItem, "" + ID);
            pie.G_ID = F_ID;
            pie.Init_Class_Window();
            pie.Set_Berrechtigung_Custom(1, 1, 1, 1);
            this.setParent(men_frm);
            this.setWindow(pie.getWindow());
        }
    };

    public ClickCommand cmd_btn_read = new ClickCommand() {
        @Override
        public void menuClicked(MenuItem selectedItem) {
            // TODO Auto-generated method stub

            Object rowId = tbl_frm.getValue(); // get the selected rows id

            if (rowId == null) {

                I18nManager.global(I18nGlobalNotifiers.no_entry_selected);
                return;
            }
            final int ID = (int) tbl_frm.getContainerProperty(rowId, TBL_ID).getValue();
            form_benutzer_insert_edit pie = new form_benutzer_insert_edit(selectedItem, "" + ID);
            pie.G_ID = F_ID;
            pie.Init_Class_Window();
            pie.Set_Berrechtigung_Custom(1, 0, 0, 0);
            this.setParent(men_frm);
            this.setWindow(pie.getWindow());
        }
    };

    public Command cmd_btn_del = new Command() {
        @Override
        public void menuSelected(MenuItem selectedItem) {
            // TODO Auto-generated method stub

            Object rowId = tbl_frm.getValue(); // get the selected rows id

            if (rowId == null) {

                I18nManager.global(I18nGlobalNotifiers.no_entry_selected);
                return;
            }
            final int ID = (int) tbl_frm.getContainerProperty(rowId, TBL_ID).getValue();

            Datenlöschen(ID);

        }
    };
    public Command cmd_btn_export_excel = new Command() {
        @Override
        public void menuSelected(MenuItem selectedItem) {
            // TODO Auto-generated method stub
            Table tbl = new Table();
            tbl.setVisible(false);
            tbl.setContainerDataSource(tbl_frm.getContainerDataSource());

            mainLayout.addComponent(tbl);

            System.out.println(tbl.size());
            ExcelExport excelExport = new ExcelExport(tbl);

            excelExport.excludeCollapsedColumns();
            excelExport.setReportTitle(Exporttitel);
            excelExport.setExportFileName(Export_Filename);

            excelExport.export();
            mainLayout.removeComponent(tbl);

        }
    };

    public Command cmd_btn_export_csv = new Command() {
        @Override
        public void menuSelected(MenuItem selectedItem) {
            // TODO Auto-generated method stub

        }
    };

    public Command cmd_btn_filter = new Command() {
        @Override
        public void menuSelected(MenuItem selectedItem) {
            // TODO Auto-generated method stub

            if (tbl_frm.isFilterBarVisible() == false) {
                tbl_frm.setFilterBarVisible(true);
                // selectedItem.addStyleName("Filter");
                me.remEx(refresher);
            } else {
                tbl_frm.setFilterBarVisible(false);
                // tbl_frm.removeStyleName("Filter");

                Container gmp = tbl_frm.getContainerDataSource();

                for (Object propid : gmp.getContainerPropertyIds()) {

                    tbl_frm.setFilterFieldValue(propid, "");
                }
                set_refresher();
            }

        }
    };

    /***********************************************/
    /**** Refresher ****/

    private void set_refresher() {
        refresher = new Refresher();

        refresher.setRefreshInterval(Datenholen_MS);

        refresher.addListener(new Datenholenlistener());

        me.addEx(refresher);
    }

    public class Datenholenlistener implements RefreshListener {

        @Override
        public void refresh(Refresher source) {
            // TODO Automatisch generierter Methodenstub

            Object rowId = tbl_frm.getValue(); // get the selected rows id
            Object Sort = tbl_frm.getSortContainerPropertyId();

            // tbl_user.get

            Integer originalIndex = tbl_frm.getCurrentPageFirstItemIndex();
            Datenholen();
            tbl_frm.setCurrentPageFirstItemIndex(originalIndex);

            if (rowId != null) {
                tbl_frm.setValue(rowId);
            }

            if (Sort != null) {
                // tbl_arzt.setSortContainerPropertyId(Sort);

            }

            if (Temp_Menü != null) {

                if (tab != null) {
                    if (Prüfungtab(Temp_Menü.getText()) == false) {
                        me.remEx(source);
                    }
                } else {
                    if (Prüfungwin() == false) {
                        me.remEx(source);
                    }
                }

            }

            if (Temp_Btn != null) {

                if (tab != null) {
                    if (Prüfungtab(Temp_Btn.getCaption()) == false) {
                        me.remEx(source);
                    }
                } else {
                    if (Prüfungwin() == false) {
                        me.remEx(source);
                    }
                }

            }

        }

        private boolean Prüfungtab(String Name) {
            int Count = tab.getComponentCount();

            for (int i = 0; i < Count; i++) {
                if (tab.getTab(i).getCaption() == Name) {

                    // tab.setSelectedTab(i);

                    return true;
                }

            }

            return false;
        }

        private boolean Prüfungwin() {
            boolean pr = false;

            for (Window ItemIda : UI.getCurrent().getWindows()) {
                // UserId = (int) result.getItem(ItemIda).getItemProperty(this.Spalte_ID).getValue;

                if (ItemIda.equals(win) == true) {
                    pr = true;
                }

                //
            }

            return pr;

        }

    }

    /******************************************/

    /******************************************************************************************/
    /***************************** ---> Configuration Funktionen<--- **************************************/

    /*********** Gen Menüs *************/
    private void Generate_Menüs() {
        Btn_Add = men_frm.addItem("FRM_ADD", Icons.White.add_16, cmd_btn_add);
        Btn_EDIT = men_frm.addItem("FRM_EDIT", Icons.White.edit_16, cmd_btn_edit);
        Btn_READ = men_frm.addItem("FRM_READ", Icons.White.perm_lesen_16, cmd_btn_read);
        Btn_DEL = men_frm.addItem("FRM_DEL", Icons.White.delete_16, cmd_btn_del);
        Btn_EXP = men_frm.addItem("FRM_EXPORT", Icons.White.log_16, null);
        Btn_EXP_excel = Btn_EXP.addItem("FRM_EXPORT_EXCEL", Icons.White.excel_export_16, cmd_btn_export_excel);
        Btn_EXP_csv = Btn_EXP.addItem("FRM_EXPORT_CSV", Icons.White.excel_16, cmd_btn_export_csv);
        Btn_FT = men_frm.addItem("FRM_FILTER", Icons.White.filter_16, cmd_btn_filter);
    }

    /********************************/
    /*********** Tabelle Datenholen *************/

    private Container Get_Data_Container() {
        try {
            DBClass db = new DBClass();

            /************ Set Spalten *************/
            db.DB_Data_Get.DB_Spalten.Standard.DB_set_Spalten_Einzeln("AUL_ID");
            db.DB_Data_Get.DB_Spalten.Standard.DB_set_Spalten_Einzeln("AUL_USERNAME", "'Benutzername'");
            db.DB_Data_Get.DB_Spalten.Standard.DB_set_Spalten_Einzeln("ASA_NAME", "'Anrede'");
            db.DB_Data_Get.DB_Spalten.Standard.DB_set_Spalten_Einzeln("AUL_NAME", "'Name'");
            db.DB_Data_Get.DB_Spalten.Standard.DB_set_Spalten_Einzeln("AUL_VORNAME", "'Vorname'");
            db.DB_Data_Get.DB_Spalten.Standard.DB_set_Spalten_Einzeln("AUL_TEL", "'Telefon'");
            db.DB_Data_Get.DB_Spalten.Standard.DB_set_Spalten_Einzeln("AUL_EMAIL", "'Email'");
            db.DB_Data_Get.DB_Spalten.Standard.DB_set_Spalten_Einzeln("IF(AUL_AKTIV = '1','Ja','Nein')", "'Status Aktiv'");
            db.DB_Data_Get.DB_Spalten.Standard.DB_set_Spalten_Einzeln("IF(AUL_PASS_RESET = '1','Ja','Nein')", "'Passwort Ändern bei Anmeldung'");
            /**************************************/
            /************ Set Tabelle *************/
            db.DB_Data_Get.DB_Tabellen.DB_set_Tabelle_Verknüpfung("cms_auth_stammdaten_user", "INNER JOIN", "cms_auth_stammdaten_anrede", "AUL_ANREDE_ID", "ASA_ID");
            db.DB_Data_Get.DB_Tabellen.DB_set_Tabelle_Verknüpfung("cms_auth_stammdaten_user", "INNER JOIN", "cms_auth_liste_gu", "AUL_ID", "AL_U_ID");
            /**************************************/
            /************ Set Filter *************/
            db.DB_Data_Get.DB_Filter.DB_WHERE_Allgemein("cms_auth_liste_gu", "AL_G_ID", "=", F_ID, "");
            /**************************************/
            /************ Set Custom *************/

            /**************************************/

            return db.DB_Data_Get.DB_SEND_AND_GET_Container();
        } catch (Exception e) {
            // TODO Automatisch generierter Erfassungsblock
            System.out.println("Fehler Beim Datenholen");
            return null;
        }

    }

    private void Datenholen_force() {
        Container con = Get_Data_Container();

        if (con.size() > 0) {
            tbl_frm.setContainerDataSource(con);
        } else {
            tbl_frm.removeAllItems();

        }
    }

    private void Datenholen() {
        Container con = Get_Data_Container();

        if (con.size() > 0) {

            if (cont_Momentan != null) {
                if (Prüfengleichheit(con) == true) {

                    return;
                } else {
                    if (tbl_frm.isFilterBarVisible() == true) {

                        ArrayBuilder_Mehrfach arb;
                        for (Object propid : con.getContainerPropertyIds()) {

                            arb = new ArrayBuilder_Mehrfach(Filter, 2);
                            Filter = arb.Array_Holen_Object();

                            Filter[Filter.length - 1][0] = propid;
                            Filter[Filter.length - 1][1] = tbl_frm.getFilterFieldValue(propid);
                        }
                    }

                }
            }

            tbl_frm.setContainerDataSource(con);

            cont_Momentan = Get_Data_Container();
            tbl_frm.setColumnFooter("Passwort Ändern bei Anmeldung", "Insgesamt : " + tbl_frm.size() + " Benutzer");

            tbl_frm.setVisibleColumns(new Object[] { "Benutzername", "Anrede", "Name", "Vorname", "Telefon", "Email", "Status Aktiv", "Passwort Ändern bei Anmeldung" });

            if (Filter != null) {
                for (int i = 0; i < Filter.length; i++) {
                    tbl_frm.setFilterFieldValue(Filter[i][0], Filter[i][1]);

                }

                Filter = null;

            }

        } else {
            tbl_frm.removeAllItems();

        }
    }

    private boolean Prüfengleichheit(Container con) {

        boolean gl = true;

        for (Object ItemIda : con.getItemIds()) {
            // UserId = (int) result.getItem(ItemIda).getItemProperty(this.Spalte_ID).getValue;
            //

            for (Object propid : con.getContainerPropertyIds()) {

                try {
                    if (con.getItem(ItemIda).getItemProperty(propid).getValue().equals(cont_Momentan.getItem(ItemIda).getItemProperty(propid).getValue()) == false) {
                        gl = false;
                    }
                } catch (Exception e) {
                    // TODO Automatisch generierter Erfassungsblock
                    gl = false;
                }

            }

        }

        return gl;

    }

    /*************************** Datenlöschen ********************/

    private void Del(int ID) {

        DBClass db = new DBClass();
        db.DB_Data_Delete.DB_Tabellen.DB_set_Tabelle_Einzeln("cms_auth_stammdaten_user");
        db.DB_Data_Delete.DB_Filter.DB_WHERE_Allgemein("cms_auth_stammdaten_user", "AUL_ID", "=", ID + "", "");
        db.DB_Data_Delete.DB_Delete();

        I18nManager.global(I18nGlobalNotifiers.entry_deleted);

        Datenholen_force();

    }

    private void Edit(int ID) {

    }

    private void Insert() {

    }

    /*************************** Config TBL ********************/
    private void Config_TBL() {
        tbl_frm.setSelectable(true);
        tbl_frm.setFilterOnDemand(false);
        tbl_frm.setImmediate(true);
        tbl_frm.setFilterDecorator(new Decorator_benutzerverwaltung());
        // tbl_arzt.setFilterDecorator(new FilterDecorator_Krankenschwesterverwaltung());
        tbl_frm.setColumnCollapsingAllowed(false);
        // tbl_arzt.setFilterBarVisible(true);
        tbl_frm.setFooterVisible(true);
    }

    @AutoGenerated
    private HorizontalLayout buildMainLayout() {
        // common part: create layout
        mainLayout = new HorizontalLayout();
        mainLayout.setImmediate(false);
        mainLayout.setWidth("100%");
        mainLayout.setHeight("100%");
        mainLayout.setMargin(false);

        // top-level component properties
        setWidth("100.0%");
        setHeight("100.0%");

        // horizontalLayout_2
        horizontalLayout_2 = new HorizontalLayout();
        horizontalLayout_2.setImmediate(false);
        horizontalLayout_2.setWidth("100.0%");
        horizontalLayout_2.setHeight("100.0%");
        horizontalLayout_2.setMargin(false);
        mainLayout.addComponent(horizontalLayout_2);
        mainLayout.setExpandRatio(horizontalLayout_2, 1.0f);

        // verticalLayout_2
        verticalLayout_2 = buildVerticalLayout_2();
        mainLayout.addComponent(verticalLayout_2);
        mainLayout.setExpandRatio(verticalLayout_2, 10.0f);
        mainLayout.setComponentAlignment(verticalLayout_2, new Alignment(20));

        // horizontalLayout_1
        horizontalLayout_1 = new HorizontalLayout();
        horizontalLayout_1.setImmediate(false);
        horizontalLayout_1.setWidth("100.0%");
        horizontalLayout_1.setHeight("100.0%");
        horizontalLayout_1.setMargin(false);
        mainLayout.addComponent(horizontalLayout_1);
        mainLayout.setExpandRatio(horizontalLayout_1, 1.0f);

        return mainLayout;
    }

    @AutoGenerated
    private VerticalLayout buildVerticalLayout_2() {
        // common part: create layout
        verticalLayout_2 = new VerticalLayout();
        verticalLayout_2.setImmediate(false);
        verticalLayout_2.setWidth("100.0%");
        verticalLayout_2.setHeight("100.0%");
        verticalLayout_2.setMargin(false);

        // men_frm
        men_frm = new MenuBar();
        men_frm.setImmediate(false);
        men_frm.setWidth("100.0%");
        men_frm.setHeight("-1px");
        verticalLayout_2.addComponent(men_frm);
        verticalLayout_2.setExpandRatio(men_frm, 1.0f);
        verticalLayout_2.setComponentAlignment(men_frm, new Alignment(48));

        // tbl_frm
        tbl_frm = new FilterTable();
        tbl_frm.setImmediate(false);
        tbl_frm.setWidth("100.0%");
        tbl_frm.setHeight("90.0%");
        verticalLayout_2.addComponent(tbl_frm);
        verticalLayout_2.setExpandRatio(tbl_frm, 10.0f);
        verticalLayout_2.setComponentAlignment(tbl_frm, new Alignment(20));

        return verticalLayout_2;
    }
}
