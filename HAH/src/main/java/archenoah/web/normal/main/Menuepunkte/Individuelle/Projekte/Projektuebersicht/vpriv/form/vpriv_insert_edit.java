package archenoah.web.normal.main.Menuepunkte.Individuelle.Projekte.Projektuebersicht.vpriv.form;

import java.util.ArrayList;
import java.util.Date;
import java.util.HashMap;
import java.util.Iterator;
import java.util.List;
import java.util.Locale;
import java.util.Map;
import java.util.Map.Entry;

import archenoah.config.CMS_Config_Std;
import archenoah.lib.custom.MyUtils;
import archenoah.lib.tool.comunication.dbclass.DBClass;
import archenoah.lib.tool.comunication.dbclass.DBClass.CustomQuery;
import archenoah.lib.vaadin.Components.Combo.combo;
import archenoah.lib.vaadin.Components.Combo.nativecombo;
import archenoah.lib.vaadin.Components.Steppers.IntStepper;
import archenoah.lib.vaadin.Components.Validators.RegexValidator;
import archenoah.lib.vaadin.Components.Window_Tab_Generierer.Build_Tab_Menue_Item;
import archenoah.lib.vaadin.Components.Window_Tab_Generierer.Build_Window_Button;
import archenoah.lib.vaadin.Forms_Builder.Form_Bind;
import archenoah.lib.vaadin.Language.i18n.I18nCB;
import archenoah.lib.vaadin.Language.i18n.I18nConverter;
import archenoah.lib.vaadin.Language.i18n.I18nGlobalNotifiers;
import archenoah.lib.vaadin.Language.i18n.I18nManager;
import archenoah.lib.vaadin.MenuBerechtigung.Rechteholen;
import archenoah.lib.vaadin.resources.Icons;
import archenoah.lib.vaadin.valchecker.val_checker4;
import archenoah.web.normal.main.Menuepunkte.Individuelle.Projekte.Prescriptions.PrescriptionManager.classes.StockPatientBalance;
import archenoah.web.normal.main.Menuepunkte.Individuelle.Projekte.Projektuebersicht.classes.InfusionProductSource;
import archenoah.web.normal.main.Menuepunkte.Individuelle.Projekte.Projektuebersicht.classes.ProjectLimits;
import archenoah.web.normal.main.Menuepunkte.Individuelle.Projekte.Projektuebersicht.classes.ProjectNurseCombos;
import archenoah.web.normal.main.Menuepunkte.Individuelle.Projekte.Projektzuweisung.Form.ProjektzuweisungDataView;
import archenoah.web.normal.main.Menuepunkte.Individuelle.Projekte.tools.form_Berrechnen_Strecke;
import archenoah.web.normal.main.Menuepunkte.Individuelle.Stammdaten.Krankenschwesternverwaltung.forms.form_nurse_insert_edit;
import archenoah.web.normal.main.Menuepunkte.Individuelle.Stammdaten.Patientenverwaltung.Form.form_patient_insert_edit;

import com.google.gwt.thirdparty.guava.common.collect.MapDifference;
import com.google.gwt.thirdparty.guava.common.collect.Maps;
import com.mysql.jdbc.StringUtils;
import com.vaadin.annotations.AutoGenerated;
import com.vaadin.data.Container;
import com.vaadin.data.Item;
import com.vaadin.data.Property;
import com.vaadin.data.Property.ValueChangeEvent;
import com.vaadin.data.Property.ValueChangeListener;
import com.vaadin.data.Validator;
import com.vaadin.event.FieldEvents.BlurEvent;
import com.vaadin.event.FieldEvents.BlurListener;
import com.vaadin.event.FieldEvents.FocusEvent;
import com.vaadin.event.FieldEvents.FocusListener;
import com.vaadin.server.Page;
import com.vaadin.server.ThemeResource;
import com.vaadin.shared.ui.combobox.FilteringMode;
import com.vaadin.shared.ui.datefield.Resolution;
import com.vaadin.ui.AbsoluteLayout;
import com.vaadin.ui.AbstractField;
import com.vaadin.ui.AbstractSelect;
import com.vaadin.ui.Alignment;
import com.vaadin.ui.Button;
import com.vaadin.ui.Button.ClickEvent;
import com.vaadin.ui.Button.ClickListener;
import com.vaadin.ui.CheckBox;
import com.vaadin.ui.ComboBox;
import com.vaadin.ui.CustomComponent;
import com.vaadin.ui.GridLayout;
import com.vaadin.ui.HorizontalLayout;
import com.vaadin.ui.Label;
import com.vaadin.ui.ListSelect;
import com.vaadin.ui.MenuBar.MenuItem;
import com.vaadin.ui.NativeSelect;
import com.vaadin.ui.Notification;
import com.vaadin.ui.Notification.Type;
import com.vaadin.ui.Panel;
import com.vaadin.ui.PopupDateField;
import com.vaadin.ui.TabSheet;
import com.vaadin.ui.TextArea;
import com.vaadin.ui.TextField;
import com.vaadin.ui.UI;
import com.vaadin.ui.VerticalLayout;
import com.vaadin.ui.Window;
import com.vaadin.ui.Window.CloseEvent;
import com.vaadin.ui.Window.CloseListener;

public class vpriv_insert_edit extends CustomComponent {

    /*- VaadinEditorProperties={"grid":"RegularGrid,20","showGrid":true,"snapToGrid":true,"snapToObject":true,"movingGuides":false,"snappingDistance":10} */

    @AutoGenerated
    private VerticalLayout mainLayout;

    @AutoGenerated
    private AbsoluteLayout al_passive_fields;

    @AutoGenerated
    private IntStepper fieldBalanceWasRemoved;

    @AutoGenerated
    private AbsoluteLayout al_localization_labels;

    @AutoGenerated
    private Label lbl_yes;

    @AutoGenerated
    private Label lbl_no;

    @AutoGenerated
    private HorizontalLayout horizontalLayout_4;

    @AutoGenerated
    private Button btn_save;

    @AutoGenerated
    private HorizontalLayout horizontalLayout_3;

    @AutoGenerated
    private TabSheet pan_BesD;

    @AutoGenerated
    private VerticalLayout vl_comments;

    @AutoGenerated
    private TextArea txta_bemerkungen;

    @AutoGenerated
    private TextArea txta_beobachtungen;

    @AutoGenerated
    private VerticalLayout vl_events;

    @AutoGenerated
    private HorizontalLayout horizontalLayout_27;

    @AutoGenerated
    private ComboBox cbx_correlation;

    @AutoGenerated
    private Label lbl_correlation;

    @AutoGenerated
    private NativeSelect ns_reaction_caused_by_vpriv;

    @AutoGenerated
    private Label lbl_reaction_caused_by_vpriv;

    @AutoGenerated
    private HorizontalLayout horizontalLayout_21;

    @AutoGenerated
    private TextArea ta_reaction_recent_desc;

    @AutoGenerated
    private VerticalLayout verticalLayout_17;

    @AutoGenerated
    private ComboBox cbx_reaction_recent_intensity;

    @AutoGenerated
    private NativeSelect ns_reaction_recent;

    @AutoGenerated
    private Label lbl_reaction_recent;

    @AutoGenerated
    private HorizontalLayout horizontalLayout_18;

    @AutoGenerated
    private TextArea ta_reaction_today_desc;

    @AutoGenerated
    private VerticalLayout verticalLayout_15;

    @AutoGenerated
    private ComboBox cbx_reaction_today_intensity;

    @AutoGenerated
    private NativeSelect ns_reaction_today;

    @AutoGenerated
    private Label lbl_reaction_today;

    @AutoGenerated
    private GridLayout gl_vitals;

    @AutoGenerated
    private TextArea ta_vitals_temp;

    @AutoGenerated
    private TextField txt_vitals_temp_reaction;

    @AutoGenerated
    private TextField txt_vitals_temp_end;

    @AutoGenerated
    private TextField txt_vitals_temp_start;

    @AutoGenerated
    private Label lbl_vitals_temp;

    @AutoGenerated
    private TextArea ta_vitals_pulse;

    @AutoGenerated
    private TextField txt_vitals_pulse_reaction;

    @AutoGenerated
    private TextField txt_vitals_pulse_end;

    @AutoGenerated
    private TextField txt_vitals_pulse_start;

    @AutoGenerated
    private Label lbl_vitals_pulse;

    @AutoGenerated
    private TextArea ta_vitals_mad;

    @AutoGenerated
    private TextField txt_vitals_mad_reaction;

    @AutoGenerated
    private TextField txt_vitals_mad_end;

    @AutoGenerated
    private TextField txt_vitals_mad_start;

    @AutoGenerated
    private VerticalLayout verticalLayout_14;

    @AutoGenerated
    private Label lbl_vitals_avg_units;

    @AutoGenerated
    private Label lbl_vitals_avg;

    @AutoGenerated
    private TextArea ta_vitals_pressure;

    @AutoGenerated
    private TextField txt_vitals_pressure_reaction;

    @AutoGenerated
    private TextField txt_vitals_pressure_end;

    @AutoGenerated
    private TextField txt_vitals_pressure_start;

    @AutoGenerated
    private VerticalLayout verticalLayout_13;

    @AutoGenerated
    private Label lbl_vitals_pressure_units;

    @AutoGenerated
    private Label lbl_vitals_pressure;

    @AutoGenerated
    private TextField txt_vitals_time_reaction;

    @AutoGenerated
    private TextField txt_vitals_time_end;

    @AutoGenerated
    private TextField txt_vitals_time_start;

    @AutoGenerated
    private Label lbl_vitals_time;

    @AutoGenerated
    private Label lbl_vitals_comments;

    @AutoGenerated
    private Label lbl_vitals_reaction;

    @AutoGenerated
    private Label lbl_vitals_end;

    @AutoGenerated
    private Label lbl_vitals_start;

    @AutoGenerated
    private Label lbl_vitals_param;

    @AutoGenerated
    private VerticalLayout vl_inf;

    @AutoGenerated
    private HorizontalLayout hl_inf_numbers;

    @AutoGenerated
    private HorizontalLayout horizontalLayout_25;

    @AutoGenerated
    private HorizontalLayout horizontalLayout_26;

    @AutoGenerated
    private VerticalLayout verticalLayout_23;

    @AutoGenerated
    private Button btn_delete_charge;

    @AutoGenerated
    private ListSelect list_charges;

    @AutoGenerated
    private Button btn_add_charge;

    @AutoGenerated
    private HorizontalLayout horizontalLayout_16;

    @AutoGenerated
    private TextField txt_add_charge;

    @AutoGenerated
    private IntStepper int_chargeCount;

    @AutoGenerated
    private VerticalLayout verticalLayout_10;

    @AutoGenerated
    private VerticalLayout layout_puncture_rating;

    @AutoGenerated
    private TextArea txt_puncture_rating;

    @AutoGenerated
    private Label lbl_puncture;

    @AutoGenerated
    private VerticalLayout layout_puncture_placement;

    @AutoGenerated
    private GridLayout gridLayout_4;

    @AutoGenerated
    private VerticalLayout verticalLayout_18;

    @AutoGenerated
    private CheckBox cb_forearm_left;

    @AutoGenerated
    private CheckBox cb_forearm_right;

    @AutoGenerated
    private Label lbl_forearm;

    @AutoGenerated
    private VerticalLayout verticalLayout_12;

    @AutoGenerated
    private CheckBox cb_hand_left;

    @AutoGenerated
    private CheckBox cb_hand_right;

    @AutoGenerated
    private Label lbl_hand;

    @AutoGenerated
    private VerticalLayout verticalLayout_11;

    @AutoGenerated
    private CheckBox cb_ellbow_left;

    @AutoGenerated
    private CheckBox cb_ellbow_right;

    @AutoGenerated
    private Label lbl_ellbow;

    @AutoGenerated
    private Label lbl_spot;

    @AutoGenerated
    private VerticalLayout verticalLayout_22;

    @AutoGenerated
    private GridLayout gridLayout_3;

    @AutoGenerated
    private VerticalLayout layout_prescribed_dose;

    @AutoGenerated
    private TextField txt_prescribed_dose_reason;

    @AutoGenerated
    private NativeSelect ns_prescribed_dose;

    @AutoGenerated
    private Label lbl_prescribed_dose;

    @AutoGenerated
    private HorizontalLayout horizontalLayout_6;

    @AutoGenerated
    private Label lbl_inf_rate_unit;

    @AutoGenerated
    private TextField txt_inf_rate;

    @AutoGenerated
    private Label lbl_inf_rate;

    @AutoGenerated
    private HorizontalLayout horizontalLayout_12;

    @AutoGenerated
    private Button btn_inf_calc;

    @AutoGenerated
    private TextField txt_inf_total_duration;

    @AutoGenerated
    private Label lbl_inf_total_duration;

    @AutoGenerated
    private HorizontalLayout horizontalLayout_15;

    @AutoGenerated
    private TextField txt_inf_time_stop;

    @AutoGenerated
    private TextField txt_inf_time_start;

    @AutoGenerated
    private Label lbl_inf_times;

    @AutoGenerated
    private HorizontalLayout hl_rep_total;

    @AutoGenerated
    private HorizontalLayout hl_balance;

    @AutoGenerated
    private InfusionProductSource productSource;

    @AutoGenerated
    private Label lbl_adm_unit;

    @AutoGenerated
    private TextField txt_adm_vpriv_vol;

    @AutoGenerated
    private Label lbl_adm_vpriv_vol;

    @AutoGenerated
    private HorizontalLayout hl_repl;

    @AutoGenerated
    private Label lbl_amp;

    @AutoGenerated
    private TextField txt_adm_vpriv_amp;

    @AutoGenerated
    private Label lbl_units;

    @AutoGenerated
    private TextField txt_adm_vpriv_mg;

    @AutoGenerated
    private Label lbl_vpriv;

    @AutoGenerated
    private HorizontalLayout horizontalLayout_23;

    @AutoGenerated
    private TextField txt_port_block;

    @AutoGenerated
    private TextField txt_port_details;

    @AutoGenerated
    private HorizontalLayout horizontalLayout_24;

    @AutoGenerated
    private ComboBox cbx_needle;

    @AutoGenerated
    private TextField txt_spot_count;

    @AutoGenerated
    private VerticalLayout vl_preinfo;

    @AutoGenerated
    private HorizontalLayout horizontalLayout_20;

    @AutoGenerated
    private Panel panel_2;

    @AutoGenerated
    private VerticalLayout verticalLayout_21;

    @AutoGenerated
    private HorizontalLayout horizontalLayout_22;

    @AutoGenerated
    private VerticalLayout verticalLayout_20;

    @AutoGenerated
    private HorizontalLayout horizontalLayout_19;

    @AutoGenerated
    private TextField txt_remaining_nurse;

    @AutoGenerated
    private TextField txt_remaining_patient;

    @AutoGenerated
    private Label lbl_remaining;

    @AutoGenerated
    private Panel panel_1;

    @AutoGenerated
    private GridLayout gridLayout_1;

    @AutoGenerated
    private TextField txt_premed_3_time;

    @AutoGenerated
    private TextField txt_premed_3;

    @AutoGenerated
    private TextField txt_premed_2_time;

    @AutoGenerated
    private TextField txt_premed_2;

    @AutoGenerated
    private TextField txt_premed_1_time;

    @AutoGenerated
    private TextField txt_premed_1;

    @AutoGenerated
    private Label lbl_premedtime;

    @AutoGenerated
    private Label lbl_premed;

    @AutoGenerated
    private HorizontalLayout horizontalLayout_13;

    @AutoGenerated
    private VerticalLayout verticalLayout_7;

    @AutoGenerated
    private Label lbl_weight;

    @AutoGenerated
    private TextField txt_pat_weigth;

    @AutoGenerated
    private ComboBox cbx_type;

    @AutoGenerated
    private Panel pan_abrechnungsdaten;

    @AutoGenerated
    private VerticalLayout verticalLayout_5;

    @AutoGenerated
    private GridLayout gridLayout_2;

    @AutoGenerated
    private VerticalLayout verticalLayout_8;

    @AutoGenerated
    private CheckBox cb_parallel;

    @AutoGenerated
    private CheckBox cb_admin;

    @AutoGenerated
    private VerticalLayout vl_cs;

    @AutoGenerated
    private TextField txt_Abrechnungs_Km;

    @AutoGenerated
    private HorizontalLayout horizontalLayout_5;

    @AutoGenerated
    private NativeSelect ns_Abrechnung_Minuten;

    @AutoGenerated
    private NativeSelect ns_Abrechnung_Stunden;

    @AutoGenerated
    private Button btn_km_ber;

    @AutoGenerated
    private VerticalLayout vl_nurse;

    @AutoGenerated
    private TextField txt_Gesamte_Km;

    @AutoGenerated
    private HorizontalLayout horizontalLayout_10;

    @AutoGenerated
    private NativeSelect ns_min;

    @AutoGenerated
    private NativeSelect ns_Stunden;

    @AutoGenerated
    private HorizontalLayout horizontalLayout_2;

    @AutoGenerated
    private Panel pan_stammdaten;

    @AutoGenerated
    private HorizontalLayout horizontalLayout_1;

    @AutoGenerated
    private VerticalLayout verticalLayout_16;

    @AutoGenerated
    private HorizontalLayout horizontalLayout_17;

    @AutoGenerated
    private CheckBox cb_regionalmanager_ok;

    @AutoGenerated
    private HorizontalLayout horizontalLayout_14;

    @AutoGenerated
    private ComboBox cbx_arzt;

    @AutoGenerated
    private HorizontalLayout horizontalLayout_7;

    @AutoGenerated
    private NativeSelect ns_status;

    @AutoGenerated
    private VerticalLayout verticalLayout_3;

    @AutoGenerated
    private HorizontalLayout horizontalLayout_9;

    @AutoGenerated
    private ComboBox cb_nurse;

    @AutoGenerated
    private VerticalLayout verticalLayout_9;

    @AutoGenerated
    private Button btn_zuweisung;

    @AutoGenerated
    private VerticalLayout verticalLayout_6;

    @AutoGenerated
    private Button btn_nurse_info;

    @AutoGenerated
    private HorizontalLayout horizontalLayout_8;

    @AutoGenerated
    private ComboBox cb_pat;

    @AutoGenerated
    private TextField txt_initials;

    @AutoGenerated
    private VerticalLayout verticalLayout_ph;

    @AutoGenerated
    private Button button_1;

    @AutoGenerated
    private VerticalLayout verticalLayout_4;

    @AutoGenerated
    private Button btn_pat_info;

    @AutoGenerated
    private Panel pan_dat;

    @AutoGenerated
    private VerticalLayout verticalLayout_2;

    @AutoGenerated
    private HorizontalLayout horizontalLayout_11;

    @AutoGenerated
    private TextField txt_bis;

    @AutoGenerated
    private TextField txt_von;

    @AutoGenerated
    private PopupDateField pop_date;

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

    

	

	

	

	

	

	

	

    /**
     * The constructor should first build the main layout, set the composition
     * root and then do any custom initialization.
     * 
     * The constructor will not be automatically regenerated by the visual
     * editor.
     */

    /**************** --> Allgemein <--- ********************/
    // Allgemein
    private CMS_Config_Std std;
    private String Exportname;
    // Datenbank
    private Map<Object, String> DBMap;
    private Map<Object, String> ValidateMap;
    private DBClass db;
    private Form_Bind fb;
    private String Form_ID = "";
    private Item orderItem = null;
    // Berrechtigung
    private int ACC_ID;
    private int Lesen;
    private int Schreiben;
    private int Erstellen;
    private int Edit;
    private int Löschen;

    private MenuItem Temp_Menü = null;

    private Button Temp_Btn = null;
    /******************************************************/
    /**************** --> Tabsheetvars <--- *****************/
    private TabSheet tab = null;

    /******************************************************/
    /**************** --> Windowvars <--- *******************/
    private Window win = null;
    private boolean nurse = false;
    /******************************************************/
    /******************* --> Custom <--- ********************/
    /******************************************************/

    private Boolean regionalManager = false;
    
    private Validator balanceValidator;
    private Integer balanceOldCount;
    private Boolean balanceWasRemoved;
    
    private Boolean wasSaved = false;
    
    private String projectTable = "cust_protokoll_vpriv_daten";
    private String projectTableIdCol = "PRV_ID";
    private String projectId = "3";
            
    private Item dataSetItem;
    
    /************ ----->Einstellungen<-- ********************/
//    private final String LNG_FRM_ID = "402";
    private final String BER_MEN_ID = "401";
    private final String Windows_Height = "700px";
    private final String Windows_Width = "1000px";
    /******************************************************/

    private ProjectLimits limit;

    private I18nManager i18n;
    
    private final static class caption extends I18nCB {
        static final I18nCB missing_date = set();
    }
    
    public vpriv_insert_edit(MenuItem Arg_Menü, String Arg_Form_ID) {
        Temp_Menü = Arg_Menü;
        Form_ID = Arg_Form_ID;

        // TODO add user code here
    }

    public vpriv_insert_edit(Button Arg_btn, String Arg_Form_ID) {

        Temp_Btn = Arg_btn;
        Form_ID = Arg_Form_ID;

        // TODO add user code here
    }

    /***************************** ---> Feste Funtionen<--- **************************************/

    /********* INIT-Window ************/
    public void Init_Class_Window() {
        if (Windows_Height.equals("") == true || Windows_Width.equals("") == true) {
            System.out.println("Form Einstellung Fehlt: !!!");
            return;
        }

        Standard_Init();

        String fid = Form_ID;
        if (fid != "") {
            fid = " - #" + fid;
        }

        if (Temp_Menü != null) {
            String Recourcename = Temp_Menü.getIcon().toString();
            Recourcename = Recourcename.substring(0, Recourcename.length() - 12) + "white-16.png";

            Exportname = Temp_Menü.getText();
            Build_Window_Button bwb = new Build_Window_Button(Temp_Menü.getText() + fid, mainLayout, Windows_Height, Windows_Width, new ThemeResource(
                    Recourcename));
            win = bwb.ReturnWindow();
        }
        if (Temp_Btn != null) {
            Exportname = Temp_Btn.getCaption();
            Build_Window_Button bwb = new Build_Window_Button(Temp_Btn.getCaption() + fid, mainLayout, Windows_Height, Windows_Width, Temp_Btn.getIcon());
            win = bwb.ReturnWindow();
        }

    }
    
    public Window getWindow(){
    	return win;
    }
    
    public Boolean wasSaved() {
        return wasSaved;
    }

    public void setSaved(Boolean wasSaved) {
        this.wasSaved = wasSaved;
    }
    
    /********* INIT-Tray ************/
    public void Init_Class_Tab(TabSheet Arg_tab) {

        Standard_Init();
        tab = Arg_tab;
        if (Temp_Menü != null) {
            Exportname = Temp_Menü.getText();
            Build_Tab_Menue_Item bt = new Build_Tab_Menue_Item(Arg_tab, Temp_Menü.getText(), mainLayout, Temp_Menü.getIcon());
        }
        if (Temp_Btn != null) {
            Exportname = Temp_Btn.getCaption();
            Build_Tab_Menue_Item bt = new Build_Tab_Menue_Item(Arg_tab, Temp_Btn.getCaption(), mainLayout, Temp_Btn.getIcon());
        }

    }

    /********* Init-Standard ************/
    private void Standard_Init() {
        buildMainLayout();
        i18n = new I18nManager(this);
        
        std = CMS_Config_Std.getInstance();
        fb = new Form_Bind();
        
        fillLngType();
        fillIntensities();
        
        Set_DB_Map();

        Set_Validierer();
        Set_Validate_Map();
        Prüfung_Ist_Grp_Krankenschwestern();
        /********** Custom Fill Function *******************/
        Popup_nativeselect_minuten();
        Popup_nativeselect_Stunden();
        //Popup_nativeselect_Anzahl();
        fillArzt();
        Fill_cb_P_Patient();
        if (nurse == true && regionalManager == false) {
            Fill_ns_P_Status_Nurse();
            cb_nurse.setValue(Get_ID_Nurse());
//            cb_nurse.setReadOnly(true);
            txt_Abrechnungs_Km.setReadOnly(true);
            ns_Abrechnung_Stunden.setReadOnly(true);
            ns_Abrechnung_Minuten.setReadOnly(true);

            vl_cs.setVisible(false);

            btn_zuweisung.setVisible(false);
//            Fill_cb_P_Patient_nurse();

        } else {

//            txt_Gesamte_Km.setReadOnly(true);
//            ns_min.setReadOnly(true);
//            ns_Stunden.setReadOnly(true);
            Fill_ns_P_Status();
//            Fill_cb_P_Patient();
        }
        cb_nurse.setNullSelectionAllowed(false);
        cb_pat.setReadOnly(true);
        ns_status.setNullSelectionAllowed(false);
        cb_regionalmanager_ok.setEnabled(regionalManager);
        fillNurseCombo();
        fillArzt();
        Set_Status_Select_OnChange();

        fillNeedles(false);
        fillYesNoSelects();
        fillCorrelation();
        /***************************************************/

        if (Form_ID != "") {

            Forms_Fill();
            productSource.setType(cbx_type, 2);
            fillCharges();

            if (nurse == true) {
                if ((int) ns_status.getValue() == 3 && !regionalManager) {
                    Set_Berrechtigung_Custom(1, 0, 0, 0);

                }

            }

        } else {
            cb_admin.setValue(true);
            productSource.setValue(InfusionProductSource.internal);
        }

        fillNurseCombo(); // erneut aufrufen um entsprechend zu filtern
        fillNeedles(false); // legacy handling
        event();
        /********************** Components Setup *******************************/
        pop_date.setResolution(Resolution.DAY);
        pop_date.setImmediate(true);
        pop_date.addValidator(new Validator() {
            
            @Override
            public void validate(Object value) throws InvalidValueException {
                
                if(value == null) {
                    throw new InvalidValueException(i18n.get(caption.missing_date));
                }
                
            }
        });
        cb_pat.setImmediate(true);
        cbx_arzt.setFilteringMode(FilteringMode.CONTAINS);

        btn_zuweisung.setEnabled(cb_pat.getValue() != null ? true : false);
        list_charges.setNullSelectionAllowed(false);
//        txt_vitals_time_start.setReadOnly(true);
        txt_vitals_time_start.setImmediate(true);
//        txt_vitals_time_end.setReadOnly(true);
        txt_vitals_time_end.setImmediate(true);

        cb_nurse.setFilteringMode(FilteringMode.CONTAINS);
        cbx_type.setFilteringMode(FilteringMode.CONTAINS);
        cbx_type.setImmediate(true);

        int_chargeCount.setMinValue(1);
        int_chargeCount.setValue(1);
        list_charges.setItemCaptionPropertyId("display");
        cbx_needle.setImmediate(true);

        txt_port_details.setNullRepresentation("");
        txt_port_block.setNullRepresentation("");
        
        ns_prescribed_dose.setImmediate(true);
        togglePrescribedDoseReason();
        
        
        ns_status.setNullSelectionAllowed(false);
        /*********************************************************************/

        // win.addAction(new ClickShortcut(btn_save, KeyCode.ENTER));

        isCommentRequired();
        
        txt_initials.setStyleName("nogrey");
        txt_initials.setEnabled(false);
        getInitials();
        
        fillLimit();
        
        // migrated from database
        btn_inf_calc.setIcon(Icons.White.berechnen_16);
        btn_pat_info.setIcon(Icons.White.info_16);
        btn_km_ber.setIcon(Icons.White.berechnen_16);
        btn_save.setIcon(Icons.White.save_16);
        btn_nurse_info.setIcon(Icons.White.info_16);
        btn_inf_calc.setStyleName("button-image-only");
        btn_pat_info.setStyleName("button-image-only");
        btn_km_ber.setStyleName("button-image-only");
        btn_nurse_info.setStyleName("button-image-only");

        new RegexValidator(txt_inf_time_stop, "(([01]?[0-9]|2[0-3]):?[0-5][0-9])?", null, null, false);
        new RegexValidator(txt_inf_time_start, "(([01]?[0-9]|2[0-3]):?[0-5][0-9])?", null, null, false);
        new RegexValidator(txt_Abrechnungs_Km, "^\\d*$", null, null, false);
        new RegexValidator(txt_Gesamte_Km, "^\\d*$", null, null, false);
        new RegexValidator(txt_bis, "(([01]?[0-9]|2[0-3]):?[0-5][0-9])?", null, null, false);
        new RegexValidator(txt_von, "(([01]?[0-9]|2[0-3]):?[0-5][0-9])?", null, null, false);
        new RegexValidator(txt_pat_weigth, "([\\d]{2,3}[,.]?[\\d]{0,2})?", null, null, false);
        // migration end
        
        // hide admin
        cb_admin.setVisible(false);
    }

    private void fillLimit() {
        limit = new ProjectLimits("VPRIV", Form_ID, MyUtils.getValueFromItem(dataSetItem, "PVD_DELEGATION_ID", Integer.class));
        limit.setNurseSelect(cb_nurse);
        limit.setStatusSelect(ns_status);
        limit.setOriginalDate(MyUtils.getValueFromItem(dataSetItem, "PVD_ORIGINAL_DATE", Date.class));
        limit.limitDatePicker(pop_date);
    }
    
    /*********************************/

    /*************************** Events *******************************/

    @SuppressWarnings("serial")
    private void event() {

        cb_pat.addValueChangeListener(new Property.ValueChangeListener() {

            @Override
            public void valueChange(ValueChangeEvent event) {
                btn_zuweisung.setEnabled(cb_pat.getValue() != null ? true : false);
                fillNurseCombo();
                selectArzt();

            }
        });
        
        cbx_type.addValueChangeListener(new ValueChangeListener() {
            
            @Override
            public void valueChange(ValueChangeEvent event) {
                
                if(isCommentRequired()) {
                    Notification notifier = new Notification("", String.format("Abweichender Infusiontyp, bitte Feld %s ausfüllen!",  txta_beobachtungen.getCaption()),
                            Type.HUMANIZED_MESSAGE);
                    notifier.setDelayMsec(5000);
                    notifier.setIcon(null);
                    notifier.show(Page.getCurrent());
                }
            }
        });
        
        btn_save.addClickListener(new ClickListener() {

            @Override
            public void buttonClick(ClickEvent event) {
                // TODO Automatisch generierter Methodenstub

                if (Validate_Test() == false) {
                    I18nManager.global(I18nGlobalNotifiers.fields_empty);
                    return;
                }

                if (Form_ID.equals("") == true) {
                    Form_ID = Integer.toString(Forms_Insert());
                    updateCharges();
                } else {
                    updateCharges();
                    Forms_Update();
                }
                
                removeBalance();

                UI.getCurrent().getUI().removeWindow(win);
                setSaved(true);
                
            }

        });

        btn_km_ber.addClickListener(new ClickListener() {

            @Override
            public void buttonClick(ClickEvent event) {
                // TODO Automatisch generierter Methodenstub

                form_Berrechnen_Strecke fbs = new form_Berrechnen_Strecke(event.getButton());

                if (nurse == true) {
                    fbs.fieldDistance = txt_Gesamte_Km;
                    fbs.fieldMin = ns_min;
                    fbs.fieldHours = ns_Stunden;
                } else {
                    fbs.fieldDistance = txt_Abrechnungs_Km;
                    fbs.fieldMin = ns_Abrechnung_Minuten;
                    fbs.fieldHours = ns_Abrechnung_Stunden;
                }

                if (cb_nurse.getValue() != null) {
                    fbs.Init_Class_Window((Integer) cb_nurse.getValue());
                } else {
                    fbs.Init_Class_Window();
                }

                if (cb_pat.getValue() != null) {
                    fbs.Set_nach((int) cb_pat.getValue());
                }

            }
        });

        btn_pat_info.addClickListener(new ClickListener() {

            @Override
            public void buttonClick(ClickEvent event) {
                // TODO Automatisch generierter Methodenstub
                if (cb_pat.getValue() == null) {
                    I18nManager.global(I18nGlobalNotifiers.no_entry_selected);

                    return;
                }

                form_patient_insert_edit pie = new form_patient_insert_edit(event.getButton(), "" + cb_pat.getValue());
                pie.Init_Class_Window();
                if (nurse == true) {
                    pie.Set_Berrechtigung_Custom(1, 1, 1, 1);
                } else {
                    pie.Set_Berrechtigung_Custom(1, 1, 1, 1);
                }

            }
        });

        btn_nurse_info.addClickListener(new ClickListener() {

            @Override
            public void buttonClick(ClickEvent event) {
                // TODO Automatisch generierter Methodenstub
                if (cb_nurse.getValue() == null) {
                    I18nManager.global(I18nGlobalNotifiers.no_entry_selected);

                    return;
                }

                form_nurse_insert_edit pie = new form_nurse_insert_edit(event.getButton(), "" + cb_nurse.getValue());
                pie.Init_Class_Window();
                pie.Set_Berrechtigung_Custom(1, 0, 0, 0);
            }
        });

        btn_zuweisung.addClickListener(new ClickListener() {

            @Override
            public void buttonClick(ClickEvent event) {
            	ProjektzuweisungDataView pz = new ProjektzuweisungDataView(event.getButton());
                pz.setFilteredInit("2", Integer.toString((int) cb_pat.getValue()));
                
                pz.setPermissionsFromDatabase();
                pz.init();
                Window popupDV = pz.getWindow();
                
                popupDV.addCloseListener(new CloseListener() {

                    @Override
                    public void windowClose(CloseEvent e) {
                        fillNurseCombo();
                    }
                });
            }
        });

        cbx_arzt.addFocusListener(new FocusListener() {

            @Override
            public void focus(FocusEvent event) {

                fillArzt();

            }
        });

        btn_inf_calc.addClickListener(new ClickListener() {

            @Override
            public void buttonClick(ClickEvent event) {

                calcInf(true);

            }
        });

        btn_add_charge.addClickListener(new ClickListener() {

            @Override
            public void buttonClick(ClickEvent event) {

                String charge = txt_add_charge.getValue().trim();
                Container cs = list_charges.getContainerDataSource();

                if (charge.length() > 0) {

                    if (cs.getContainerPropertyIds().size() == 0) {

                        cs.addContainerProperty("PVC_ID", Integer.class, 0);
                        cs.addContainerProperty("PVC_PVD_ID", Integer.class, 0);
                        cs.addContainerProperty("PVC_COUNT", Integer.class, 0);
                        cs.addContainerProperty("PVC_NR", String.class, 0);
                        cs.addContainerProperty("display", String.class, 0);

                    }

                    for (Object o : cs.getItemIds()) {
                        if (cs.getContainerProperty(o, "PVC_NR").getValue().equals(charge)) {
                            // charge existiert bereits
                            return;
                        }
                    }

                    Item item = cs.getItem(list_charges.getContainerDataSource().addItem());

                    if (!StringUtils.isNullOrEmpty(Form_ID)) {
                        item.getItemProperty("PVC_PVD_ID").setValue(Integer.parseInt(Form_ID));
                    }

                    item.getItemProperty("display").setValue(int_chargeCount.getValue() + "x " + charge);
                    item.getItemProperty("PVC_COUNT").setValue(int_chargeCount.getValue());
                    item.getItemProperty("PVC_NR").setValue(charge);

                }

            }
        });

        btn_delete_charge.addClickListener(new ClickListener() {

            @Override
            public void buttonClick(ClickEvent event) {

                Object id = list_charges.getValue();

                if (id != null) {
                    list_charges.removeItem(id);
                }

            }
        });

        BlurListener calcInf = new BlurListener() {

            @Override
            public void blur(BlurEvent event) {

                calcInf(false);

            }
        };

        txt_inf_time_start.addBlurListener(calcInf);
        txt_inf_time_stop.addBlurListener(calcInf);

        txt_inf_time_start.addBlurListener(new BlurListener() {
            @Override
            public void blur(BlurEvent event) {
                
                if(txt_vitals_time_start.getValue() == null || txt_vitals_time_start.getValue().equals("")){
                    txt_vitals_time_start.setValue(txt_inf_time_start.getValue());
                }
                
            }
        });

        txt_inf_time_stop.addBlurListener(new BlurListener() {
            @Override
            public void blur(BlurEvent event) {
                
                if(txt_vitals_time_end.getValue() == null || txt_vitals_time_end.getValue().equals("")){
                    txt_vitals_time_end.setValue(txt_inf_time_stop.getValue());
                }
                
            }
        });

        
        ns_prescribed_dose.addValueChangeListener(new ValueChangeListener() {
            
            @Override
            public void valueChange(ValueChangeEvent event) {
                
                togglePrescribedDoseReason();
                
            }
        });
    }
    
    private Boolean isCommentRequired() {
        
        Boolean required = false;
        
        if(cbx_type.getValue() != null) {
            required = (Boolean) cbx_type.getContainerProperty(cbx_type.getValue(), "COMMENT_REQUIRED").getValue();
        }
        
        txta_beobachtungen.setRequired(required);
        
        return required;
    }
    
    private void togglePrescribedDoseReason(){
        Boolean isEnabled = MyUtils.equalsWithNulls(ns_prescribed_dose.getValue(), 0);
        
        
        txt_prescribed_dose_reason.setEnabled(isEnabled);
        if(!isEnabled){
            txt_prescribed_dose_reason.setValue(null);
        }
        
        
        
    }
    
    
    /******************************************************************/


    
    private void selectArzt() {
        fillArzt();
        try {
            cbx_arzt.select(Integer.parseInt(Get_A_ID()));
        } catch (Exception e) {
            cbx_arzt.removeAllItems();
        }

    }

    private void calcInf(boolean replace) {

        if (!txt_inf_time_start.isValid() || !txt_inf_time_stop.isValid() || !txt_adm_vpriv_vol.isValid()) {
            return;
        }

        String start = txt_inf_time_start.getValue();
        String stop = txt_inf_time_stop.getValue();

        start = (start != null) ? start : "";
        stop = (stop != null) ? stop : "";
        
        String vdur = txt_inf_total_duration.getValue();
        String vrate = txt_inf_rate.getValue();
        String vvol = txt_adm_vpriv_vol.getValue();
        
        vdur = (vdur != null) ? vdur : "";
        vrate = (vrate != null) ? vrate : "";
        vvol = (vvol != null) ? vvol : "";
        
        vvol = vvol.replace(',', '.');

        Boolean idur = (vdur.length() != 0);
        Boolean irate = (vrate.length() != 0);
        Float ivol = (vvol.length() != 0) ? Float.parseFloat(vvol) : null;

        if (start.length() != 0 && stop.length() != 0) {
            Integer dur = calculateDuration(start, stop);

            // System.out.println("dur " + dur);
            // System.out.println("idur " + idur);

            if (replace == true || idur == false) {
                txt_inf_total_duration.setValue(formatDuration(dur));
            }

            // System.out.println("irate " + irate);
            // System.out.println("ivol " + ivol);

            if ((replace == true && ivol != null) || (irate == false && ivol != null)) {

                Float rate = calculateRate(ivol, dur);

                txt_inf_rate.setValue(formatRate(rate));

            }
        }
    }

    /************************ --> Berrechtigung <-- **************************/

    public void Set_Berrechtigung_Database() {
        if (BER_MEN_ID == "") {
            System.out.println("Form Einstellung Fehlt: !!!");
            return;
        }

        ACC_ID = (int) UI.getCurrent().getSession().getSession().getAttribute("Userid");
        Rechteholen r = new Rechteholen(ACC_ID + "");
        String[][] Asan = r.Datenholen();

        for (int i = 0; i < Asan.length; i++) {
            if (Asan[i][0].equals(BER_MEN_ID) == true) {

                Lesen = Integer.valueOf(Asan[i][3]);

                Schreiben = Integer.valueOf(Asan[i][4]);
                Erstellen = Integer.valueOf(Asan[i][6]);
                Löschen = Integer.valueOf(Asan[i][5]);
            }
        }
    }

    public void Set_Berrechtigung_Custom(int Arg_Lesen, int Arg_Erstellen, int Arg_Bearbeiten, int Arg_Loeschen) {
        Lesen = Arg_Lesen;
        Schreiben = Arg_Erstellen;
        Erstellen = Arg_Erstellen;
        Edit = Arg_Bearbeiten;
        Löschen = Arg_Loeschen;

        if (!(Erstellen == 1 || Edit == 1)) {
            btn_save.setEnabled(false);

        }
    }

    public void setRegionalManagerEnabled(Boolean enabled){
        regionalManager = enabled;
    }
    
    /**********************************************************************/

    /************************** Einstellen **************************************/

    /******************** Database *****************/
    private void Set_DB_Map() {
        String projectTable = this.projectTable + ":";
        
        DBMap = new HashMap<>();
        DBMap.put(pop_date, projectTable + "PVD_DATE");

        DBMap.put(txt_von, projectTable + "PVD_VON");
        DBMap.put(txt_bis, projectTable + "PVD_BIS");

        DBMap.put(cb_pat, projectTable + "PVD_P_ID");
        DBMap.put(cb_nurse, projectTable + "PVD_K_ID");
        DBMap.put(cbx_arzt, projectTable + "PVD_ARZT_ID");
        DBMap.put(ns_status, projectTable + "PVD_STATUS");
        
        DBMap.put(cb_regionalmanager_ok, projectTable + "PVD_REGIONAL_MANAGER_OK");

        DBMap.put(ns_Stunden, projectTable + "PVD_FAHRTZEIT_STD_N");
        DBMap.put(ns_min, projectTable + "PVD_FAHRTZEIT_MIN_N");
        //DBMap.put(ns_anrufe, projectTable + "PVD_ANRUFE");
        DBMap.put(ns_Abrechnung_Minuten, projectTable + "PVD_FAHRTZEIT_MIN");
        DBMap.put(ns_Abrechnung_Stunden, projectTable + "PVD_FAHRTZEIT_STD");
        DBMap.put(txt_Abrechnungs_Km, projectTable + "PVD_GES_KM");
        DBMap.put(txt_Gesamte_Km, projectTable + "PVD_GES_KM_N");
        DBMap.put(cb_admin, projectTable + "PVD_ADMINPAUSCHALE");
        DBMap.put(cb_parallel, projectTable + "PVD_PARALLEL");

        DBMap.put(cbx_type, projectTable + "PVD_INFUSIONSTYP");

        DBMap.put(txt_pat_weigth, projectTable + "PVD_GEW");
        DBMap.put(txt_premed_1, projectTable + "PVD_PRAE_MED_N_1");
        DBMap.put(txt_premed_1_time, projectTable + "PVD_PRAE_MED_Z_1");
        DBMap.put(txt_premed_2, projectTable + "PVD_PRAE_MED_N_2");
        DBMap.put(txt_premed_2_time, projectTable + "PVD_PRAE_MED_Z_2");
        DBMap.put(txt_premed_3, projectTable + "PVD_PRAE_MED_N_3");
        DBMap.put(txt_premed_3_time, projectTable + "PVD_PRAE_MED_Z_3");
        DBMap.put(cb_ellbow_right, projectTable + "PVD_PUNKT_ORT_E_R");
        DBMap.put(cb_ellbow_left, projectTable + "PVD_PUNKT_ORT_E_L");
        DBMap.put(cb_hand_right, projectTable + "PVD_PUNKT_ORT_H_R");
        DBMap.put(cb_hand_left, projectTable + "PVD_PUNKT_ORT_H_L");
        DBMap.put(cb_forearm_right, projectTable + "PVD_PUNKT_ORT_U_R");
        DBMap.put(cb_forearm_left, projectTable + "PVD_PUNKT_ORT_U_L");
        DBMap.put(txt_spot_count, projectTable + "PVD_PUNKT_VERS");
        DBMap.put(cbx_needle, projectTable + "PVD_PUNKT_NADEL");
        DBMap.put(txt_adm_vpriv_mg, projectTable + "PVD_DOSIERUNG");
        DBMap.put(txt_adm_vpriv_amp, projectTable + "PVD_DOSIERUNG_AMP");
        DBMap.put(txt_adm_vpriv_vol, projectTable + "PVD_INFUSIONS_VOL");

        DBMap.put(txt_inf_time_start, projectTable + "PVD_INFUSION_START");
        DBMap.put(txt_inf_time_stop, projectTable + "PVD_INFUSION_STOP");
        DBMap.put(txt_inf_rate, projectTable + "PVD_INFUSION_RATE");
        DBMap.put(txt_inf_total_duration, projectTable + "PVD_GESAMT_INFUSION_DAUER");

        DBMap.put(txt_vitals_time_start, projectTable + "PVD_VZ_START_UHRZEIT");
        DBMap.put(txt_vitals_pressure_start, projectTable + "PVD_VZ_START_DRUCK");
        DBMap.put(txt_vitals_mad_start, projectTable + "PVD_VZ_START_MAD");
        DBMap.put(txt_vitals_pulse_start, projectTable + "PVD_VZ_START_PULS");
        DBMap.put(txt_vitals_temp_start, projectTable + "PVD_VZ_START_TEMP");
        // DBMap.put(ta, projectTable + "PVD_VZ_START_KOMMENTAR");
        DBMap.put(txt_vitals_time_end, projectTable + "PVD_VZ_ENDE_UHRZEIT");
        DBMap.put(txt_vitals_pressure_end, projectTable + "PVD_VZ_ENDE_DRUCK");
        DBMap.put(txt_vitals_mad_end, projectTable + "PVD_VZ_ENDE_MAD");
        DBMap.put(txt_vitals_pulse_end, projectTable + "PVD_VZ_ENDE_PULS");
        DBMap.put(txt_vitals_temp_end, projectTable + "PVD_VZ_ENDE_TEMP");
        // DBMap.put(ta, projectTable + "PVD_VZ_ENDE_KOMMENTAR");
        DBMap.put(txt_vitals_time_reaction, projectTable + "PVD_VZ_REAKT_UHRZEIT");
        DBMap.put(txt_vitals_pressure_reaction, projectTable + "PVD_VZ_REAKT_DRUCK");
        DBMap.put(txt_vitals_mad_reaction, projectTable + "PVD_VZ_REAKT_MAD");
        DBMap.put(txt_vitals_pulse_reaction, projectTable + "PVD_VZ_REAKT_PULS");
        DBMap.put(txt_vitals_temp_reaction, projectTable + "PVD_VZ_REAKT_TEMP");

        DBMap.put(ta_vitals_pressure, projectTable + "PVD_VZ_DRUCK_KOMMENTAR");
        DBMap.put(ta_vitals_mad, projectTable + "PVD_VZ_MAD_KOMMENTAR");
        DBMap.put(ta_vitals_pulse, projectTable + "PVD_VZ_PULS_KOMMENTAR");
        DBMap.put(ta_vitals_temp, projectTable + "PVD_VZ_TEMP_KOMMENTAR");

        DBMap.put(ns_reaction_today, projectTable + "PVD_INFUSIONS_REAKTION_HEUTE");
        DBMap.put(ns_reaction_recent, projectTable + "PVD_INFUSIONS_REAKTION_VERG");
//        DBMap.put(txt_reaction_today_intensitiy, projectTable + "PVD_INFUSIONS_REAKTION_HEUTE_GRAD");
//        DBMap.put(txt_reaction_recent_intensity, projectTable + "PVD_INFUSIONS_REAKTION_VERG_GRAD");
        DBMap.put(cbx_reaction_today_intensity, projectTable + "PVD_INFUSION_REACTION_TODAY_INTENSITY");
        DBMap.put(cbx_reaction_recent_intensity, projectTable + "PVD_INFUSION_REACTION_RECENT_INTENSITY");
        DBMap.put(ta_reaction_today_desc, projectTable + "PVD_INFUSIONS_REAKTION_HEUTE_BESCHR");
        DBMap.put(ta_reaction_recent_desc, projectTable + "PVD_INFUSIONS_REAKTION_VERG_BESCHR");
        DBMap.put(txt_remaining_patient, projectTable + "PVD_AMP_PATIENT");
        DBMap.put(txt_remaining_nurse, projectTable + "PVD_AMP_NURSE");

        DBMap.put(txta_bemerkungen, projectTable + "PVD_BESONDERHEIT");
        DBMap.put(txta_beobachtungen, projectTable + "PVD_BEOBACHTUNGEN");

        DBMap.put(txt_port_details, projectTable + "PVD_PORT_DETAILS");
        DBMap.put(txt_port_block, projectTable + "PVD_PORT_BLOCK");
        
        DBMap.put(fieldBalanceWasRemoved, projectTable + "PVD_BALANCE_WAS_REMOVED");
        DBMap.put(productSource, projectTable + "PVD_PRODUCT_SOURCE");
        
        
        DBMap.put(ns_reaction_caused_by_vpriv, projectTable + "PVD_INFUSIONSREAKTION_ZUSAMMENHANG");
        DBMap.put(ns_prescribed_dose, projectTable + "PVD_PRESCRIBED_DOSE_ADM");
        DBMap.put(txt_prescribed_dose_reason, projectTable + "PVD_PRESCRIBED_DOSE_REASON");
        
        DBMap.put(txt_puncture_rating, projectTable + "PVD_PUNCTURE_RATING");
        DBMap.put(cbx_correlation, projectTable + "PVD_INFUSIONSREAKTION_ZUSAMMENHANG_BEWERTUNG");
        
        
        
    }

    private void Forms_Fill() {
        db = new DBClass();
        db.DB_Data_Get.DB_Spalten.Standard.DB_set_Spalten_All();

        /******************************** Table ****************************************/
        db.DB_Data_Get.DB_Tabellen.DB_set_Tabelle_Einzeln(projectTable);
        /******************************************************************************/
        /******************************** Filter ****************************************/
        db.DB_Data_Get.DB_Filter.DB_WHERE_Allgemein(projectTable, "PVD_ID", "=", Form_ID, "");
        /******************************************************************************/

        // db.DB_Data_Get.Set_Type("SLF_VON_UHRZEIT", Date.class);
        // db.DB_Data_Get.Set_Type("SLF_BIS_UHRZEIT", Date.class);

        Container con = db.DB_Data_Get.DB_SEND_AND_GET_Container();
        
        fieldBalanceWasRemoved.setValue((Integer) con.getContainerProperty(con.getItemIds().iterator().next(), "PVD_BALANCE_WAS_REMOVED").getValue());
        
        fb = new Form_Bind();

        if(con.size() > 0) {
            fb.Get_and_Fill(con, DBMap);
            dataSetItem = MyUtils.getFirstItemFromContainer(con);
        }

    }

    private Container dbGetCharges() {
        DBClass db = new DBClass();

        db.DB_Data_Get.DB_Tabellen.DB_set_Tabelle_Einzeln("cust_protokoll_vpriv_chargen");
        db.DB_Data_Get.DB_Spalten.Standard.DB_set_Spalten_Einzeln("*");
        db.DB_Data_Get.DB_Spalten.Standard.DB_set_Spalten_Einzeln("CONCAT(PVC_COUNT, 'x ', PVC_NR)", "display");
        db.DB_Data_Get.DB_Filter.DB_WHERE_Allgemein("cust_protokoll_vpriv_chargen", "PVC_PVD_ID", "=", Form_ID, "");
        db.DB_Data_Get.DB_Ordnen.DB_Ordnen("PVC_NR", "ASC");

        return db.DB_Data_Get.DB_SEND_AND_GET_Container();
    }

    private void fillCharges() {

        Container current = dbGetCharges();
        list_charges.setContainerDataSource(current);

    }

    private void updateCharges() {
        Container inDb = dbGetCharges();
        Container inList = list_charges.getContainerDataSource();

        HashMap<String, Object> hashDb = new HashMap<String, Object>();
        HashMap<String, Object> hashList = new HashMap<String, Object>();

        for (Object dbId : inDb.getItemIds()) {
            hashDb.put((String) inDb.getContainerProperty(dbId, "PVC_NR").getValue(), dbId);
        }

        for (Object listId : inList.getItemIds()) {
            hashList.put((String) inList.getContainerProperty(listId, "PVC_NR").getValue(), listId);
        }

        MapDifference<String, Object> diff = Maps.difference(hashList, hashDb);

        DBClass db = new DBClass();

        db.DB_Data_Insert.DB_Tabellen.DB_set_Tabelle_Einzeln("cust_protokoll_vpriv_chargen");

        if (diff.entriesOnlyOnLeft().size() > 0) {
            for (Entry<String, Object> e : diff.entriesOnlyOnLeft().entrySet()) {

                System.out.println("inserting: " + inList.getItem(e.getValue()).getItemProperty("display"));

                db.DB_Data_Insert.DB_Daten.DB_Data("cust_protokoll_vpriv_chargen", "PVC_PVD_ID", Form_ID);
                db.DB_Data_Insert.DB_Daten.DB_Data("cust_protokoll_vpriv_chargen", "PVC_NR", (String) inList.getItem(e.getValue()).getItemProperty("PVC_NR")
                        .getValue());
                db.DB_Data_Insert.DB_Daten.DB_Data("cust_protokoll_vpriv_chargen", "PVC_COUNT",
                        Integer.toString((Integer) inList.getItem(e.getValue()).getItemProperty("PVC_COUNT").getValue()));
                db.DB_Data_Insert.DB_Insert();
                db.DB_Data_Insert.DB_Daten.DB_Data_Leeren();

            }
        }

        db.DB_Data_Delete.DB_Tabellen.DB_set_Tabelle_Einzeln("cust_protokoll_vpriv_chargen");
        db.DB_Data_Get.DB_Tabellen.DB_set_Tabelle_Einzeln("cust_protokoll_vpriv_chargen");

        if (diff.entriesOnlyOnRight().size() > 0) {
            for (Entry<String, Object> e : diff.entriesOnlyOnRight().entrySet()) {

                System.out.println("deleting: " + inDb.getItem(e.getValue()).getItemProperty("display"));
                db.DB_Data_Delete.DB_Filter.DB_WHERE_Allgemein("cust_protokoll_vpriv_chargen", "PVC_PVD_ID", "=", Form_ID, "AND");
                db.DB_Data_Delete.DB_Filter.DB_WHERE_Allgemein("cust_protokoll_vpriv_chargen", "PVC_NR", "=", "'"
                        + (String) inDb.getItem(e.getValue()).getItemProperty("PVC_NR").getValue() + "'", "");
                db.DB_Data_Delete.DB_Delete();
                db.DB_Data_Delete.DB_Filter.DB_Data_Leeren();

            }
        }

    }
    
    private Integer toInt(TextField tf){
        
        Integer i = null;
        
        if (tf.getValue() != null && !tf.getValue().toString().trim().equals("")){
            i = Integer.parseInt(tf.getValue());
        }
        
        return i;
    }
    
    private void removeBalance(){
        
        Integer amp = toInt(txt_adm_vpriv_amp);
        Integer old = fieldBalanceWasRemoved.getValue();
        
        Boolean wasRemoved = fieldBalanceWasRemoved.getValue() != 0;
        

        if (amp != null && ns_status.getValue() != null && (int) ns_status.getValue() > 2) {
            
//            System.out.println("amp " + amp + "-" + "old " + old + "-" + "was " + wasRemoved);
            
            if(productSource.affectsBalance() && !wasRemoved){
//                System.out.println("removing " + amp);
                adjustBalance(-1 * amp);
                fieldBalanceWasRemoved.setValue(amp);
                Forms_Update();
            }else{
                
                old = (old == null) ? 0 : old;
                amp = (amp == null || !productSource.affectsBalance()) ? 0 : amp;
                
                Integer diff = old - amp;
                if(diff != 0){
//                    System.out.println("adjusting " + diff);
                    adjustBalance(diff);
                    fieldBalanceWasRemoved.setValue(amp);
                    Forms_Update();
                }
                
            }
            
        }
    }
    
    private void adjustBalance(Integer delta){
//        System.out.println("TASK: Adjust Balance " + delta);
        StockPatientBalance balance = new StockPatientBalance();
        balance.setPatientId((Integer) cb_pat.getValue());
        balance.editBalance(3, delta, StockPatientBalance.INFUSION);
    }
    
    private int Forms_Insert() {
        DBClass dba = new DBClass();
        fb = new Form_Bind();

        fb.Insert(dba, DBMap);
        // System.out.println(Get_A_ID());
        // dba.DB_Data_Insert.DB_Daten.DB_Data(projectTable, "PRD_ARZT_ID", Get_A_ID());

        /******************************** Table ****************************************/
        dba.DB_Data_Insert.DB_Tabellen.DB_set_Tabelle_Einzeln(projectTable);
        /******************************************************************************/
        // dba.DB_Data_Insert.DB_DEBUG_SQL_STRING();
        return dba.DB_Data_Insert.DB_Insert();
    }

    private void Forms_Update() {
        db = new DBClass();
        fb = new Form_Bind();
        fb.Update(db, DBMap);

        /******************************** Table ****************************************/
        db.DB_Data_Update.DB_Tabellen.DB_set_Tabelle_Einzeln(projectTable);
        /******************************************************************************/
        /******************************** Filter ****************************************/
        db.DB_Data_Update.DB_Filter.DB_WHERE_Allgemein(projectTable, "PVD_ID", "=", Form_ID, "");
        /******************************************************************************/
        db.DB_Data_Update.DB_Update();

    }

    private int saveNewNeedle(String caption) {
        db = new DBClass();

        db.DB_Data_Insert.DB_Tabellen.DB_set_Tabelle_Einzeln("cust_protokoll_nadeltypen");
        db.DB_Data_Insert.DB_Daten.DB_Data("cust_protokoll_nadeltypen", "PNT_NAME", caption);

        int result = db.DB_Data_Insert.DB_Insert();

        return result;
    }

    private String Get_A_ID() {
        String P_ID = cb_pat.getValue().toString();
        db = new DBClass();
        db.DB_Data_Get.DB_Tabellen.DB_set_Tabelle_Einzeln("cust_verk_arzt_patient");
        db.DB_Data_Get.DB_Spalten.Standard.DB_set_Spalten_All();
        db.DB_Data_Get.DB_Filter.DB_WHERE_Allgemein("cust_verk_arzt_patient", "VAP_P_ID", "=", P_ID, "AND");
        db.DB_Data_Get.DB_Filter.DB_WHERE_Allgemein("cust_verk_arzt_patient", "VAP_B_ID", "=", "2", "");

        Container con = db.DB_Data_Get.DB_SEND_AND_GET_Container();

        int A_ID = 0;
        A_ID = (int) con.getItem(con.getItemIds().iterator().next()).getItemProperty("VAP_A_ID").getValue();

        return A_ID + "";

    }

    /***********************************************/

    private void Popup_nativeselect_Stunden() {
        int i = 13;

        for (int a = 0; a < i; a++) {
            ns_Stunden.addItem(a);
            ns_Abrechnung_Stunden.addItem(a);
        }

    }

    private void Popup_nativeselect_minuten() {
        int i = 60;

        for (int a = 0; a < i; a++) {
            ns_min.addItem(a);
            ns_Abrechnung_Minuten.addItem(a);
        }

    }

    private void fillNurseCombo() {
        Object nv = null;

        Boolean readonly = cb_nurse.isReadOnly();
        cb_nurse.setReadOnly(false);

        nv = cb_nurse.getValue();
        cb_nurse.removeAllItems();
        
        ProjectNurseCombos vnc = new ProjectNurseCombos(3);
        vnc.setPatientId((Integer) cb_pat.getValue());
        
        try {
            new combo(vnc.getNurseComboMain(), cb_nurse, "KSK_ID", "Krankenschwesternname");
            new combo(vnc.getNurseComboSubs(), cb_nurse, "KSK_ID", "Krankenschwesternname");

            if (cb_pat.getValue() != null && nv != null) {
                cb_nurse.select(nv);
            }

        } catch (Exception e) {
            cb_nurse.removeAllItems();
            return;
        }

        cb_nurse.setReadOnly(readonly);
    }

    private void fillArzt() {

        Object av = null;

        CMS_Config_Std std = CMS_Config_Std.getInstance();
        DBClass db = new DBClass();

        db.DB_Data_Get.DB_Spalten.Standard.DB_set_Spalten_Einzeln("ASA_ID");
        db.DB_Data_Get.DB_Spalten.Standard.DB_set_Spalten_Einzeln("CONCAT(ASA_TITEL,' ',ASAN_NAME,' ',AUL_NAME,' ',AUL_VORNAME)", "Arztname");

        db.DB_Data_Get.DB_Tabellen.DB_set_Tabelle_Verknüpfung("cms_auth_stammdaten_user", "INNER JOIN", "cust_arzt_stammdaten_anrede", "AUL_ANREDE_ID",
                "ASAN_ID");
        db.DB_Data_Get.DB_Tabellen.DB_set_Tabelle_Verknüpfung("cust_arzt_stammdaten_arzt", "INNER JOIN", "cms_auth_stammdaten_user", "ASA_U_ID", "AUL_ID");
        db.DB_Data_Get.DB_Tabellen.DB_set_Tabelle_Verknüpfung("cust_verk_arzt_patient", "INNER JOIN", "cust_arzt_stammdaten_arzt", "VAP_A_ID", "ASA_ID");

        if (cb_pat.getValue() != null) {

            av = cbx_arzt.getValue();
            db.DB_Data_Get.DB_Filter.DB_WHERE_Allgemein("cust_verk_arzt_patient", "VAP_P_ID", "=", Integer.toString((int) cb_pat.getValue()), "AND");
        }

        db.DB_Data_Get.DB_Filter.DB_WHERE_Allgemein("cust_verk_arzt_patient", "VAP_B_ID", "=", "2", "");

        // db.DB_Data_Get.DB_DEBUG_SQL_STRING();

        try {
            cbx_arzt.removeAllItems();
            combo nc = new combo(db.DB_Data_Get.DB_SEND_AND_GET(), cbx_arzt, "ASA_ID", "Arztname");

            if (cb_pat.getValue() != null && av != null) {
                cbx_arzt.select(av);
            }

        } catch (Exception e) {
            cbx_arzt.removeAllItems();
            return;
        }
    }
    
    private void fillIntensities() {
        I18nConverter lc = new I18nConverter("cust_protokoll_complications", "PC_ID", "PC_INTENSITY");
        lc.attachDatasource(cbx_reaction_today_intensity);
        lc.attachDatasource(cbx_reaction_recent_intensity);
        cbx_reaction_today_intensity.setFilteringMode(FilteringMode.CONTAINS);
        cbx_reaction_recent_intensity.setFilteringMode(FilteringMode.CONTAINS);
        
    }
    
    private void fillLngType() {
        
        I18nConverter lc = new I18nConverter("cust_protokoll_vpriv_typ", "PVT_ID", "PVT_STRING");
        lc.attachDatasource(cbx_type);
        cbx_type.setFilteringMode(FilteringMode.CONTAINS);

    }
    
    /*********************** -->Validierung<-- ********************/
    private void Set_Validate_Map() {
        ValidateMap = new HashMap<>();
        ValidateMap.put(pop_date, "pop_date");
        ValidateMap.put(cb_pat, "cb_pat");
        ValidateMap.put(cb_nurse, "cb_nurse");
        ValidateMap.put(ns_status, "ns_status");
        ValidateMap.put(ns_Stunden, "ns_Stunden");
        ValidateMap.put(ns_min, "ns_min");
        //ValidateMap.put(ns_anrufe, "ns_anrufe");
        ValidateMap.put(txt_Gesamte_Km, "txt_Gesamte_Km");
        
        ValidateMap.put(txt_von, "txt_von");
        ValidateMap.put(txt_bis, "txt_bis");
        
        ValidateMap.put(txt_pat_weigth, "txt_pat_weigth");
        ValidateMap.put(txt_adm_vpriv_vol, "txt_adm_vpriv_vol");

        ValidateMap.put(cbx_type, "cbx_type");

        ValidateMap.put(txt_vitals_pressure_start, "txt_vitals_pressure_start");
        ValidateMap.put(txt_vitals_pressure_end, "txt_vitals_pressure_end");
        ValidateMap.put(txt_vitals_pressure_reaction, "txt_vitals_pressure_reaction");

        ValidateMap.put(txt_vitals_mad_start, "txt_vitals_mad_start");
        ValidateMap.put(txt_vitals_mad_end, "txt_vitals_mad_end");
        ValidateMap.put(txt_vitals_mad_reaction, "txt_vitals_mad_reaction");

        ValidateMap.put(txt_vitals_pulse_start, "txt_vitals_pulse_start");
        ValidateMap.put(txt_vitals_pulse_end, "txt_vitals_pulse_end");
        ValidateMap.put(txt_vitals_pulse_reaction, "txt_vitals_pulse_reaction");

        ValidateMap.put(txt_vitals_temp_start, "txt_vitals_temp_start");
        ValidateMap.put(txt_vitals_temp_end, "txt_vitals_temp_end");
        ValidateMap.put(txt_vitals_temp_reaction, "txt_vitals_temp_reaction");
        
        ValidateMap.put(txt_adm_vpriv_amp, "txt_adm_vpriv_amp");
        
        ValidateMap.put(txta_beobachtungen, "txta_beobachtungen");
        
    }

    private void Set_Validierer() {

        // psw_pass_1.addValidator(new
        // Custom_Benutzerform_psw_ändern(psw_pass_1, psw_pass_2));

        /**************/
        /* Manuelles prüfen */

        BlurListener blur = new BlurListener() {
            @Override
            public void blur(BlurEvent event) {
                String hr = "0";
                String min = "0";
                
                if (((AbstractField<String>) event.getComponent()).isValid() 
                        && ((AbstractField<String>) event.getComponent()).getValue() != null 
                        && ((AbstractField<String>) event.getComponent()).getValue().length() > 0) {
                    
                    AbstractField<String> field = (AbstractField<String>) event.getComponent();
                    String value = field.getValue();
                    Integer lid = value.lastIndexOf(":"); // -1 (0958) oder 1
                    // (9:58) oder 2
                    // (09:58)

                    if (lid == -1) {

                        Integer splitat = Math.max(0, value.length() - 2);

                        hr = value.substring(0, splitat);
                        min = value.substring(splitat);

                        field.setValue(hr + ":" + min);
                    } else {

                        String[] time = value.split(":");
                        hr = time[0];
                        min = time[1];

                    }

                }
            }
        };
        
        balanceValidator = new Validator() {
            
            @Override
            public void validate(Object value) throws com.vaadin.data.Validator.InvalidValueException {
                
                if(productSource.affectsBalance()){
                    
                    if(value == null || value.equals("0") || value.equals("")){
                        
                        throw new com.vaadin.data.Validator.InvalidValueException(productSource.getItemCaption(productSource.getValue()));
                        
                    }
                    
                }
                
            }
        };
        
        txt_von.setImmediate(true);
        txt_von.addBlurListener(blur);

        txt_bis.setImmediate(true);
        txt_bis.addBlurListener(blur);

        txt_premed_1_time.setImmediate(true);
        txt_premed_1_time.addBlurListener(blur);

        txt_premed_2_time.setImmediate(true);
        txt_premed_2_time.addBlurListener(blur);

        txt_premed_3_time.setImmediate(true);
        txt_premed_3_time.addBlurListener(blur);

        txt_inf_time_start.setImmediate(true);
        txt_inf_time_start.addBlurListener(blur);
        txt_inf_time_stop.setImmediate(true);
        txt_inf_time_stop.addBlurListener(blur);
        txt_inf_total_duration.setImmediate(true);
        txt_inf_total_duration.addBlurListener(blur);

        txt_vitals_time_start.setImmediate(true);
        txt_vitals_time_start.addBlurListener(blur);
        txt_vitals_time_end.setImmediate(true);
        txt_vitals_time_end.addBlurListener(blur);
        txt_vitals_time_reaction.setImmediate(true);
        txt_vitals_time_reaction.addBlurListener(blur);
        

        
    }

    private boolean Validate_Test() {
        val_checker4 val = new val_checker4(ValidateMap);
        if (val.Is_Valid() == false) {
            return false;
        } else {
            return true;
        }

    }

    /***************************** -> Fill ns und cb <- ****************************************/
    private void Fill_ns_P_Status_Nurse() {
        CMS_Config_Std std = CMS_Config_Std.getInstance();
        DBClass db = new DBClass();
        db.DB_Data_Get.DB_Spalten.Standard.DB_set_Spalten_Einzeln("SS_PROZESS");
        db.DB_Data_Get.DB_Spalten.Standard.DB_set_Spalten_Einzeln("SS_NAME");
        db.DB_Data_Get.DB_Tabellen.DB_set_Tabelle_Einzeln("cust_schulung_status");

        db.DB_Data_Get.DB_Filter.DB_WHERE_Allgemein("cust_schulung_status", "SS_PROJEKT", "=", projectId, "AND");

        db.DB_Data_Get.DB_Filter.DB_WHERE_Allgemein("cust_schulung_status", "SS_PROZESS", "<=", "3", "");

        try {
            nativecombo nc = new nativecombo(db.DB_Data_Get.DB_SEND_AND_GET(), ns_status, "SS_PROZESS", "SS_NAME");
        } catch (Exception e) {
            ns_status.removeAllItems();
        }

        db.DB_Data_Get.connclose();
    }

    private void Fill_ns_P_Status() {
        CMS_Config_Std std = CMS_Config_Std.getInstance();
        DBClass db = new DBClass();
        db.DB_Data_Get.DB_Spalten.Standard.DB_set_Spalten_Einzeln("SS_PROZESS");
        db.DB_Data_Get.DB_Spalten.Standard.DB_set_Spalten_Einzeln("SS_NAME");
        db.DB_Data_Get.DB_Tabellen.DB_set_Tabelle_Einzeln("cust_schulung_status");

        db.DB_Data_Get.DB_Filter.DB_WHERE_Allgemein("cust_schulung_status", "SS_PROJEKT", "=", projectId, "");

        try {
            nativecombo nc = new nativecombo(db.DB_Data_Get.DB_SEND_AND_GET(), ns_status, "SS_PROZESS", "SS_NAME");
        } catch (Exception e) {
            ns_status.removeAllItems();
        }

        db.DB_Data_Get.connclose();
    }

    private void Fill_cb_P_Patient_nurse() {
        CMS_Config_Std std = CMS_Config_Std.getInstance();

        DBClass db = new DBClass();
        db.DB_Data_Get.DB_Spalten.Standard.DB_set_Spalten_Einzeln("PSL_ID");
        // db.DB_Data_Get.DB_Spalten.Standard.DB_set_Spalten_Einzeln("CONCAT(PSL_TITEL,' ',PSA_NAME,' ',PSL_NAME,' ',PSL_VORNAME)","Patientenname");
        db.DB_Data_Get.DB_Spalten.Standard.DB_set_Spalten_Einzeln(
                "CONCAT(PSL_TITEL,' ',PSA_NAME,' ',PSL_NAME,' ',PSL_VORNAME, ' (',PSL_PLZ, ' ', PSL_ORT,')')", "Patientenname");
        db.DB_Data_Get.DB_Tabellen.DB_set_Tabelle_Verknüpfung("cust_patient_stammdaten_liste", "INNER JOIN", "cust_patient_stammdaten_anrede", "PSL_ANREDE",
                "PSA_ID");
        db.DB_Data_Get.DB_Tabellen.DB_set_Tabelle_Verknüpfung("cust_patient_stammdaten_liste", "INNER JOIN", "cust_verk_haupt", "PSL_ID", "VH_PATIENT_ID");
        db.DB_Data_Get.DB_Tabellen.DB_set_Tabelle_Verknüpfung("cust_verk_haupt", "LEFT JOIN", "cust_verk_subs", "VH_PATIENT_ID", "CVS_PATIENT_ID");

        db.DB_Data_Get.DB_Filter.DB_WHERE_Allgemein("(cust_verk_haupt", "VH_NURSE_ID", "=", Integer.toString(Get_ID_Nurse()), "AND");
        db.DB_Data_Get.DB_Filter.DB_WHERE_Allgemein("cust_verk_haupt", "VH_PROJEKT_ID", "=", projectId, "AND");
        db.DB_Data_Get.DB_Filter.DB_WHERE_Allgemein("cust_verk_haupt", "VH_AKTIV", "=", "1", ") OR (");

        db.DB_Data_Get.DB_Filter.DB_WHERE_Allgemein("cust_verk_subs", "CVS_NURSE_ID", "=", Integer.toString(Get_ID_Nurse()), "AND");
        db.DB_Data_Get.DB_Filter.DB_WHERE_Allgemein("cust_verk_subs", "CVS_PROJECT_ID", "=", projectId, ")");
        
        db.DB_Data_Get.DB_Gruppieren.DB_Gruppieren("PSL_ID");
        
        
        db.debugNextQuery(true);
        
        try {
            combo nc = new combo(db.DB_Data_Get.DB_SEND_AND_GET(), cb_pat, "PSL_ID", "Patientenname");
        } catch (Exception e) {
            cb_pat.removeAllItems();
        }
        
        db.DB_Data_Get.connclose();

        cb_pat.setFilteringMode(cb_pat.FILTERINGMODE_CONTAINS);
    }

    private void Fill_cb_P_Patient() {
        CMS_Config_Std std = CMS_Config_Std.getInstance();

        DBClass db = new DBClass();
        db.DB_Data_Get.DB_Spalten.Standard.DB_set_Spalten_Einzeln("PSL_ID");
        db.DB_Data_Get.DB_Spalten.Standard.DB_set_Spalten_Einzeln(
                "CONCAT(PSL_TITEL,' ',PSA_NAME,' ',PSL_NAME,' ',PSL_VORNAME, ' (',PSL_PLZ, ' ', PSL_ORT,')')", "Patientenname");
        db.DB_Data_Get.DB_Tabellen.DB_set_Tabelle_Verknüpfung("cust_patient_stammdaten_liste", "INNER JOIN", "cust_patient_stammdaten_anrede", "PSL_ANREDE",
                "PSA_ID");
        db.DB_Data_Get.DB_Tabellen.DB_set_Tabelle_Verknüpfung("cust_patient_stammdaten_liste", "INNER JOIN", "cust_verk_haupt", "PSL_ID", "VH_PATIENT_ID");

        // db.DB_Data_Get.DB_Filter.DB_WHERE_Allgemein("cust_verk_haupt",
        // "VH_NURSE_ID", "=", Integer.toString(Get_ID_Nurse()), "AND");
        db.DB_Data_Get.DB_Filter.DB_WHERE_Allgemein("cust_verk_haupt", "VH_PROJEKT_ID", "=", "3", "");
//        db.DB_Data_Get.DB_Filter.DB_WHERE_Allgemein("cust_verk_haupt", "VH_AKTIV", "=", "1", "");

        try {
            combo nc = new combo(db.DB_Data_Get.DB_SEND_AND_GET(), cb_pat, "PSL_ID", "Patientenname");
        } catch (Exception e) {
            cb_pat.removeAllItems();
        }

        db.DB_Data_Get.connclose();

        cb_pat.setFilteringMode(cb_pat.FILTERINGMODE_CONTAINS);
    }

    private void fillTypes() {
        CMS_Config_Std std = CMS_Config_Std.getInstance();

        DBClass db = new DBClass();
        db.DB_Data_Get.DB_Spalten.Standard.DB_set_Spalten_Einzeln("PVT_ID");
        db.DB_Data_Get.DB_Spalten.Standard.DB_set_Spalten_Einzeln("PVT_STRING");

        db.DB_Data_Get.DB_Tabellen.DB_set_Tabelle_Einzeln("cust_protokoll_vpriv_typ");

        try {
            combo nc = new combo(db.DB_Data_Get.DB_SEND_AND_GET(), cbx_type, "PVT_ID", "PVT_STRING");
        } catch (Exception e) {
            cbx_type.removeAllItems();
        }
    }

    private void fillNeedles(Boolean filtered) {
        CMS_Config_Std std = CMS_Config_Std.getInstance();
        
        Object value = cbx_needle.getValue();
        
        DBClass db = new DBClass();
        db.DB_Data_Get.DB_Spalten.Standard.DB_set_Spalten_Einzeln("PNT_ID");
        db.DB_Data_Get.DB_Spalten.Standard.DB_set_Spalten_Einzeln("PNT_NAME");

        db.DB_Data_Get.DB_Tabellen.DB_set_Tabelle_Einzeln("cust_protokoll_nadeltypen");
        if(filtered) {
            
            if(value != null) {
                db.DB_Data_Get.DB_Filter.DB_WHERE_Allgemein("cust_protokoll_nadeltypen", "PNT_ID", "=", value.toString(), "OR");
            }
            
            db.DB_Data_Get.DB_Filter.DB_WHERE_Allgemein("cust_protokoll_nadeltypen", "IS_LEGACY", "=", "0", "");
            
        }

        try {
            cbx_needle.removeAllItems();
            combo nc = new combo(db.DB_Data_Get.DB_SEND_AND_GET(), cbx_needle, "PNT_ID", "PNT_NAME");
            if(value != null) {
                cbx_needle.setValue(value);
            }
        } catch (Exception e) {
            cbx_needle.removeAllItems();
        }

        db.DB_Data_Get.connclose();

        cbx_needle.setFilteringMode(FilteringMode.CONTAINS);
//        cbx_needle.setNewItemsAllowed(true);
//        cbx_needle.setNewItemHandler(new NewItemHandler() {
//
//            @Override
//            public void addNewItem(String newItemCaption) {
//                handleNewNeedle(newItemCaption);
//            }
//        });

    }

//    private void handleNewNeedle(String caption) {
//        int result = saveNewNeedle(caption);
//        if (result != 0) {
//            fillNeedles();
//            cbx_needle.select(result);
//        }
//    }

    private Integer calculateDuration(String start, String end) {

        String[] starta = start.split(":");
        String[] enda = end.split(":");

        Integer[] dur = new Integer[4];

        dur[0] = Integer.parseInt(enda[0]);
        dur[1] = Integer.parseInt(enda[1]);
        dur[2] = Integer.parseInt(starta[0]);
        dur[3] = Integer.parseInt(starta[1]);

        // dur[0] -= Integer.parseInt(starta[0]);
        // dur[1] -= Integer.parseInt(starta[1]);
        //
        // if (dur[1] < 0) {
        // Integer min = dur[1] * -1;
        // float hours = (float) min / 60;
        // dur[0] += (1 + (int) hours);
        //
        // Float pmin = 1 - (float) (hours - Math.floor(hours));
        //
        // dur[1] = (int) (pmin * 60);
        // }

        Integer min = (dur[0] * 60) + dur[1];
        min = min - ((dur[2] * 60) + dur[3]);

        return min;
    }

    private String formatDuration(Integer minutes) {

        float hours = (float) minutes / 60;
        int hour = (int) hours;
        float pmin = (float) (hours - Math.floor(hours));
        int minute = (int) Math.round((pmin) * 60.0);

        String zh = (hour < 10) ? "0" : "";
        String zm = (minute < 10) ? "0" : "";

        return zh + hour + ":" + zm + minute;
    }

    private Float calculateRate(Float vol, Integer min) {

        float h = (float) min / 60;

        float rate = vol / h;

        rate = (float) (Math.round((rate) * 100.0) / 100.0);

        return rate;
    }

    private String formatRate(Float rate) {
        return String.format(Locale.GERMAN, "%.2f", rate);
    }

    private void fillYesNoSelects() {

        List<Label> labels = new ArrayList<Label>();

        labels.add(lbl_no);
        labels.add(lbl_yes);
        
        ArrayList<AbstractSelect> al = new ArrayList<AbstractSelect>();
        
        al.add(ns_reaction_today);
        al.add(ns_reaction_recent);
        al.add(ns_prescribed_dose);
        al.add(ns_reaction_caused_by_vpriv);
        
        
        for (Label l : labels) {
            
            for (Iterator iterator = al.iterator(); iterator.hasNext();) {
                AbstractSelect select = (AbstractSelect) iterator.next();
                
                Integer value = Integer.parseInt(l.getValue());
                
                select.setNullSelectionAllowed(true);
                select.addItem(value);
                select.setItemCaption(value, l.getCaption());

            }
            
        }

    }
    
    private void fillCorrelation(){
        
        I18nConverter lc = new I18nConverter("cust_protokoll_correlations", "PCO_ID", "PCO_CORRELATION");
        lc.attachDatasource(cbx_correlation);
        cbx_correlation.setFilteringMode(FilteringMode.CONTAINS);
        
    }
    
    @SuppressWarnings("serial")
    private void Set_Status_Select_OnChange() {
        ns_status.addValueChangeListener(new Property.ValueChangeListener() {
            @Override
            public void valueChange(ValueChangeEvent event) {
                boolean required = false;
                boolean saveable = false;
                if (ns_status.getValue() != null && (int) ns_status.getValue() > 2) {
                    required = true;
                }

                if (ns_status.getValue() != null && (int) ns_status.getValue() != 1) {
                    saveable = true;
                }

                ns_Stunden.setRequired(required);
                ns_min.setRequired(required);
                txt_Gesamte_Km.setRequired(required);

                pop_date.setRequired(required);
                txt_von.setRequired(required);
                txt_bis.setRequired(required);
                if (nurse) {
//                    btn_save.setEnabled(saveable);
                }
                
                //TASK enable validator!
                if(required){
//                    System.out.println("adding validator");
//                    txt_adm_vpriv_amp.addValidator(balanceValidator);
                }else{
//                    System.out.println("removing validator");
//                    txt_adm_vpriv_amp.removeValidator(balanceValidator);
                }
                
            }
        });
    }

    private void Prüfung_Ist_Grp_Krankenschwestern() {
        int UID = (int) UI.getCurrent().getSession().getSession().getAttribute("Userid");
        CMS_Config_Std std = CMS_Config_Std.getInstance();
        DBClass db = new DBClass();

        db.DB_Data_Get.DB_Spalten.Standard.DB_set_Spalten_All();
        db.DB_Data_Get.DB_Tabellen.DB_set_Tabelle_Einzeln("cms_auth_liste_gu");
        db.DB_Data_Get.DB_Filter.DB_WHERE_Allgemein("cms_auth_liste_gu", "AL_U_ID", "=", "'" + UID + "'", "AND");
        db.DB_Data_Get.DB_Filter.DB_WHERE_Allgemein("cms_auth_liste_gu", "AL_G_ID", "=", "'12'", ""); // TASK KS Gruppen Umstellen

        Container con = db.DB_Data_Get.DB_SEND_AND_GET_Container();

        if (con.size() > 0) {
            nurse = true;
        } else {
            nurse = false;
        }

    }

    private int Get_ID_Nurse() {

        int UID = (int) UI.getCurrent().getSession().getSession().getAttribute("Userid");
        CMS_Config_Std std = CMS_Config_Std.getInstance();
        DBClass db = new DBClass();

        db.DB_Data_Get.DB_Spalten.Standard.DB_set_Spalten_Einzeln("KSK_ID");
        db.DB_Data_Get.DB_Spalten.Standard.DB_set_Spalten_Einzeln("KSK_U_ID");
        db.DB_Data_Get.DB_Tabellen.DB_set_Tabelle_Einzeln("cust_krankenschwester_stammdaten_ks");
        db.DB_Data_Get.DB_Filter.DB_WHERE_Allgemein("cust_krankenschwester_stammdaten_ks", "KSK_U_ID", "=", "'" + UID + "'", "");

        Container con = db.DB_Data_Get.DB_SEND_AND_GET_Container();

        int ksk = (int) con.getContainerProperty(1, "KSK_ID").getValue();

        return ksk;
    }

    private void getInitials() {
        
        if(MyUtils.equalsWithNulls(Form_ID, "")) {
            return;
        }
        
        DBClass db = new DBClass();
        CustomQuery q = db.CustomQuery;
        q.setSqlString("select PVMS_PAT_INITIALS"
             + "\n " + "from cust_protokoll_vpriv_daten"
             + "\n " + "left join cust_protokoll_vpriv_meta_dynamic on PVD_DELEGATION_ID = PVMD_ID"
             + "\n " + "left join cust_protokoll_vpriv_meta_static on PVMD_VH_ID = PVMS_VH_ID"
             + "\n " + "where PVD_ID = " + Form_ID
                 + "");
//        db.debugNextQuery(true);
        
        txt_initials.setValue(MyUtils.getValueFromItem(MyUtils.getFirstItemFromContainer(q.query()), "PVMS_PAT_INITIALS", String.class));
    }
   
    @AutoGenerated
    private VerticalLayout buildMainLayout() {
        // common part: create layout
        mainLayout = new VerticalLayout();
        mainLayout.setImmediate(false);
        mainLayout.setWidth("100%");
        mainLayout.setHeight("100%");
        mainLayout.setMargin(true);
        
        // top-level component properties
        setWidth("100.0%");
        setHeight("100.0%");
        
        // horizontalLayout_2
        horizontalLayout_2 = buildHorizontalLayout_2();
        mainLayout.addComponent(horizontalLayout_2);
        mainLayout.setExpandRatio(horizontalLayout_2, 2.0f);
        mainLayout.setComponentAlignment(horizontalLayout_2, new Alignment(48));
        
        // horizontalLayout_3
        horizontalLayout_3 = buildHorizontalLayout_3();
        mainLayout.addComponent(horizontalLayout_3);
        mainLayout.setExpandRatio(horizontalLayout_3, 6.0f);
        mainLayout.setComponentAlignment(horizontalLayout_3, new Alignment(48));
        
        // horizontalLayout_4
        horizontalLayout_4 = buildHorizontalLayout_4();
        mainLayout.addComponent(horizontalLayout_4);
        
        // al_localization_labels
        al_localization_labels = buildAl_localization_labels();
        mainLayout.addComponent(al_localization_labels);
        
        // al_passive_fields
        al_passive_fields = buildAl_passive_fields();
        mainLayout.addComponent(al_passive_fields);
        
        return mainLayout;
    }

    @AutoGenerated
    private HorizontalLayout buildHorizontalLayout_2() {
        // common part: create layout
        horizontalLayout_2 = new HorizontalLayout();
        horizontalLayout_2.setImmediate(false);
        horizontalLayout_2.setWidth("100.0%");
        horizontalLayout_2.setHeight("100.0%");
        horizontalLayout_2.setMargin(false);
        
        // pan_dat
        pan_dat = buildPan_dat();
        horizontalLayout_2.addComponent(pan_dat);
        horizontalLayout_2.setExpandRatio(pan_dat, 1.0f);
        
        // pan_stammdaten
        pan_stammdaten = buildPan_stammdaten();
        horizontalLayout_2.addComponent(pan_stammdaten);
        horizontalLayout_2.setExpandRatio(pan_stammdaten, 4.0f);
        horizontalLayout_2.setComponentAlignment(pan_stammdaten, new Alignment(20));
        
        return horizontalLayout_2;
    }

    @AutoGenerated
    private Panel buildPan_dat() {
        // common part: create layout
        pan_dat = new Panel();
        pan_dat.setCaption("Datierung");
        pan_dat.setImmediate(false);
        pan_dat.setWidth("90.0%");
        pan_dat.setHeight("90.0%");
        
        // verticalLayout_2
        verticalLayout_2 = buildVerticalLayout_2();
        pan_dat.setContent(verticalLayout_2);
        
        return pan_dat;
    }

    @AutoGenerated
    private VerticalLayout buildVerticalLayout_2() {
        // common part: create layout
        verticalLayout_2 = new VerticalLayout();
        verticalLayout_2.setImmediate(false);
        verticalLayout_2.setWidth("100.0%");
        verticalLayout_2.setHeight("100.0%");
        verticalLayout_2.setMargin(false);
        
        // pop_date
        pop_date = new PopupDateField();
        pop_date.setCaption("Datum");
        pop_date.setImmediate(false);
        pop_date.setWidth("80.0%");
        pop_date.setHeight("-1px");
        verticalLayout_2.addComponent(pop_date);
        verticalLayout_2.setComponentAlignment(pop_date, new Alignment(48));
        
        // horizontalLayout_11
        horizontalLayout_11 = buildHorizontalLayout_11();
        verticalLayout_2.addComponent(horizontalLayout_11);
        verticalLayout_2.setComponentAlignment(horizontalLayout_11, new Alignment(48));
        
        return verticalLayout_2;
    }

    @AutoGenerated
    private HorizontalLayout buildHorizontalLayout_11() {
        // common part: create layout
        horizontalLayout_11 = new HorizontalLayout();
        horizontalLayout_11.setImmediate(false);
        horizontalLayout_11.setWidth("-1px");
        horizontalLayout_11.setHeight("-1px");
        horizontalLayout_11.setMargin(false);
        horizontalLayout_11.setSpacing(true);
        
        // txt_von
        txt_von = new TextField();
        txt_von.setCaption("Von");
        txt_von.setImmediate(false);
        txt_von.setWidth("64px");
        txt_von.setHeight("-1px");
        horizontalLayout_11.addComponent(txt_von);
        
        // txt_bis
        txt_bis = new TextField();
        txt_bis.setCaption("Bis");
        txt_bis.setImmediate(false);
        txt_bis.setWidth("64px");
        txt_bis.setHeight("-1px");
        horizontalLayout_11.addComponent(txt_bis);
        
        return horizontalLayout_11;
    }

    @AutoGenerated
    private Panel buildPan_stammdaten() {
        // common part: create layout
        pan_stammdaten = new Panel();
        pan_stammdaten.setCaption("Stammdatenauswahl");
        pan_stammdaten.setImmediate(false);
        pan_stammdaten.setWidth("100.0%");
        pan_stammdaten.setHeight("90.0%");
        
        // horizontalLayout_1
        horizontalLayout_1 = buildHorizontalLayout_1();
        pan_stammdaten.setContent(horizontalLayout_1);
        
        return pan_stammdaten;
    }

    @AutoGenerated
    private HorizontalLayout buildHorizontalLayout_1() {
        // common part: create layout
        horizontalLayout_1 = new HorizontalLayout();
        horizontalLayout_1.setImmediate(false);
        horizontalLayout_1.setWidth("100.0%");
        horizontalLayout_1.setHeight("100.0%");
        horizontalLayout_1.setMargin(false);
        
        // verticalLayout_3
        verticalLayout_3 = buildVerticalLayout_3();
        horizontalLayout_1.addComponent(verticalLayout_3);
        horizontalLayout_1.setExpandRatio(verticalLayout_3, 3.0f);
        
        // verticalLayout_16
        verticalLayout_16 = buildVerticalLayout_16();
        horizontalLayout_1.addComponent(verticalLayout_16);
        horizontalLayout_1.setComponentAlignment(verticalLayout_16, new Alignment(34));
        
        return horizontalLayout_1;
    }

    @AutoGenerated
    private VerticalLayout buildVerticalLayout_3() {
        // common part: create layout
        verticalLayout_3 = new VerticalLayout();
        verticalLayout_3.setImmediate(false);
        verticalLayout_3.setWidth("100.0%");
        verticalLayout_3.setHeight("100.0%");
        verticalLayout_3.setMargin(false);
        
        // horizontalLayout_8
        horizontalLayout_8 = buildHorizontalLayout_8();
        verticalLayout_3.addComponent(horizontalLayout_8);
        verticalLayout_3.setExpandRatio(horizontalLayout_8, 1.0f);
        verticalLayout_3.setComponentAlignment(horizontalLayout_8, new Alignment(33));
        
        // horizontalLayout_9
        horizontalLayout_9 = buildHorizontalLayout_9();
        verticalLayout_3.addComponent(horizontalLayout_9);
        verticalLayout_3.setExpandRatio(horizontalLayout_9, 1.0f);
        verticalLayout_3.setComponentAlignment(horizontalLayout_9, new Alignment(33));
        
        return verticalLayout_3;
    }

    @AutoGenerated
    private HorizontalLayout buildHorizontalLayout_8() {
        // common part: create layout
        horizontalLayout_8 = new HorizontalLayout();
        horizontalLayout_8.setImmediate(false);
        horizontalLayout_8.setWidth("100.0%");
        horizontalLayout_8.setHeight("-1px");
        horizontalLayout_8.setMargin(false);
        horizontalLayout_8.setSpacing(true);
        
        // verticalLayout_4
        verticalLayout_4 = buildVerticalLayout_4();
        horizontalLayout_8.addComponent(verticalLayout_4);
        horizontalLayout_8.setComponentAlignment(verticalLayout_4, new Alignment(9));
        
        // verticalLayout_ph
        verticalLayout_ph = buildVerticalLayout_ph();
        horizontalLayout_8.addComponent(verticalLayout_ph);
        
        // txt_initials
        txt_initials = new TextField();
        txt_initials.setCaption("Kürzel");
        txt_initials.setImmediate(false);
        txt_initials.setWidth("60px");
        txt_initials.setHeight("-1px");
        horizontalLayout_8.addComponent(txt_initials);
        horizontalLayout_8.setComponentAlignment(txt_initials, new Alignment(9));
        
        // cb_pat
        cb_pat = new ComboBox();
        cb_pat.setCaption("Patientauswahl");
        cb_pat.setImmediate(false);
        cb_pat.setWidth("-1px");
        cb_pat.setHeight("-1px");
        horizontalLayout_8.addComponent(cb_pat);
        horizontalLayout_8.setExpandRatio(cb_pat, 1.0f);
        horizontalLayout_8.setComponentAlignment(cb_pat, new Alignment(9));
        
        return horizontalLayout_8;
    }

    @AutoGenerated
    private VerticalLayout buildVerticalLayout_4() {
        // common part: create layout
        verticalLayout_4 = new VerticalLayout();
        verticalLayout_4.setImmediate(false);
        verticalLayout_4.setWidth("50px");
        verticalLayout_4.setHeight("-1px");
        verticalLayout_4.setMargin(false);
        
        // btn_pat_info
        btn_pat_info = new Button();
        btn_pat_info.setImmediate(true);
        btn_pat_info.setWidth("-1px");
        btn_pat_info.setHeight("-1px");
        verticalLayout_4.addComponent(btn_pat_info);
        verticalLayout_4.setComponentAlignment(btn_pat_info, new Alignment(20));
        
        return verticalLayout_4;
    }

    @AutoGenerated
    private VerticalLayout buildVerticalLayout_ph() {
        // common part: create layout
        verticalLayout_ph = new VerticalLayout();
        verticalLayout_ph.setImmediate(false);
        verticalLayout_ph.setWidth("-1px");
        verticalLayout_ph.setHeight("-1px");
        verticalLayout_ph.setMargin(false);
        
        // button_1
        button_1 = new Button();
        button_1.setEnabled(false);
        button_1.setImmediate(true);
        button_1.setVisible(false);
        button_1.setWidth("-1px");
        button_1.setHeight("-1px");
        verticalLayout_ph.addComponent(button_1);
        
        return verticalLayout_ph;
    }

    @AutoGenerated
    private HorizontalLayout buildHorizontalLayout_9() {
        // common part: create layout
        horizontalLayout_9 = new HorizontalLayout();
        horizontalLayout_9.setImmediate(false);
        horizontalLayout_9.setWidth("100.0%");
        horizontalLayout_9.setHeight("-1px");
        horizontalLayout_9.setMargin(false);
        horizontalLayout_9.setSpacing(true);
        
        // verticalLayout_6
        verticalLayout_6 = buildVerticalLayout_6();
        horizontalLayout_9.addComponent(verticalLayout_6);
        horizontalLayout_9.setComponentAlignment(verticalLayout_6, new Alignment(9));
        
        // verticalLayout_9
        verticalLayout_9 = buildVerticalLayout_9();
        horizontalLayout_9.addComponent(verticalLayout_9);
        horizontalLayout_9.setComponentAlignment(verticalLayout_9, new Alignment(9));
        
        // cb_nurse
        cb_nurse = new ComboBox();
        cb_nurse.setCaption("Krankenschwester");
        cb_nurse.setImmediate(false);
        cb_nurse.setWidth("-1px");
        cb_nurse.setHeight("-1px");
        horizontalLayout_9.addComponent(cb_nurse);
        horizontalLayout_9.setExpandRatio(cb_nurse, 1.0f);
        horizontalLayout_9.setComponentAlignment(cb_nurse, new Alignment(9));
        
        return horizontalLayout_9;
    }

    @AutoGenerated
    private VerticalLayout buildVerticalLayout_6() {
        // common part: create layout
        verticalLayout_6 = new VerticalLayout();
        verticalLayout_6.setImmediate(false);
        verticalLayout_6.setWidth("50px");
        verticalLayout_6.setHeight("-1px");
        verticalLayout_6.setMargin(false);
        
        // btn_nurse_info
        btn_nurse_info = new Button();
        btn_nurse_info.setImmediate(true);
        btn_nurse_info.setWidth("-1px");
        btn_nurse_info.setHeight("-1px");
        verticalLayout_6.addComponent(btn_nurse_info);
        verticalLayout_6.setComponentAlignment(btn_nurse_info, new Alignment(20));
        
        return verticalLayout_6;
    }

    @AutoGenerated
    private VerticalLayout buildVerticalLayout_9() {
        // common part: create layout
        verticalLayout_9 = new VerticalLayout();
        verticalLayout_9.setImmediate(false);
        verticalLayout_9.setWidth("-1px");
        verticalLayout_9.setHeight("-1px");
        verticalLayout_9.setMargin(false);
        
        // btn_zuweisung
        btn_zuweisung = new Button();
        btn_zuweisung.setCaption("Zuweisung");
        btn_zuweisung.setImmediate(true);
        btn_zuweisung.setWidth("-1px");
        btn_zuweisung.setHeight("-1px");
        verticalLayout_9.addComponent(btn_zuweisung);
        
        return verticalLayout_9;
    }

    @AutoGenerated
    private VerticalLayout buildVerticalLayout_16() {
        // common part: create layout
        verticalLayout_16 = new VerticalLayout();
        verticalLayout_16.setImmediate(false);
        verticalLayout_16.setWidth("180px");
        verticalLayout_16.setHeight("100.0%");
        verticalLayout_16.setMargin(false);
        
        // horizontalLayout_7
        horizontalLayout_7 = buildHorizontalLayout_7();
        verticalLayout_16.addComponent(horizontalLayout_7);
        verticalLayout_16.setExpandRatio(horizontalLayout_7, 1.0f);
        verticalLayout_16.setComponentAlignment(horizontalLayout_7, new Alignment(34));
        
        // horizontalLayout_14
        horizontalLayout_14 = buildHorizontalLayout_14();
        verticalLayout_16.addComponent(horizontalLayout_14);
        verticalLayout_16.setExpandRatio(horizontalLayout_14, 1.0f);
        verticalLayout_16.setComponentAlignment(horizontalLayout_14, new Alignment(34));
        
        // horizontalLayout_17
        horizontalLayout_17 = buildHorizontalLayout_17();
        verticalLayout_16.addComponent(horizontalLayout_17);
        verticalLayout_16.setExpandRatio(horizontalLayout_17, 1.0f);
        verticalLayout_16.setComponentAlignment(horizontalLayout_17, new Alignment(34));
        
        return verticalLayout_16;
    }

    @AutoGenerated
    private HorizontalLayout buildHorizontalLayout_7() {
        // common part: create layout
        horizontalLayout_7 = new HorizontalLayout();
        horizontalLayout_7.setImmediate(false);
        horizontalLayout_7.setWidth("100.0%");
        horizontalLayout_7.setHeight("100.0%");
        horizontalLayout_7.setMargin(false);
        
        // ns_status
        ns_status = new NativeSelect();
        ns_status.setCaption("Protokoll Status");
        ns_status.setImmediate(true);
        ns_status.setWidth("130px");
        ns_status.setHeight("-1px");
        horizontalLayout_7.addComponent(ns_status);
        horizontalLayout_7.setExpandRatio(ns_status, 3.0f);
        horizontalLayout_7.setComponentAlignment(ns_status, new Alignment(33));
        
        return horizontalLayout_7;
    }

    @AutoGenerated
    private HorizontalLayout buildHorizontalLayout_14() {
        // common part: create layout
        horizontalLayout_14 = new HorizontalLayout();
        horizontalLayout_14.setImmediate(false);
        horizontalLayout_14.setWidth("100.0%");
        horizontalLayout_14.setHeight("100.0%");
        horizontalLayout_14.setMargin(false);
        
        // cbx_arzt
        cbx_arzt = new ComboBox();
        cbx_arzt.setCaption("Delegierender Arzt");
        cbx_arzt.setImmediate(false);
        cbx_arzt.setWidth("170px");
        cbx_arzt.setHeight("-1px");
        horizontalLayout_14.addComponent(cbx_arzt);
        horizontalLayout_14.setComponentAlignment(cbx_arzt, new Alignment(33));
        
        return horizontalLayout_14;
    }

    @AutoGenerated
    private HorizontalLayout buildHorizontalLayout_17() {
        // common part: create layout
        horizontalLayout_17 = new HorizontalLayout();
        horizontalLayout_17.setImmediate(false);
        horizontalLayout_17.setWidth("100.0%");
        horizontalLayout_17.setHeight("100.0%");
        horizontalLayout_17.setMargin(false);
        
        // cb_regionalmanager_ok
        cb_regionalmanager_ok = new CheckBox();
        cb_regionalmanager_ok.setCaption("Regionalleiter Ok");
        cb_regionalmanager_ok.setImmediate(false);
        cb_regionalmanager_ok.setWidth("-1px");
        cb_regionalmanager_ok.setHeight("-1px");
        horizontalLayout_17.addComponent(cb_regionalmanager_ok);
        horizontalLayout_17.setComponentAlignment(cb_regionalmanager_ok, new Alignment(33));
        
        return horizontalLayout_17;
    }

    @AutoGenerated
    private HorizontalLayout buildHorizontalLayout_3() {
        // common part: create layout
        horizontalLayout_3 = new HorizontalLayout();
        horizontalLayout_3.setImmediate(false);
        horizontalLayout_3.setWidth("100.0%");
        horizontalLayout_3.setHeight("100.0%");
        horizontalLayout_3.setMargin(false);
        
        // pan_abrechnungsdaten
        pan_abrechnungsdaten = buildPan_abrechnungsdaten();
        horizontalLayout_3.addComponent(pan_abrechnungsdaten);
        horizontalLayout_3.setExpandRatio(pan_abrechnungsdaten, 0.74f);
        horizontalLayout_3.setComponentAlignment(pan_abrechnungsdaten, new Alignment(48));
        
        // pan_BesD
        pan_BesD = buildPan_BesD();
        horizontalLayout_3.addComponent(pan_BesD);
        horizontalLayout_3.setExpandRatio(pan_BesD, 4.0f);
        
        return horizontalLayout_3;
    }

    @AutoGenerated
    private Panel buildPan_abrechnungsdaten() {
        // common part: create layout
        pan_abrechnungsdaten = new Panel();
        pan_abrechnungsdaten.setCaption("Abrechnungsdaten");
        pan_abrechnungsdaten.setImmediate(false);
        pan_abrechnungsdaten.setWidth("100.0%");
        pan_abrechnungsdaten.setHeight("100.0%");
        
        // verticalLayout_5
        verticalLayout_5 = buildVerticalLayout_5();
        pan_abrechnungsdaten.setContent(verticalLayout_5);
        
        return pan_abrechnungsdaten;
    }

    @AutoGenerated
    private VerticalLayout buildVerticalLayout_5() {
        // common part: create layout
        verticalLayout_5 = new VerticalLayout();
        verticalLayout_5.setImmediate(false);
        verticalLayout_5.setWidth("100.0%");
        verticalLayout_5.setHeight("100.0%");
        verticalLayout_5.setMargin(false);
        verticalLayout_5.setSpacing(true);
        
        // gridLayout_2
        gridLayout_2 = buildGridLayout_2();
        verticalLayout_5.addComponent(gridLayout_2);
        verticalLayout_5.setExpandRatio(gridLayout_2, 1.0f);
        verticalLayout_5.setComponentAlignment(gridLayout_2, new Alignment(48));
        
        return verticalLayout_5;
    }

    @AutoGenerated
    private GridLayout buildGridLayout_2() {
        // common part: create layout
        gridLayout_2 = new GridLayout();
        gridLayout_2.setImmediate(false);
        gridLayout_2.setWidth("-1px");
        gridLayout_2.setHeight("95.0%");
        gridLayout_2.setMargin(false);
        gridLayout_2.setRows(4);
        
        // vl_nurse
        vl_nurse = buildVl_nurse();
        gridLayout_2.addComponent(vl_nurse, 0, 0);
        gridLayout_2.setComponentAlignment(vl_nurse, new Alignment(33));
        
        // btn_km_ber
        btn_km_ber = new Button();
        btn_km_ber.setImmediate(true);
        btn_km_ber.setWidth("-1px");
        btn_km_ber.setHeight("-1px");
        gridLayout_2.addComponent(btn_km_ber, 0, 1);
        gridLayout_2.setComponentAlignment(btn_km_ber, new Alignment(20));
        
        // vl_cs
        vl_cs = buildVl_cs();
        gridLayout_2.addComponent(vl_cs, 0, 2);
        gridLayout_2.setComponentAlignment(vl_cs, new Alignment(33));
        
        // verticalLayout_8
        verticalLayout_8 = buildVerticalLayout_8();
        gridLayout_2.addComponent(verticalLayout_8, 0, 3);
        
        return gridLayout_2;
    }

    @AutoGenerated
    private VerticalLayout buildVl_nurse() {
        // common part: create layout
        vl_nurse = new VerticalLayout();
        vl_nurse.setCaption("Fahrzeit Nurse");
        vl_nurse.setImmediate(false);
        vl_nurse.setWidth("-1px");
        vl_nurse.setHeight("-1px");
        vl_nurse.setMargin(false);
        vl_nurse.setSpacing(true);
        
        // horizontalLayout_10
        horizontalLayout_10 = buildHorizontalLayout_10();
        vl_nurse.addComponent(horizontalLayout_10);
        
        // txt_Gesamte_Km
        txt_Gesamte_Km = new TextField();
        txt_Gesamte_Km.setCaption("Gesamte km");
        txt_Gesamte_Km.setImmediate(false);
        txt_Gesamte_Km.setWidth("100px");
        txt_Gesamte_Km.setHeight("-1px");
        vl_nurse.addComponent(txt_Gesamte_Km);
        
        return vl_nurse;
    }

    @AutoGenerated
    private HorizontalLayout buildHorizontalLayout_10() {
        // common part: create layout
        horizontalLayout_10 = new HorizontalLayout();
        horizontalLayout_10.setImmediate(false);
        horizontalLayout_10.setWidth("-1px");
        horizontalLayout_10.setHeight("-1px");
        horizontalLayout_10.setMargin(false);
        horizontalLayout_10.setSpacing(true);
        
        // ns_Stunden
        ns_Stunden = new NativeSelect();
        ns_Stunden.setCaption("Stunden");
        ns_Stunden.setImmediate(false);
        ns_Stunden.setWidth("-1px");
        ns_Stunden.setHeight("-1px");
        horizontalLayout_10.addComponent(ns_Stunden);
        
        // ns_min
        ns_min = new NativeSelect();
        ns_min.setCaption("Minuten");
        ns_min.setImmediate(false);
        ns_min.setWidth("-1px");
        ns_min.setHeight("-1px");
        horizontalLayout_10.addComponent(ns_min);
        
        return horizontalLayout_10;
    }

    @AutoGenerated
    private VerticalLayout buildVl_cs() {
        // common part: create layout
        vl_cs = new VerticalLayout();
        vl_cs.setCaption("Abgerechnet");
        vl_cs.setImmediate(false);
        vl_cs.setWidth("-1px");
        vl_cs.setHeight("-1px");
        vl_cs.setMargin(false);
        vl_cs.setSpacing(true);
        
        // horizontalLayout_5
        horizontalLayout_5 = buildHorizontalLayout_5();
        vl_cs.addComponent(horizontalLayout_5);
        
        // txt_Abrechnungs_Km
        txt_Abrechnungs_Km = new TextField();
        txt_Abrechnungs_Km.setCaption("Abgerechnete km");
        txt_Abrechnungs_Km.setImmediate(false);
        txt_Abrechnungs_Km.setWidth("100px");
        txt_Abrechnungs_Km.setHeight("-1px");
        vl_cs.addComponent(txt_Abrechnungs_Km);
        
        return vl_cs;
    }

    @AutoGenerated
    private HorizontalLayout buildHorizontalLayout_5() {
        // common part: create layout
        horizontalLayout_5 = new HorizontalLayout();
        horizontalLayout_5.setImmediate(false);
        horizontalLayout_5.setWidth("-1px");
        horizontalLayout_5.setHeight("-1px");
        horizontalLayout_5.setMargin(false);
        horizontalLayout_5.setSpacing(true);
        
        // ns_Abrechnung_Stunden
        ns_Abrechnung_Stunden = new NativeSelect();
        ns_Abrechnung_Stunden.setCaption("Stunden");
        ns_Abrechnung_Stunden.setImmediate(false);
        ns_Abrechnung_Stunden.setWidth("-1px");
        ns_Abrechnung_Stunden.setHeight("-1px");
        horizontalLayout_5.addComponent(ns_Abrechnung_Stunden);
        
        // ns_Abrechnung_Minuten
        ns_Abrechnung_Minuten = new NativeSelect();
        ns_Abrechnung_Minuten.setCaption("Minuten");
        ns_Abrechnung_Minuten.setImmediate(false);
        ns_Abrechnung_Minuten.setWidth("-1px");
        ns_Abrechnung_Minuten.setHeight("-1px");
        horizontalLayout_5.addComponent(ns_Abrechnung_Minuten);
        
        return horizontalLayout_5;
    }

    @AutoGenerated
    private VerticalLayout buildVerticalLayout_8() {
        // common part: create layout
        verticalLayout_8 = new VerticalLayout();
        verticalLayout_8.setImmediate(false);
        verticalLayout_8.setWidth("-1px");
        verticalLayout_8.setHeight("-1px");
        verticalLayout_8.setMargin(false);
        verticalLayout_8.setSpacing(true);
        
        // cb_admin
        cb_admin = new CheckBox();
        cb_admin.setCaption("Admin Pauschale");
        cb_admin.setImmediate(false);
        cb_admin.setWidth("-1px");
        cb_admin.setHeight("-1px");
        verticalLayout_8.addComponent(cb_admin);
        
        // cb_parallel
        cb_parallel = new CheckBox();
        cb_parallel.setCaption("Parallel-Infusion");
        cb_parallel.setImmediate(false);
        cb_parallel.setWidth("-1px");
        cb_parallel.setHeight("-1px");
        verticalLayout_8.addComponent(cb_parallel);
        
        return verticalLayout_8;
    }

    @AutoGenerated
    private TabSheet buildPan_BesD() {
        // common part: create layout
        pan_BesD = new TabSheet();
        pan_BesD.setCaption("Besuchsdetails");
        pan_BesD.setImmediate(true);
        pan_BesD.setWidth("100.0%");
        pan_BesD.setHeight("100.0%");
        
        // vl_preinfo
        vl_preinfo = buildVl_preinfo();
        pan_BesD.addTab(vl_preinfo, "Vorabinformationen", null);
        
        // vl_inf
        vl_inf = buildVl_inf();
        pan_BesD.addTab(vl_inf, "Infusion", null);
        
        // gl_vitals
        gl_vitals = buildGl_vitals();
        pan_BesD.addTab(gl_vitals, "Vitalzeichen", null);
        
        // vl_events
        vl_events = buildVl_events();
        pan_BesD.addTab(vl_events, "Unerwünschte Ereignisse", null);
        
        // vl_comments
        vl_comments = buildVl_comments();
        pan_BesD.addTab(vl_comments, "Kommentare", null);
        
        return pan_BesD;
    }

    @AutoGenerated
    private VerticalLayout buildVl_preinfo() {
        // common part: create layout
        vl_preinfo = new VerticalLayout();
        vl_preinfo.setImmediate(false);
        vl_preinfo.setWidth("100.0%");
        vl_preinfo.setHeight("100.0%");
        vl_preinfo.setMargin(true);
        
        // horizontalLayout_13
        horizontalLayout_13 = buildHorizontalLayout_13();
        vl_preinfo.addComponent(horizontalLayout_13);
        vl_preinfo.setExpandRatio(horizontalLayout_13, 1.0f);
        
        // horizontalLayout_20
        horizontalLayout_20 = buildHorizontalLayout_20();
        vl_preinfo.addComponent(horizontalLayout_20);
        vl_preinfo.setExpandRatio(horizontalLayout_20, 3.0f);
        
        return vl_preinfo;
    }

    @AutoGenerated
    private HorizontalLayout buildHorizontalLayout_13() {
        // common part: create layout
        horizontalLayout_13 = new HorizontalLayout();
        horizontalLayout_13.setImmediate(false);
        horizontalLayout_13.setWidth("100.0%");
        horizontalLayout_13.setHeight("-1px");
        horizontalLayout_13.setMargin(false);
        
        // cbx_type
        cbx_type = new ComboBox();
        cbx_type.setCaption("Infusionstyp");
        cbx_type.setImmediate(false);
        cbx_type.setWidth("-1px");
        cbx_type.setHeight("-1px");
        horizontalLayout_13.addComponent(cbx_type);
        horizontalLayout_13.setExpandRatio(cbx_type, 1.0f);
        
        // verticalLayout_7
        verticalLayout_7 = buildVerticalLayout_7();
        horizontalLayout_13.addComponent(verticalLayout_7);
        horizontalLayout_13.setExpandRatio(verticalLayout_7, 1.0f);
        horizontalLayout_13.setComponentAlignment(verticalLayout_7, new Alignment(33));
        
        return horizontalLayout_13;
    }

    @AutoGenerated
    private VerticalLayout buildVerticalLayout_7() {
        // common part: create layout
        verticalLayout_7 = new VerticalLayout();
        verticalLayout_7.setImmediate(false);
        verticalLayout_7.setWidth("-1px");
        verticalLayout_7.setHeight("-1px");
        verticalLayout_7.setMargin(false);
        
        // txt_pat_weigth
        txt_pat_weigth = new TextField();
        txt_pat_weigth.setCaption("Körpergewicht");
        txt_pat_weigth.setImmediate(false);
        txt_pat_weigth.setWidth("-1px");
        txt_pat_weigth.setHeight("-1px");
        verticalLayout_7.addComponent(txt_pat_weigth);
        
        // lbl_weight
        lbl_weight = new Label();
        lbl_weight.setImmediate(false);
        lbl_weight.setWidth("-1px");
        lbl_weight.setHeight("-1px");
        lbl_weight.setValue("Vor 1. und 13. Heiminfusion, ab 12 Monaten 1x jährlich");
        verticalLayout_7.addComponent(lbl_weight);
        
        return verticalLayout_7;
    }

    @AutoGenerated
    private HorizontalLayout buildHorizontalLayout_20() {
        // common part: create layout
        horizontalLayout_20 = new HorizontalLayout();
        horizontalLayout_20.setImmediate(false);
        horizontalLayout_20.setWidth("100.0%");
        horizontalLayout_20.setHeight("100.0%");
        horizontalLayout_20.setMargin(false);
        horizontalLayout_20.setSpacing(true);
        
        // panel_1
        panel_1 = buildPanel_1();
        horizontalLayout_20.addComponent(panel_1);
        
        // panel_2
        panel_2 = buildPanel_2();
        horizontalLayout_20.addComponent(panel_2);
        
        return horizontalLayout_20;
    }

    @AutoGenerated
    private Panel buildPanel_1() {
        // common part: create layout
        panel_1 = new Panel();
        panel_1.setCaption("Prämedikation");
        panel_1.setImmediate(false);
        panel_1.setWidth("100.0%");
        panel_1.setHeight("100.0%");
        
        // gridLayout_1
        gridLayout_1 = buildGridLayout_1();
        panel_1.setContent(gridLayout_1);
        
        return panel_1;
    }

    @AutoGenerated
    private GridLayout buildGridLayout_1() {
        // common part: create layout
        gridLayout_1 = new GridLayout();
        gridLayout_1.setImmediate(false);
        gridLayout_1.setWidth("100.0%");
        gridLayout_1.setHeight("100.0%");
        gridLayout_1.setMargin(true);
        gridLayout_1.setColumns(2);
        gridLayout_1.setRows(4);
        
        // lbl_premed
        lbl_premed = new Label();
        lbl_premed.setImmediate(false);
        lbl_premed.setWidth("-1px");
        lbl_premed.setHeight("-1px");
        lbl_premed.setValue("Medikation, Name und Dosis");
        gridLayout_1.addComponent(lbl_premed, 0, 0);
        
        // lbl_premedtime
        lbl_premedtime = new Label();
        lbl_premedtime.setImmediate(false);
        lbl_premedtime.setWidth("-1px");
        lbl_premedtime.setHeight("-1px");
        lbl_premedtime.setValue("Uhrzeit der Medikationsgabe");
        gridLayout_1.addComponent(lbl_premedtime, 1, 0);
        
        // txt_premed_1
        txt_premed_1 = new TextField();
        txt_premed_1.setCaption("Medikament 1");
        txt_premed_1.setImmediate(false);
        txt_premed_1.setWidth("-1px");
        txt_premed_1.setHeight("-1px");
        gridLayout_1.addComponent(txt_premed_1, 0, 1);
        
        // txt_premed_1_time
        txt_premed_1_time = new TextField();
        txt_premed_1_time.setCaption(" ");
        txt_premed_1_time.setImmediate(false);
        txt_premed_1_time.setWidth("64px");
        txt_premed_1_time.setHeight("-1px");
        gridLayout_1.addComponent(txt_premed_1_time, 1, 1);
        
        // txt_premed_2
        txt_premed_2 = new TextField();
        txt_premed_2.setCaption("Medikament 2");
        txt_premed_2.setImmediate(false);
        txt_premed_2.setWidth("-1px");
        txt_premed_2.setHeight("-1px");
        gridLayout_1.addComponent(txt_premed_2, 0, 2);
        
        // txt_premed_2_time
        txt_premed_2_time = new TextField();
        txt_premed_2_time.setCaption(" ");
        txt_premed_2_time.setImmediate(false);
        txt_premed_2_time.setWidth("64px");
        txt_premed_2_time.setHeight("-1px");
        gridLayout_1.addComponent(txt_premed_2_time, 1, 2);
        
        // txt_premed_3
        txt_premed_3 = new TextField();
        txt_premed_3.setCaption("Medikament 3");
        txt_premed_3.setImmediate(false);
        txt_premed_3.setWidth("-1px");
        txt_premed_3.setHeight("-1px");
        gridLayout_1.addComponent(txt_premed_3, 0, 3);
        
        // txt_premed_3_time
        txt_premed_3_time = new TextField();
        txt_premed_3_time.setCaption(" ");
        txt_premed_3_time.setImmediate(false);
        txt_premed_3_time.setWidth("64px");
        txt_premed_3_time.setHeight("-1px");
        gridLayout_1.addComponent(txt_premed_3_time, 1, 3);
        
        return gridLayout_1;
    }

    @AutoGenerated
    private Panel buildPanel_2() {
        // common part: create layout
        panel_2 = new Panel();
        panel_2.setCaption("Medikamentenbestand");
        panel_2.setImmediate(false);
        panel_2.setWidth("100.0%");
        panel_2.setHeight("100.0%");
        
        // verticalLayout_21
        verticalLayout_21 = buildVerticalLayout_21();
        panel_2.setContent(verticalLayout_21);
        
        return panel_2;
    }

    @AutoGenerated
    private VerticalLayout buildVerticalLayout_21() {
        // common part: create layout
        verticalLayout_21 = new VerticalLayout();
        verticalLayout_21.setImmediate(false);
        verticalLayout_21.setWidth("100.0%");
        verticalLayout_21.setHeight("100.0%");
        verticalLayout_21.setMargin(true);
        
        // verticalLayout_20
        verticalLayout_20 = buildVerticalLayout_20();
        verticalLayout_21.addComponent(verticalLayout_20);
        verticalLayout_21.setExpandRatio(verticalLayout_20, 1.0f);
        verticalLayout_21.setComponentAlignment(verticalLayout_20, new Alignment(33));
        
        // horizontalLayout_22
        horizontalLayout_22 = new HorizontalLayout();
        horizontalLayout_22.setImmediate(false);
        horizontalLayout_22.setWidth("100.0%");
        horizontalLayout_22.setHeight("-1px");
        horizontalLayout_22.setMargin(false);
        verticalLayout_21.addComponent(horizontalLayout_22);
        verticalLayout_21.setExpandRatio(horizontalLayout_22, 1.0f);
        verticalLayout_21.setComponentAlignment(horizontalLayout_22, new Alignment(33));
        
        return verticalLayout_21;
    }

    @AutoGenerated
    private VerticalLayout buildVerticalLayout_20() {
        // common part: create layout
        verticalLayout_20 = new VerticalLayout();
        verticalLayout_20.setImmediate(false);
        verticalLayout_20.setWidth("-1px");
        verticalLayout_20.setHeight("-1px");
        verticalLayout_20.setMargin(false);
        verticalLayout_20.setSpacing(true);
        
        // lbl_remaining
        lbl_remaining = new Label();
        lbl_remaining.setStyleName("v-panel-caption");
        lbl_remaining.setImmediate(false);
        lbl_remaining.setWidth("-1px");
        lbl_remaining.setHeight("-1px");
        lbl_remaining.setValue("Restbestand Ampullen nach dieser Infusion");
        verticalLayout_20.addComponent(lbl_remaining);
        
        // horizontalLayout_19
        horizontalLayout_19 = buildHorizontalLayout_19();
        verticalLayout_20.addComponent(horizontalLayout_19);
        verticalLayout_20.setExpandRatio(horizontalLayout_19, 1.0f);
        
        return verticalLayout_20;
    }

    @AutoGenerated
    private HorizontalLayout buildHorizontalLayout_19() {
        // common part: create layout
        horizontalLayout_19 = new HorizontalLayout();
        horizontalLayout_19.setImmediate(false);
        horizontalLayout_19.setWidth("-1px");
        horizontalLayout_19.setHeight("-1px");
        horizontalLayout_19.setMargin(false);
        horizontalLayout_19.setSpacing(true);
        
        // txt_remaining_patient
        txt_remaining_patient = new TextField();
        txt_remaining_patient.setCaption("beim Patient");
        txt_remaining_patient.setImmediate(false);
        txt_remaining_patient.setWidth("-1px");
        txt_remaining_patient.setHeight("-1px");
        horizontalLayout_19.addComponent(txt_remaining_patient);
        
        // txt_remaining_nurse
        txt_remaining_nurse = new TextField();
        txt_remaining_nurse.setCaption("bei der Nurse");
        txt_remaining_nurse.setImmediate(false);
        txt_remaining_nurse.setWidth("-1px");
        txt_remaining_nurse.setHeight("-1px");
        horizontalLayout_19.addComponent(txt_remaining_nurse);
        
        return horizontalLayout_19;
    }

    @AutoGenerated
    private VerticalLayout buildVl_inf() {
        // common part: create layout
        vl_inf = new VerticalLayout();
        vl_inf.setImmediate(false);
        vl_inf.setWidth("100.0%");
        vl_inf.setHeight("100.0%");
        vl_inf.setMargin(true);
        
        // hl_inf_numbers
        hl_inf_numbers = buildHl_inf_numbers();
        vl_inf.addComponent(hl_inf_numbers);
        vl_inf.setExpandRatio(hl_inf_numbers, 6.0f);
        
        return vl_inf;
    }

    @AutoGenerated
    private HorizontalLayout buildHl_inf_numbers() {
        // common part: create layout
        hl_inf_numbers = new HorizontalLayout();
        hl_inf_numbers.setImmediate(false);
        hl_inf_numbers.setWidth("100.0%");
        hl_inf_numbers.setHeight("100.0%");
        hl_inf_numbers.setMargin(false);
        hl_inf_numbers.setSpacing(true);
        
        // verticalLayout_22
        verticalLayout_22 = buildVerticalLayout_22();
        hl_inf_numbers.addComponent(verticalLayout_22);
        hl_inf_numbers.setExpandRatio(verticalLayout_22, 1.0f);
        
        // horizontalLayout_25
        horizontalLayout_25 = buildHorizontalLayout_25();
        hl_inf_numbers.addComponent(horizontalLayout_25);
        hl_inf_numbers.setExpandRatio(horizontalLayout_25, 1.0f);
        
        return hl_inf_numbers;
    }

    @AutoGenerated
    private VerticalLayout buildVerticalLayout_22() {
        // common part: create layout
        verticalLayout_22 = new VerticalLayout();
        verticalLayout_22.setImmediate(false);
        verticalLayout_22.setWidth("100.0%");
        verticalLayout_22.setHeight("100.0%");
        verticalLayout_22.setMargin(false);
        verticalLayout_22.setSpacing(true);
        
        // horizontalLayout_24
        horizontalLayout_24 = buildHorizontalLayout_24();
        verticalLayout_22.addComponent(horizontalLayout_24);
        verticalLayout_22.setExpandRatio(horizontalLayout_24, 1.0f);
        
        // horizontalLayout_23
        horizontalLayout_23 = buildHorizontalLayout_23();
        verticalLayout_22.addComponent(horizontalLayout_23);
        verticalLayout_22.setExpandRatio(horizontalLayout_23, 1.0f);
        
        // gridLayout_3
        gridLayout_3 = buildGridLayout_3();
        verticalLayout_22.addComponent(gridLayout_3);
        verticalLayout_22.setExpandRatio(gridLayout_3, 6.0f);
        verticalLayout_22.setComponentAlignment(gridLayout_3, new Alignment(9));
        
        return verticalLayout_22;
    }

    @AutoGenerated
    private HorizontalLayout buildHorizontalLayout_24() {
        // common part: create layout
        horizontalLayout_24 = new HorizontalLayout();
        horizontalLayout_24.setImmediate(false);
        horizontalLayout_24.setWidth("100.0%");
        horizontalLayout_24.setHeight("40px");
        horizontalLayout_24.setMargin(false);
        horizontalLayout_24.setSpacing(true);
        
        // txt_spot_count
        txt_spot_count = new TextField();
        txt_spot_count.setCaption("Punktionsversuche");
        txt_spot_count.setImmediate(false);
        txt_spot_count.setWidth("60px");
        txt_spot_count.setHeight("-1px");
        horizontalLayout_24.addComponent(txt_spot_count);
        horizontalLayout_24.setExpandRatio(txt_spot_count, 44.0f);
        
        // cbx_needle
        cbx_needle = new ComboBox();
        cbx_needle.setCaption("Punktionsnadel");
        cbx_needle.setImmediate(false);
        cbx_needle.setWidth("150px");
        cbx_needle.setHeight("-1px");
        horizontalLayout_24.addComponent(cbx_needle);
        horizontalLayout_24.setExpandRatio(cbx_needle, 56.0f);
        
        return horizontalLayout_24;
    }

    @AutoGenerated
    private HorizontalLayout buildHorizontalLayout_23() {
        // common part: create layout
        horizontalLayout_23 = new HorizontalLayout();
        horizontalLayout_23.setImmediate(false);
        horizontalLayout_23.setWidth("100.0%");
        horizontalLayout_23.setHeight("40px");
        horizontalLayout_23.setMargin(false);
        
        // txt_port_details
        txt_port_details = new TextField();
        txt_port_details.setCaption("Port: Name und Größe");
        txt_port_details.setImmediate(false);
        txt_port_details.setWidth("-1px");
        txt_port_details.setHeight("-1px");
        horizontalLayout_23.addComponent(txt_port_details);
        
        // txt_port_block
        txt_port_block = new TextField();
        txt_port_block.setCaption("Port: Block");
        txt_port_block.setImmediate(false);
        txt_port_block.setWidth("-1px");
        txt_port_block.setHeight("-1px");
        horizontalLayout_23.addComponent(txt_port_block);
        
        return horizontalLayout_23;
    }

    @AutoGenerated
    private GridLayout buildGridLayout_3() {
        // common part: create layout
        gridLayout_3 = new GridLayout();
        gridLayout_3.setImmediate(false);
        gridLayout_3.setWidth("100.0%");
        gridLayout_3.setHeight("100.0%");
        gridLayout_3.setMargin(false);
        gridLayout_3.setSpacing(true);
        gridLayout_3.setColumns(2);
        gridLayout_3.setRows(6);
        
        // lbl_vpriv
        lbl_vpriv = new Label();
        lbl_vpriv.setStyleName("v-panel-caption");
        lbl_vpriv.setImmediate(false);
        lbl_vpriv.setWidth("-1px");
        lbl_vpriv.setHeight("-1px");
        lbl_vpriv.setValue("Vpriv verabreicht");
        gridLayout_3.addComponent(lbl_vpriv, 0, 0);
        gridLayout_3.setComponentAlignment(lbl_vpriv, new Alignment(33));
        
        // hl_repl
        hl_repl = buildHl_repl();
        gridLayout_3.addComponent(hl_repl, 1, 0);
        gridLayout_3.setComponentAlignment(hl_repl, new Alignment(33));
        
        // lbl_adm_vpriv_vol
        lbl_adm_vpriv_vol = new Label();
        lbl_adm_vpriv_vol.setStyleName("v-panel-caption");
        lbl_adm_vpriv_vol.setImmediate(false);
        lbl_adm_vpriv_vol.setWidth("-1px");
        lbl_adm_vpriv_vol.setHeight("-1px");
        lbl_adm_vpriv_vol.setValue("Gesamt-Infusionsvolumen");
        gridLayout_3.addComponent(lbl_adm_vpriv_vol, 0, 1);
        gridLayout_3.setComponentAlignment(lbl_adm_vpriv_vol, new Alignment(33));
        
        // hl_rep_total
        hl_rep_total = buildHl_rep_total();
        gridLayout_3.addComponent(hl_rep_total, 1, 1);
        gridLayout_3.setComponentAlignment(hl_rep_total, new Alignment(33));
        
        // lbl_inf_times
        lbl_inf_times = new Label();
        lbl_inf_times.setStyleName("v-panel-caption");
        lbl_inf_times.setImmediate(false);
        lbl_inf_times.setWidth("-1px");
        lbl_inf_times.setHeight("-1px");
        lbl_inf_times.setValue("Infusionszeiten");
        gridLayout_3.addComponent(lbl_inf_times, 0, 2);
        gridLayout_3.setComponentAlignment(lbl_inf_times, new Alignment(33));
        
        // horizontalLayout_15
        horizontalLayout_15 = buildHorizontalLayout_15();
        gridLayout_3.addComponent(horizontalLayout_15, 1, 2);
        gridLayout_3.setComponentAlignment(horizontalLayout_15, new Alignment(33));
        
        // lbl_inf_total_duration
        lbl_inf_total_duration = new Label();
        lbl_inf_total_duration.setImmediate(false);
        lbl_inf_total_duration.setWidth("-1px");
        lbl_inf_total_duration.setHeight("-1px");
        lbl_inf_total_duration.setValue("Gesamt-Infusionsdauer");
        gridLayout_3.addComponent(lbl_inf_total_duration, 0, 3);
        gridLayout_3.setComponentAlignment(lbl_inf_total_duration, new Alignment(33));
        
        // horizontalLayout_12
        horizontalLayout_12 = buildHorizontalLayout_12();
        gridLayout_3.addComponent(horizontalLayout_12, 1, 3);
        gridLayout_3.setComponentAlignment(horizontalLayout_12, new Alignment(33));
        
        // lbl_inf_rate
        lbl_inf_rate = new Label();
        lbl_inf_rate.setImmediate(false);
        lbl_inf_rate.setWidth("-1px");
        lbl_inf_rate.setHeight("-1px");
        lbl_inf_rate.setValue("Infusionsgeschwindigkeit");
        gridLayout_3.addComponent(lbl_inf_rate, 0, 4);
        gridLayout_3.setComponentAlignment(lbl_inf_rate, new Alignment(33));
        
        // horizontalLayout_6
        horizontalLayout_6 = buildHorizontalLayout_6();
        gridLayout_3.addComponent(horizontalLayout_6, 1, 4);
        gridLayout_3.setComponentAlignment(horizontalLayout_6, new Alignment(33));
        
        // lbl_prescribed_dose
        lbl_prescribed_dose = new Label();
        lbl_prescribed_dose.setImmediate(false);
        lbl_prescribed_dose.setWidth("-1px");
        lbl_prescribed_dose.setHeight("-1px");
        lbl_prescribed_dose.setValue("verord. Dosis verabreicht?");
        gridLayout_3.addComponent(lbl_prescribed_dose, 0, 5);
        
        // layout_prescribed_dose
        layout_prescribed_dose = buildLayout_prescribed_dose();
        gridLayout_3.addComponent(layout_prescribed_dose, 1, 5);
        
        return gridLayout_3;
    }

    @AutoGenerated
    private HorizontalLayout buildHl_repl() {
        // common part: create layout
        hl_repl = new HorizontalLayout();
        hl_repl.setImmediate(false);
        hl_repl.setWidth("-1px");
        hl_repl.setHeight("-1px");
        hl_repl.setMargin(false);
        hl_repl.setSpacing(true);
        
        // txt_adm_vpriv_mg
        txt_adm_vpriv_mg = new TextField();
        txt_adm_vpriv_mg.setImmediate(false);
        txt_adm_vpriv_mg.setWidth("64px");
        txt_adm_vpriv_mg.setHeight("-1px");
        hl_repl.addComponent(txt_adm_vpriv_mg);
        hl_repl.setComponentAlignment(txt_adm_vpriv_mg, new Alignment(33));
        
        // lbl_units
        lbl_units = new Label();
        lbl_units.setImmediate(false);
        lbl_units.setWidth("-1px");
        lbl_units.setHeight("-1px");
        lbl_units.setValue("IE/U");
        hl_repl.addComponent(lbl_units);
        hl_repl.setComponentAlignment(lbl_units, new Alignment(33));
        
        // txt_adm_vpriv_amp
        txt_adm_vpriv_amp = new TextField();
        txt_adm_vpriv_amp.setImmediate(false);
        txt_adm_vpriv_amp.setWidth("64px");
        txt_adm_vpriv_amp.setHeight("-1px");
        hl_repl.addComponent(txt_adm_vpriv_amp);
        hl_repl.setComponentAlignment(txt_adm_vpriv_amp, new Alignment(33));
        
        // lbl_amp
        lbl_amp = new Label();
        lbl_amp.setImmediate(false);
        lbl_amp.setWidth("-1px");
        lbl_amp.setHeight("-1px");
        lbl_amp.setValue("Amp.");
        hl_repl.addComponent(lbl_amp);
        hl_repl.setComponentAlignment(lbl_amp, new Alignment(33));
        
        return hl_repl;
    }

    @AutoGenerated
    private HorizontalLayout buildHl_rep_total() {
        // common part: create layout
        hl_rep_total = new HorizontalLayout();
        hl_rep_total.setImmediate(false);
        hl_rep_total.setWidth("-1px");
        hl_rep_total.setHeight("-1px");
        hl_rep_total.setMargin(false);
        hl_rep_total.setSpacing(true);
        
        // txt_adm_vpriv_vol
        txt_adm_vpriv_vol = new TextField();
        txt_adm_vpriv_vol.setImmediate(false);
        txt_adm_vpriv_vol.setWidth("64px");
        txt_adm_vpriv_vol.setHeight("-1px");
        hl_rep_total.addComponent(txt_adm_vpriv_vol);
        hl_rep_total.setComponentAlignment(txt_adm_vpriv_vol, new Alignment(33));
        
        // lbl_adm_unit
        lbl_adm_unit = new Label();
        lbl_adm_unit.setImmediate(false);
        lbl_adm_unit.setWidth("-1px");
        lbl_adm_unit.setHeight("-1px");
        lbl_adm_unit.setValue("ml");
        hl_rep_total.addComponent(lbl_adm_unit);
        hl_rep_total.setComponentAlignment(lbl_adm_unit, new Alignment(33));
        
        // hl_balance
        hl_balance = buildHl_balance();
        hl_rep_total.addComponent(hl_balance);
        hl_rep_total.setComponentAlignment(hl_balance, new Alignment(48));
        
        return hl_rep_total;
    }

    @AutoGenerated
    private HorizontalLayout buildHl_balance() {
        // common part: create layout
        hl_balance = new HorizontalLayout();
        hl_balance.setImmediate(false);
        hl_balance.setWidth("-1px");
        hl_balance.setHeight("-1px");
        hl_balance.setMargin(false);
        
        // productSource
        productSource = new InfusionProductSource();
        productSource.setCaption("Produktquelle");
        productSource.setImmediate(false);
        productSource.setWidth("90px");
        productSource.setHeight("-1px");
        hl_balance.addComponent(productSource);
        
        return hl_balance;
    }

    @AutoGenerated
    private HorizontalLayout buildHorizontalLayout_15() {
        // common part: create layout
        horizontalLayout_15 = new HorizontalLayout();
        horizontalLayout_15.setImmediate(false);
        horizontalLayout_15.setWidth("-1px");
        horizontalLayout_15.setHeight("-1px");
        horizontalLayout_15.setMargin(false);
        horizontalLayout_15.setSpacing(true);
        
        // txt_inf_time_start
        txt_inf_time_start = new TextField();
        txt_inf_time_start.setCaption("Start");
        txt_inf_time_start.setImmediate(false);
        txt_inf_time_start.setWidth("64px");
        txt_inf_time_start.setHeight("-1px");
        horizontalLayout_15.addComponent(txt_inf_time_start);
        horizontalLayout_15.setComponentAlignment(txt_inf_time_start, new Alignment(33));
        
        // txt_inf_time_stop
        txt_inf_time_stop = new TextField();
        txt_inf_time_stop.setCaption("Stop");
        txt_inf_time_stop.setImmediate(false);
        txt_inf_time_stop.setWidth("64px");
        txt_inf_time_stop.setHeight("-1px");
        horizontalLayout_15.addComponent(txt_inf_time_stop);
        horizontalLayout_15.setComponentAlignment(txt_inf_time_stop, new Alignment(33));
        
        return horizontalLayout_15;
    }

    @AutoGenerated
    private HorizontalLayout buildHorizontalLayout_12() {
        // common part: create layout
        horizontalLayout_12 = new HorizontalLayout();
        horizontalLayout_12.setImmediate(false);
        horizontalLayout_12.setWidth("-1px");
        horizontalLayout_12.setHeight("-1px");
        horizontalLayout_12.setMargin(false);
        horizontalLayout_12.setSpacing(true);
        
        // txt_inf_total_duration
        txt_inf_total_duration = new TextField();
        txt_inf_total_duration.setImmediate(false);
        txt_inf_total_duration.setWidth("64px");
        txt_inf_total_duration.setHeight("-1px");
        horizontalLayout_12.addComponent(txt_inf_total_duration);
        
        // btn_inf_calc
        btn_inf_calc = new Button();
        btn_inf_calc.setImmediate(true);
        btn_inf_calc.setWidth("-1px");
        btn_inf_calc.setHeight("-1px");
        horizontalLayout_12.addComponent(btn_inf_calc);
        
        return horizontalLayout_12;
    }

    @AutoGenerated
    private HorizontalLayout buildHorizontalLayout_6() {
        // common part: create layout
        horizontalLayout_6 = new HorizontalLayout();
        horizontalLayout_6.setImmediate(false);
        horizontalLayout_6.setWidth("-1px");
        horizontalLayout_6.setHeight("-1px");
        horizontalLayout_6.setMargin(false);
        horizontalLayout_6.setSpacing(true);
        
        // txt_inf_rate
        txt_inf_rate = new TextField();
        txt_inf_rate.setImmediate(false);
        txt_inf_rate.setWidth("64px");
        txt_inf_rate.setHeight("-1px");
        horizontalLayout_6.addComponent(txt_inf_rate);
        horizontalLayout_6.setComponentAlignment(txt_inf_rate, new Alignment(33));
        
        // lbl_inf_rate_unit
        lbl_inf_rate_unit = new Label();
        lbl_inf_rate_unit.setImmediate(false);
        lbl_inf_rate_unit.setWidth("-1px");
        lbl_inf_rate_unit.setHeight("-1px");
        lbl_inf_rate_unit.setValue("ml/Stunde");
        horizontalLayout_6.addComponent(lbl_inf_rate_unit);
        horizontalLayout_6.setComponentAlignment(lbl_inf_rate_unit, new Alignment(33));
        
        return horizontalLayout_6;
    }

    @AutoGenerated
    private VerticalLayout buildLayout_prescribed_dose() {
        // common part: create layout
        layout_prescribed_dose = new VerticalLayout();
        layout_prescribed_dose.setImmediate(false);
        layout_prescribed_dose.setWidth("100.0%");
        layout_prescribed_dose.setHeight("60px");
        layout_prescribed_dose.setMargin(false);
        
        // ns_prescribed_dose
        ns_prescribed_dose = new NativeSelect();
        ns_prescribed_dose.setImmediate(false);
        ns_prescribed_dose.setWidth("-1px");
        ns_prescribed_dose.setHeight("-1px");
        layout_prescribed_dose.addComponent(ns_prescribed_dose);
        
        // txt_prescribed_dose_reason
        txt_prescribed_dose_reason = new TextField();
        txt_prescribed_dose_reason.setCaption("Begründung");
        txt_prescribed_dose_reason.setImmediate(false);
        txt_prescribed_dose_reason.setWidth("100.0%");
        txt_prescribed_dose_reason.setHeight("-1px");
        layout_prescribed_dose.addComponent(txt_prescribed_dose_reason);
        
        return layout_prescribed_dose;
    }

    @AutoGenerated
    private HorizontalLayout buildHorizontalLayout_25() {
        // common part: create layout
        horizontalLayout_25 = new HorizontalLayout();
        horizontalLayout_25.setImmediate(false);
        horizontalLayout_25.setWidth("100.0%");
        horizontalLayout_25.setHeight("100.0%");
        horizontalLayout_25.setMargin(false);
        
        // horizontalLayout_26
        horizontalLayout_26 = buildHorizontalLayout_26();
        horizontalLayout_25.addComponent(horizontalLayout_26);
        horizontalLayout_25.setExpandRatio(horizontalLayout_26, 1.0f);
        
        return horizontalLayout_25;
    }

    @AutoGenerated
    private HorizontalLayout buildHorizontalLayout_26() {
        // common part: create layout
        horizontalLayout_26 = new HorizontalLayout();
        horizontalLayout_26.setImmediate(false);
        horizontalLayout_26.setWidth("100.0%");
        horizontalLayout_26.setHeight("100.0%");
        horizontalLayout_26.setMargin(false);
        horizontalLayout_26.setSpacing(true);
        
        // verticalLayout_10
        verticalLayout_10 = buildVerticalLayout_10();
        horizontalLayout_26.addComponent(verticalLayout_10);
        horizontalLayout_26.setExpandRatio(verticalLayout_10, 4.0f);
        
        // verticalLayout_23
        verticalLayout_23 = buildVerticalLayout_23();
        horizontalLayout_26.addComponent(verticalLayout_23);
        horizontalLayout_26.setExpandRatio(verticalLayout_23, 3.0f);
        
        return horizontalLayout_26;
    }

    @AutoGenerated
    private VerticalLayout buildVerticalLayout_10() {
        // common part: create layout
        verticalLayout_10 = new VerticalLayout();
        verticalLayout_10.setImmediate(false);
        verticalLayout_10.setWidth("100.0%");
        verticalLayout_10.setHeight("100.0%");
        verticalLayout_10.setMargin(false);
        verticalLayout_10.setSpacing(true);
        
        // layout_puncture_placement
        layout_puncture_placement = buildLayout_puncture_placement();
        verticalLayout_10.addComponent(layout_puncture_placement);
        verticalLayout_10.setExpandRatio(layout_puncture_placement, 1.0f);
        
        // layout_puncture_rating
        layout_puncture_rating = buildLayout_puncture_rating();
        verticalLayout_10.addComponent(layout_puncture_rating);
        verticalLayout_10.setExpandRatio(layout_puncture_rating, 2.0f);
        verticalLayout_10.setComponentAlignment(layout_puncture_rating, new Alignment(48));
        
        return verticalLayout_10;
    }

    @AutoGenerated
    private VerticalLayout buildLayout_puncture_placement() {
        // common part: create layout
        layout_puncture_placement = new VerticalLayout();
        layout_puncture_placement.setImmediate(false);
        layout_puncture_placement.setWidth("100.0%");
        layout_puncture_placement.setHeight("-1px");
        layout_puncture_placement.setMargin(false);
        
        // lbl_spot
        lbl_spot = new Label();
        lbl_spot.setStyleName("v-panel-caption");
        lbl_spot.setImmediate(false);
        lbl_spot.setWidth("-1px");
        lbl_spot.setHeight("-1px");
        lbl_spot.setValue("Punktionsort");
        layout_puncture_placement.addComponent(lbl_spot);
        
        // gridLayout_4
        gridLayout_4 = buildGridLayout_4();
        layout_puncture_placement.addComponent(gridLayout_4);
        layout_puncture_placement.setExpandRatio(gridLayout_4, 1.0f);
        
        return layout_puncture_placement;
    }

    @AutoGenerated
    private GridLayout buildGridLayout_4() {
        // common part: create layout
        gridLayout_4 = new GridLayout();
        gridLayout_4.setImmediate(false);
        gridLayout_4.setWidth("100.0%");
        gridLayout_4.setHeight("-1px");
        gridLayout_4.setMargin(false);
        gridLayout_4.setSpacing(true);
        gridLayout_4.setColumns(2);
        gridLayout_4.setRows(3);
        
        // lbl_ellbow
        lbl_ellbow = new Label();
        lbl_ellbow.setImmediate(false);
        lbl_ellbow.setWidth("-1px");
        lbl_ellbow.setHeight("-1px");
        lbl_ellbow.setValue("Ellenbeuge:");
        gridLayout_4.addComponent(lbl_ellbow, 0, 0);
        
        // verticalLayout_11
        verticalLayout_11 = buildVerticalLayout_11();
        gridLayout_4.addComponent(verticalLayout_11, 1, 0);
        
        // lbl_hand
        lbl_hand = new Label();
        lbl_hand.setImmediate(false);
        lbl_hand.setWidth("-1px");
        lbl_hand.setHeight("-1px");
        lbl_hand.setValue("Handrücken:");
        gridLayout_4.addComponent(lbl_hand, 0, 1);
        
        // verticalLayout_12
        verticalLayout_12 = buildVerticalLayout_12();
        gridLayout_4.addComponent(verticalLayout_12, 1, 1);
        
        // lbl_forearm
        lbl_forearm = new Label();
        lbl_forearm.setImmediate(false);
        lbl_forearm.setWidth("-1px");
        lbl_forearm.setHeight("-1px");
        lbl_forearm.setValue("Unterarm:");
        gridLayout_4.addComponent(lbl_forearm, 0, 2);
        
        // verticalLayout_18
        verticalLayout_18 = buildVerticalLayout_18();
        gridLayout_4.addComponent(verticalLayout_18, 1, 2);
        
        return gridLayout_4;
    }

    @AutoGenerated
    private VerticalLayout buildVerticalLayout_11() {
        // common part: create layout
        verticalLayout_11 = new VerticalLayout();
        verticalLayout_11.setImmediate(false);
        verticalLayout_11.setWidth("-1px");
        verticalLayout_11.setHeight("-1px");
        verticalLayout_11.setMargin(false);
        
        // cb_ellbow_right
        cb_ellbow_right = new CheckBox();
        cb_ellbow_right.setCaption("rechts");
        cb_ellbow_right.setImmediate(false);
        cb_ellbow_right.setWidth("-1px");
        cb_ellbow_right.setHeight("-1px");
        verticalLayout_11.addComponent(cb_ellbow_right);
        
        // cb_ellbow_left
        cb_ellbow_left = new CheckBox();
        cb_ellbow_left.setCaption("links");
        cb_ellbow_left.setImmediate(false);
        cb_ellbow_left.setWidth("-1px");
        cb_ellbow_left.setHeight("-1px");
        verticalLayout_11.addComponent(cb_ellbow_left);
        
        return verticalLayout_11;
    }

    @AutoGenerated
    private VerticalLayout buildVerticalLayout_12() {
        // common part: create layout
        verticalLayout_12 = new VerticalLayout();
        verticalLayout_12.setImmediate(false);
        verticalLayout_12.setWidth("-1px");
        verticalLayout_12.setHeight("-1px");
        verticalLayout_12.setMargin(false);
        
        // cb_hand_right
        cb_hand_right = new CheckBox();
        cb_hand_right.setCaption("rechts");
        cb_hand_right.setImmediate(false);
        cb_hand_right.setWidth("-1px");
        cb_hand_right.setHeight("-1px");
        verticalLayout_12.addComponent(cb_hand_right);
        
        // cb_hand_left
        cb_hand_left = new CheckBox();
        cb_hand_left.setCaption("links");
        cb_hand_left.setImmediate(false);
        cb_hand_left.setWidth("-1px");
        cb_hand_left.setHeight("-1px");
        verticalLayout_12.addComponent(cb_hand_left);
        
        return verticalLayout_12;
    }

    @AutoGenerated
    private VerticalLayout buildVerticalLayout_18() {
        // common part: create layout
        verticalLayout_18 = new VerticalLayout();
        verticalLayout_18.setImmediate(false);
        verticalLayout_18.setWidth("-1px");
        verticalLayout_18.setHeight("-1px");
        verticalLayout_18.setMargin(false);
        
        // cb_forearm_right
        cb_forearm_right = new CheckBox();
        cb_forearm_right.setCaption("rechts");
        cb_forearm_right.setImmediate(false);
        cb_forearm_right.setWidth("-1px");
        cb_forearm_right.setHeight("-1px");
        verticalLayout_18.addComponent(cb_forearm_right);
        
        // cb_forearm_left
        cb_forearm_left = new CheckBox();
        cb_forearm_left.setCaption("links");
        cb_forearm_left.setImmediate(false);
        cb_forearm_left.setWidth("-1px");
        cb_forearm_left.setHeight("-1px");
        verticalLayout_18.addComponent(cb_forearm_left);
        
        return verticalLayout_18;
    }

    @AutoGenerated
    private VerticalLayout buildLayout_puncture_rating() {
        // common part: create layout
        layout_puncture_rating = new VerticalLayout();
        layout_puncture_rating.setImmediate(false);
        layout_puncture_rating.setWidth("100.0%");
        layout_puncture_rating.setHeight("-1px");
        layout_puncture_rating.setMargin(false);
        
        // lbl_puncture
        lbl_puncture = new Label();
        lbl_puncture.setStyleName("v-panel-caption");
        lbl_puncture.setImmediate(false);
        lbl_puncture.setWidth("-1px");
        lbl_puncture.setHeight("-1px");
        lbl_puncture.setValue("Beurteilung der Einstichstelle");
        layout_puncture_rating.addComponent(lbl_puncture);
        
        // txt_puncture_rating
        txt_puncture_rating = new TextArea();
        txt_puncture_rating.setImmediate(false);
        txt_puncture_rating.setWidth("100.0%");
        txt_puncture_rating.setHeight("120px");
        layout_puncture_rating.addComponent(txt_puncture_rating);
        layout_puncture_rating.setExpandRatio(txt_puncture_rating, 1.0f);
        
        return layout_puncture_rating;
    }

    @AutoGenerated
    private VerticalLayout buildVerticalLayout_23() {
        // common part: create layout
        verticalLayout_23 = new VerticalLayout();
        verticalLayout_23.setImmediate(false);
        verticalLayout_23.setWidth("100.0%");
        verticalLayout_23.setHeight("-1px");
        verticalLayout_23.setMargin(false);
        verticalLayout_23.setSpacing(true);
        
        // horizontalLayout_16
        horizontalLayout_16 = buildHorizontalLayout_16();
        verticalLayout_23.addComponent(horizontalLayout_16);
        
        // btn_add_charge
        btn_add_charge = new Button();
        btn_add_charge.setCaption("hinzufügen");
        btn_add_charge.setImmediate(true);
        btn_add_charge.setWidth("100.0%");
        btn_add_charge.setHeight("-1px");
        verticalLayout_23.addComponent(btn_add_charge);
        
        // list_charges
        list_charges = new ListSelect();
        list_charges.setImmediate(false);
        list_charges.setWidth("100.0%");
        list_charges.setHeight("100.0%");
        verticalLayout_23.addComponent(list_charges);
        
        // btn_delete_charge
        btn_delete_charge = new Button();
        btn_delete_charge.setCaption("ausg. entfernen");
        btn_delete_charge.setImmediate(true);
        btn_delete_charge.setWidth("100.0%");
        btn_delete_charge.setHeight("-1px");
        verticalLayout_23.addComponent(btn_delete_charge);
        
        return verticalLayout_23;
    }

    @AutoGenerated
    private HorizontalLayout buildHorizontalLayout_16() {
        // common part: create layout
        horizontalLayout_16 = new HorizontalLayout();
        horizontalLayout_16.setImmediate(false);
        horizontalLayout_16.setWidth("100.0%");
        horizontalLayout_16.setHeight("-1px");
        horizontalLayout_16.setMargin(false);
        horizontalLayout_16.setSpacing(true);
        
        // int_chargeCount
        int_chargeCount = new IntStepper();
        int_chargeCount.setCaption("Anzahl");
        int_chargeCount.setImmediate(false);
        int_chargeCount.setWidth("40px");
        int_chargeCount.setHeight("-1px");
        horizontalLayout_16.addComponent(int_chargeCount);
        
        // txt_add_charge
        txt_add_charge = new TextField();
        txt_add_charge.setCaption("Chargen-Nr eingeben");
        txt_add_charge.setImmediate(false);
        txt_add_charge.setWidth("100.0%");
        txt_add_charge.setHeight("-1px");
        horizontalLayout_16.addComponent(txt_add_charge);
        horizontalLayout_16.setExpandRatio(txt_add_charge, 1.0f);
        
        return horizontalLayout_16;
    }

    @AutoGenerated
    private GridLayout buildGl_vitals() {
        // common part: create layout
        gl_vitals = new GridLayout();
        gl_vitals.setImmediate(false);
        gl_vitals.setWidth("100.0%");
        gl_vitals.setHeight("100.0%");
        gl_vitals.setMargin(true);
        gl_vitals.setColumns(5);
        gl_vitals.setRows(6);
        
        // lbl_vitals_param
        lbl_vitals_param = new Label();
        lbl_vitals_param.setStyleName("v-panel-caption");
        lbl_vitals_param.setImmediate(false);
        lbl_vitals_param.setWidth("-1px");
        lbl_vitals_param.setHeight("-1px");
        lbl_vitals_param.setValue("Parameter");
        gl_vitals.addComponent(lbl_vitals_param, 0, 0);
        gl_vitals.setComponentAlignment(lbl_vitals_param, new Alignment(33));
        
        // lbl_vitals_start
        lbl_vitals_start = new Label();
        lbl_vitals_start.setStyleName("v-panel-caption");
        lbl_vitals_start.setImmediate(false);
        lbl_vitals_start.setWidth("-1px");
        lbl_vitals_start.setHeight("-1px");
        lbl_vitals_start.setValue("Bei Start der Infusion");
        gl_vitals.addComponent(lbl_vitals_start, 1, 0);
        gl_vitals.setComponentAlignment(lbl_vitals_start, new Alignment(33));
        
        // lbl_vitals_end
        lbl_vitals_end = new Label();
        lbl_vitals_end.setStyleName("v-panel-caption");
        lbl_vitals_end.setImmediate(false);
        lbl_vitals_end.setWidth("-1px");
        lbl_vitals_end.setHeight("-1px");
        lbl_vitals_end.setValue("Bei Ende der Infusion");
        gl_vitals.addComponent(lbl_vitals_end, 2, 0);
        gl_vitals.setComponentAlignment(lbl_vitals_end, new Alignment(33));
        
        // lbl_vitals_reaction
        lbl_vitals_reaction = new Label();
        lbl_vitals_reaction.setStyleName("v-panel-caption");
        lbl_vitals_reaction.setImmediate(false);
        lbl_vitals_reaction.setWidth("-1px");
        lbl_vitals_reaction.setHeight("-1px");
        lbl_vitals_reaction.setValue("falls Infusionsreaktion");
        gl_vitals.addComponent(lbl_vitals_reaction, 3, 0);
        gl_vitals.setComponentAlignment(lbl_vitals_reaction, new Alignment(33));
        
        // lbl_vitals_comments
        lbl_vitals_comments = new Label();
        lbl_vitals_comments.setStyleName("v-panel-caption");
        lbl_vitals_comments.setImmediate(false);
        lbl_vitals_comments.setWidth("-1px");
        lbl_vitals_comments.setHeight("-1px");
        lbl_vitals_comments.setValue("Kommentare");
        gl_vitals.addComponent(lbl_vitals_comments, 4, 0);
        gl_vitals.setComponentAlignment(lbl_vitals_comments, new Alignment(33));
        
        // lbl_vitals_time
        lbl_vitals_time = new Label();
        lbl_vitals_time.setStyleName("v-panel-caption");
        lbl_vitals_time.setImmediate(false);
        lbl_vitals_time.setWidth("-1px");
        lbl_vitals_time.setHeight("-1px");
        lbl_vitals_time.setValue("Uhrzeit");
        gl_vitals.addComponent(lbl_vitals_time, 0, 1);
        gl_vitals.setComponentAlignment(lbl_vitals_time, new Alignment(33));
        
        // txt_vitals_time_start
        txt_vitals_time_start = new TextField();
        txt_vitals_time_start.setImmediate(false);
        txt_vitals_time_start.setWidth("64px");
        txt_vitals_time_start.setHeight("-1px");
        gl_vitals.addComponent(txt_vitals_time_start, 1, 1);
        gl_vitals.setComponentAlignment(txt_vitals_time_start, new Alignment(33));
        
        // txt_vitals_time_end
        txt_vitals_time_end = new TextField();
        txt_vitals_time_end.setImmediate(false);
        txt_vitals_time_end.setWidth("64px");
        txt_vitals_time_end.setHeight("-1px");
        gl_vitals.addComponent(txt_vitals_time_end, 2, 1);
        gl_vitals.setComponentAlignment(txt_vitals_time_end, new Alignment(33));
        
        // txt_vitals_time_reaction
        txt_vitals_time_reaction = new TextField();
        txt_vitals_time_reaction.setImmediate(false);
        txt_vitals_time_reaction.setWidth("64px");
        txt_vitals_time_reaction.setHeight("-1px");
        gl_vitals.addComponent(txt_vitals_time_reaction, 3, 1);
        gl_vitals.setComponentAlignment(txt_vitals_time_reaction, new Alignment(33));
        
        // verticalLayout_13
        verticalLayout_13 = buildVerticalLayout_13();
        gl_vitals.addComponent(verticalLayout_13, 0, 2);
        gl_vitals.setComponentAlignment(verticalLayout_13, new Alignment(33));
        
        // txt_vitals_pressure_start
        txt_vitals_pressure_start = new TextField();
        txt_vitals_pressure_start.setImmediate(false);
        txt_vitals_pressure_start.setWidth("64px");
        txt_vitals_pressure_start.setHeight("-1px");
        gl_vitals.addComponent(txt_vitals_pressure_start, 1, 2);
        gl_vitals.setComponentAlignment(txt_vitals_pressure_start, new Alignment(33));
        
        // txt_vitals_pressure_end
        txt_vitals_pressure_end = new TextField();
        txt_vitals_pressure_end.setImmediate(false);
        txt_vitals_pressure_end.setWidth("64px");
        txt_vitals_pressure_end.setHeight("-1px");
        gl_vitals.addComponent(txt_vitals_pressure_end, 2, 2);
        gl_vitals.setComponentAlignment(txt_vitals_pressure_end, new Alignment(33));
        
        // txt_vitals_pressure_reaction
        txt_vitals_pressure_reaction = new TextField();
        txt_vitals_pressure_reaction.setImmediate(false);
        txt_vitals_pressure_reaction.setWidth("64px");
        txt_vitals_pressure_reaction.setHeight("-1px");
        gl_vitals.addComponent(txt_vitals_pressure_reaction, 3, 2);
        gl_vitals.setComponentAlignment(txt_vitals_pressure_reaction, new Alignment(33));
        
        // ta_vitals_pressure
        ta_vitals_pressure = new TextArea();
        ta_vitals_pressure.setImmediate(false);
        ta_vitals_pressure.setWidth("200px");
        ta_vitals_pressure.setHeight("60px");
        gl_vitals.addComponent(ta_vitals_pressure, 4, 2);
        
        // verticalLayout_14
        verticalLayout_14 = buildVerticalLayout_14();
        gl_vitals.addComponent(verticalLayout_14, 0, 3);
        gl_vitals.setComponentAlignment(verticalLayout_14, new Alignment(33));
        
        // txt_vitals_mad_start
        txt_vitals_mad_start = new TextField();
        txt_vitals_mad_start.setImmediate(false);
        txt_vitals_mad_start.setWidth("64px");
        txt_vitals_mad_start.setHeight("-1px");
        gl_vitals.addComponent(txt_vitals_mad_start, 1, 3);
        gl_vitals.setComponentAlignment(txt_vitals_mad_start, new Alignment(33));
        
        // txt_vitals_mad_end
        txt_vitals_mad_end = new TextField();
        txt_vitals_mad_end.setImmediate(false);
        txt_vitals_mad_end.setWidth("64px");
        txt_vitals_mad_end.setHeight("-1px");
        gl_vitals.addComponent(txt_vitals_mad_end, 2, 3);
        gl_vitals.setComponentAlignment(txt_vitals_mad_end, new Alignment(33));
        
        // txt_vitals_mad_reaction
        txt_vitals_mad_reaction = new TextField();
        txt_vitals_mad_reaction.setImmediate(false);
        txt_vitals_mad_reaction.setWidth("64px");
        txt_vitals_mad_reaction.setHeight("-1px");
        gl_vitals.addComponent(txt_vitals_mad_reaction, 3, 3);
        gl_vitals.setComponentAlignment(txt_vitals_mad_reaction, new Alignment(33));
        
        // ta_vitals_mad
        ta_vitals_mad = new TextArea();
        ta_vitals_mad.setImmediate(false);
        ta_vitals_mad.setWidth("200px");
        ta_vitals_mad.setHeight("60px");
        gl_vitals.addComponent(ta_vitals_mad, 4, 3);
        
        // lbl_vitals_pulse
        lbl_vitals_pulse = new Label();
        lbl_vitals_pulse.setStyleName("v-panel-caption");
        lbl_vitals_pulse.setImmediate(false);
        lbl_vitals_pulse.setWidth("-1px");
        lbl_vitals_pulse.setHeight("-1px");
        lbl_vitals_pulse.setValue("Puls ( / min)");
        gl_vitals.addComponent(lbl_vitals_pulse, 0, 4);
        gl_vitals.setComponentAlignment(lbl_vitals_pulse, new Alignment(33));
        
        // txt_vitals_pulse_start
        txt_vitals_pulse_start = new TextField();
        txt_vitals_pulse_start.setImmediate(false);
        txt_vitals_pulse_start.setWidth("64px");
        txt_vitals_pulse_start.setHeight("-1px");
        gl_vitals.addComponent(txt_vitals_pulse_start, 1, 4);
        gl_vitals.setComponentAlignment(txt_vitals_pulse_start, new Alignment(33));
        
        // txt_vitals_pulse_end
        txt_vitals_pulse_end = new TextField();
        txt_vitals_pulse_end.setImmediate(false);
        txt_vitals_pulse_end.setWidth("64px");
        txt_vitals_pulse_end.setHeight("-1px");
        gl_vitals.addComponent(txt_vitals_pulse_end, 2, 4);
        gl_vitals.setComponentAlignment(txt_vitals_pulse_end, new Alignment(33));
        
        // txt_vitals_pulse_reaction
        txt_vitals_pulse_reaction = new TextField();
        txt_vitals_pulse_reaction.setImmediate(false);
        txt_vitals_pulse_reaction.setWidth("64px");
        txt_vitals_pulse_reaction.setHeight("-1px");
        gl_vitals.addComponent(txt_vitals_pulse_reaction, 3, 4);
        gl_vitals.setComponentAlignment(txt_vitals_pulse_reaction, new Alignment(33));
        
        // ta_vitals_pulse
        ta_vitals_pulse = new TextArea();
        ta_vitals_pulse.setImmediate(false);
        ta_vitals_pulse.setWidth("200px");
        ta_vitals_pulse.setHeight("60px");
        gl_vitals.addComponent(ta_vitals_pulse, 4, 4);
        
        // lbl_vitals_temp
        lbl_vitals_temp = new Label();
        lbl_vitals_temp.setStyleName("v-panel-caption");
        lbl_vitals_temp.setImmediate(false);
        lbl_vitals_temp.setWidth("-1px");
        lbl_vitals_temp.setHeight("-1px");
        lbl_vitals_temp.setValue("Temperatur, ax. (°C)");
        gl_vitals.addComponent(lbl_vitals_temp, 0, 5);
        gl_vitals.setComponentAlignment(lbl_vitals_temp, new Alignment(33));
        
        // txt_vitals_temp_start
        txt_vitals_temp_start = new TextField();
        txt_vitals_temp_start.setImmediate(false);
        txt_vitals_temp_start.setWidth("64px");
        txt_vitals_temp_start.setHeight("-1px");
        gl_vitals.addComponent(txt_vitals_temp_start, 1, 5);
        gl_vitals.setComponentAlignment(txt_vitals_temp_start, new Alignment(33));
        
        // txt_vitals_temp_end
        txt_vitals_temp_end = new TextField();
        txt_vitals_temp_end.setImmediate(false);
        txt_vitals_temp_end.setWidth("64px");
        txt_vitals_temp_end.setHeight("-1px");
        gl_vitals.addComponent(txt_vitals_temp_end, 2, 5);
        gl_vitals.setComponentAlignment(txt_vitals_temp_end, new Alignment(33));
        
        // txt_vitals_temp_reaction
        txt_vitals_temp_reaction = new TextField();
        txt_vitals_temp_reaction.setImmediate(false);
        txt_vitals_temp_reaction.setWidth("64px");
        txt_vitals_temp_reaction.setHeight("-1px");
        gl_vitals.addComponent(txt_vitals_temp_reaction, 3, 5);
        gl_vitals.setComponentAlignment(txt_vitals_temp_reaction, new Alignment(33));
        
        // ta_vitals_temp
        ta_vitals_temp = new TextArea();
        ta_vitals_temp.setImmediate(false);
        ta_vitals_temp.setWidth("200px");
        ta_vitals_temp.setHeight("60px");
        gl_vitals.addComponent(ta_vitals_temp, 4, 5);
        
        return gl_vitals;
    }

    @AutoGenerated
    private VerticalLayout buildVerticalLayout_13() {
        // common part: create layout
        verticalLayout_13 = new VerticalLayout();
        verticalLayout_13.setImmediate(false);
        verticalLayout_13.setWidth("-1px");
        verticalLayout_13.setHeight("-1px");
        verticalLayout_13.setMargin(false);
        
        // lbl_vitals_pressure
        lbl_vitals_pressure = new Label();
        lbl_vitals_pressure.setStyleName("v-panel-caption");
        lbl_vitals_pressure.setImmediate(false);
        lbl_vitals_pressure.setWidth("-1px");
        lbl_vitals_pressure.setHeight("-1px");
        lbl_vitals_pressure.setValue("Blutdruck");
        verticalLayout_13.addComponent(lbl_vitals_pressure);
        
        // lbl_vitals_pressure_units
        lbl_vitals_pressure_units = new Label();
        lbl_vitals_pressure_units.setStyleName("v-panel-caption");
        lbl_vitals_pressure_units.setImmediate(false);
        lbl_vitals_pressure_units.setWidth("-1px");
        lbl_vitals_pressure_units.setHeight("-1px");
        lbl_vitals_pressure_units.setValue("(mm Hg)");
        verticalLayout_13.addComponent(lbl_vitals_pressure_units);
        
        return verticalLayout_13;
    }

    @AutoGenerated
    private VerticalLayout buildVerticalLayout_14() {
        // common part: create layout
        verticalLayout_14 = new VerticalLayout();
        verticalLayout_14.setImmediate(false);
        verticalLayout_14.setWidth("-1px");
        verticalLayout_14.setHeight("-1px");
        verticalLayout_14.setMargin(false);
        
        // lbl_vitals_avg
        lbl_vitals_avg = new Label();
        lbl_vitals_avg.setStyleName("v-panel-caption");
        lbl_vitals_avg.setImmediate(false);
        lbl_vitals_avg.setWidth("-1px");
        lbl_vitals_avg.setHeight("-1px");
        lbl_vitals_avg.setValue("mittlerer arterieller Druck");
        verticalLayout_14.addComponent(lbl_vitals_avg);
        
        // lbl_vitals_avg_units
        lbl_vitals_avg_units = new Label();
        lbl_vitals_avg_units.setStyleName("v-panel-caption");
        lbl_vitals_avg_units.setImmediate(false);
        lbl_vitals_avg_units.setWidth("-1px");
        lbl_vitals_avg_units.setHeight("-1px");
        lbl_vitals_avg_units.setValue("MAD, (mm Hg)");
        verticalLayout_14.addComponent(lbl_vitals_avg_units);
        
        return verticalLayout_14;
    }

    @AutoGenerated
    private VerticalLayout buildVl_events() {
        // common part: create layout
        vl_events = new VerticalLayout();
        vl_events.setImmediate(false);
        vl_events.setWidth("100.0%");
        vl_events.setHeight("100.0%");
        vl_events.setMargin(true);
        vl_events.setSpacing(true);
        
        // horizontalLayout_18
        horizontalLayout_18 = buildHorizontalLayout_18();
        vl_events.addComponent(horizontalLayout_18);
        vl_events.setExpandRatio(horizontalLayout_18, 1.0f);
        
        // horizontalLayout_21
        horizontalLayout_21 = buildHorizontalLayout_21();
        vl_events.addComponent(horizontalLayout_21);
        vl_events.setExpandRatio(horizontalLayout_21, 1.0f);
        vl_events.setComponentAlignment(horizontalLayout_21, new Alignment(9));
        
        // horizontalLayout_27
        horizontalLayout_27 = buildHorizontalLayout_27();
        vl_events.addComponent(horizontalLayout_27);
        
        return vl_events;
    }

    @AutoGenerated
    private HorizontalLayout buildHorizontalLayout_18() {
        // common part: create layout
        horizontalLayout_18 = new HorizontalLayout();
        horizontalLayout_18.setImmediate(false);
        horizontalLayout_18.setWidth("100.0%");
        horizontalLayout_18.setHeight("100.0%");
        horizontalLayout_18.setMargin(false);
        horizontalLayout_18.setSpacing(true);
        
        // verticalLayout_15
        verticalLayout_15 = buildVerticalLayout_15();
        horizontalLayout_18.addComponent(verticalLayout_15);
        horizontalLayout_18.setComponentAlignment(verticalLayout_15, new Alignment(33));
        
        // ta_reaction_today_desc
        ta_reaction_today_desc = new TextArea();
        ta_reaction_today_desc.setCaption("Beschreibung");
        ta_reaction_today_desc.setImmediate(false);
        ta_reaction_today_desc.setWidth("90.0%");
        ta_reaction_today_desc.setHeight("-1px");
        horizontalLayout_18.addComponent(ta_reaction_today_desc);
        horizontalLayout_18.setExpandRatio(ta_reaction_today_desc, 1.0f);
        horizontalLayout_18.setComponentAlignment(ta_reaction_today_desc, new Alignment(48));
        
        return horizontalLayout_18;
    }

    @AutoGenerated
    private VerticalLayout buildVerticalLayout_15() {
        // common part: create layout
        verticalLayout_15 = new VerticalLayout();
        verticalLayout_15.setImmediate(false);
        verticalLayout_15.setWidth("330px");
        verticalLayout_15.setHeight("-1px");
        verticalLayout_15.setMargin(false);
        verticalLayout_15.setSpacing(true);
        
        // lbl_reaction_today
        lbl_reaction_today = new Label();
        lbl_reaction_today.setStyleName("v-panel-caption");
        lbl_reaction_today.setImmediate(false);
        lbl_reaction_today.setWidth("-1px");
        lbl_reaction_today.setHeight("-1px");
        lbl_reaction_today.setValue("Traten heute infusionsbedingte Reaktionen auf?");
        verticalLayout_15.addComponent(lbl_reaction_today);
        
        // ns_reaction_today
        ns_reaction_today = new NativeSelect();
        ns_reaction_today.setImmediate(false);
        ns_reaction_today.setWidth("-1px");
        ns_reaction_today.setHeight("-1px");
        verticalLayout_15.addComponent(ns_reaction_today);
        
        // cbx_reaction_today_intensity
        cbx_reaction_today_intensity = new ComboBox();
        cbx_reaction_today_intensity.setCaption("Intensitätsgrad");
        cbx_reaction_today_intensity.setImmediate(false);
        cbx_reaction_today_intensity.setWidth("-1px");
        cbx_reaction_today_intensity.setHeight("-1px");
        verticalLayout_15.addComponent(cbx_reaction_today_intensity);
        
        return verticalLayout_15;
    }

    @AutoGenerated
    private HorizontalLayout buildHorizontalLayout_21() {
        // common part: create layout
        horizontalLayout_21 = new HorizontalLayout();
        horizontalLayout_21.setImmediate(false);
        horizontalLayout_21.setWidth("100.0%");
        horizontalLayout_21.setHeight("100.0%");
        horizontalLayout_21.setMargin(false);
        horizontalLayout_21.setSpacing(true);
        
        // verticalLayout_17
        verticalLayout_17 = buildVerticalLayout_17();
        horizontalLayout_21.addComponent(verticalLayout_17);
        horizontalLayout_21.setComponentAlignment(verticalLayout_17, new Alignment(33));
        
        // ta_reaction_recent_desc
        ta_reaction_recent_desc = new TextArea();
        ta_reaction_recent_desc.setCaption("Beschreibung");
        ta_reaction_recent_desc.setImmediate(false);
        ta_reaction_recent_desc.setWidth("90.0%");
        ta_reaction_recent_desc.setHeight("-1px");
        horizontalLayout_21.addComponent(ta_reaction_recent_desc);
        horizontalLayout_21.setExpandRatio(ta_reaction_recent_desc, 1.0f);
        horizontalLayout_21.setComponentAlignment(ta_reaction_recent_desc, new Alignment(48));
        
        return horizontalLayout_21;
    }

    @AutoGenerated
    private VerticalLayout buildVerticalLayout_17() {
        // common part: create layout
        verticalLayout_17 = new VerticalLayout();
        verticalLayout_17.setImmediate(false);
        verticalLayout_17.setWidth("330px");
        verticalLayout_17.setHeight("-1px");
        verticalLayout_17.setMargin(false);
        verticalLayout_17.setSpacing(true);
        
        // lbl_reaction_recent
        lbl_reaction_recent = new Label();
        lbl_reaction_recent.setStyleName("v-panel-caption");
        lbl_reaction_recent.setImmediate(false);
        lbl_reaction_recent.setWidth("300px");
        lbl_reaction_recent.setHeight("-1px");
        lbl_reaction_recent.setValue("Traten im zurückliegenden Zeitraum zur letzten Infusion unerwünschte Ereignisse auf?");
        verticalLayout_17.addComponent(lbl_reaction_recent);
        
        // ns_reaction_recent
        ns_reaction_recent = new NativeSelect();
        ns_reaction_recent.setImmediate(false);
        ns_reaction_recent.setWidth("-1px");
        ns_reaction_recent.setHeight("-1px");
        verticalLayout_17.addComponent(ns_reaction_recent);
        
        // cbx_reaction_recent_intensity
        cbx_reaction_recent_intensity = new ComboBox();
        cbx_reaction_recent_intensity.setCaption("Intensitätsgrad");
        cbx_reaction_recent_intensity.setImmediate(false);
        cbx_reaction_recent_intensity.setWidth("-1px");
        cbx_reaction_recent_intensity.setHeight("-1px");
        verticalLayout_17.addComponent(cbx_reaction_recent_intensity);
        
        return verticalLayout_17;
    }

    @AutoGenerated
    private HorizontalLayout buildHorizontalLayout_27() {
        // common part: create layout
        horizontalLayout_27 = new HorizontalLayout();
        horizontalLayout_27.setImmediate(false);
        horizontalLayout_27.setWidth("-1px");
        horizontalLayout_27.setHeight("-1px");
        horizontalLayout_27.setMargin(false);
        horizontalLayout_27.setSpacing(true);
        
        // lbl_reaction_caused_by_vpriv
        lbl_reaction_caused_by_vpriv = new Label();
        lbl_reaction_caused_by_vpriv.setImmediate(false);
        lbl_reaction_caused_by_vpriv.setWidth("-1px");
        lbl_reaction_caused_by_vpriv.setHeight("-1px");
        lbl_reaction_caused_by_vpriv.setValue("Kausaler Zusammenhang zu VPRIV");
        horizontalLayout_27.addComponent(lbl_reaction_caused_by_vpriv);
        
        // ns_reaction_caused_by_vpriv
        ns_reaction_caused_by_vpriv = new NativeSelect();
        ns_reaction_caused_by_vpriv.setImmediate(false);
        ns_reaction_caused_by_vpriv.setWidth("-1px");
        ns_reaction_caused_by_vpriv.setHeight("-1px");
        horizontalLayout_27.addComponent(ns_reaction_caused_by_vpriv);
        
        // lbl_correlation
        lbl_correlation = new Label();
        lbl_correlation.setImmediate(false);
        lbl_correlation.setWidth("-1px");
        lbl_correlation.setHeight("-1px");
        lbl_correlation.setValue("Kausalitätsbewertung");
        horizontalLayout_27.addComponent(lbl_correlation);
        
        // cbx_correlation
        cbx_correlation = new ComboBox();
        cbx_correlation.setImmediate(false);
        cbx_correlation.setWidth("-1px");
        cbx_correlation.setHeight("-1px");
        horizontalLayout_27.addComponent(cbx_correlation);
        
        return horizontalLayout_27;
    }

    @AutoGenerated
    private VerticalLayout buildVl_comments() {
        // common part: create layout
        vl_comments = new VerticalLayout();
        vl_comments.setCaption("Kommentare");
        vl_comments.setImmediate(false);
        vl_comments.setWidth("100.0%");
        vl_comments.setHeight("100.0%");
        vl_comments.setMargin(true);
        vl_comments.setSpacing(true);
        
        // txta_beobachtungen
        txta_beobachtungen = new TextArea();
        txta_beobachtungen.setStyleName("cust_textarea_no_margin");
        txta_beobachtungen.setCaption("Beobachtungen");
        txta_beobachtungen.setImmediate(false);
        txta_beobachtungen.setWidth("100.0%");
        txta_beobachtungen.setHeight("100.0%");
        vl_comments.addComponent(txta_beobachtungen);
        
        // txta_bemerkungen
        txta_bemerkungen = new TextArea();
        txta_bemerkungen.setStyleName("cust_textarea_no_margin");
        txta_bemerkungen.setCaption("Bemerkungen");
        txta_bemerkungen.setImmediate(false);
        txta_bemerkungen.setWidth("100.0%");
        txta_bemerkungen.setHeight("100.0%");
        vl_comments.addComponent(txta_bemerkungen);
        
        return vl_comments;
    }

    @AutoGenerated
    private HorizontalLayout buildHorizontalLayout_4() {
        // common part: create layout
        horizontalLayout_4 = new HorizontalLayout();
        horizontalLayout_4.setImmediate(false);
        horizontalLayout_4.setWidth("100.0%");
        horizontalLayout_4.setHeight("30px");
        horizontalLayout_4.setMargin(false);
        
        // btn_save
        btn_save = new Button();
        btn_save.setCaption("Speichern");
        btn_save.setImmediate(true);
        btn_save.setWidth("-1px");
        btn_save.setHeight("-1px");
        horizontalLayout_4.addComponent(btn_save);
        horizontalLayout_4.setComponentAlignment(btn_save, new Alignment(48));
        
        return horizontalLayout_4;
    }

    @AutoGenerated
    private AbsoluteLayout buildAl_localization_labels() {
        // common part: create layout
        al_localization_labels = new AbsoluteLayout();
        al_localization_labels.setEnabled(false);
        al_localization_labels.setImmediate(false);
        al_localization_labels.setVisible(false);
        al_localization_labels.setWidth("-1px");
        al_localization_labels.setHeight("-1px");
        
        // lbl_no
        lbl_no = new Label();
        lbl_no.setCaption("Nein");
        lbl_no.setEnabled(false);
        lbl_no.setImmediate(false);
        lbl_no.setVisible(false);
        lbl_no.setWidth("-1px");
        lbl_no.setHeight("-1px");
        lbl_no.setValue("0");
        al_localization_labels.addComponent(lbl_no, "top:0.0px;left:0.0px;");
        
        // lbl_yes
        lbl_yes = new Label();
        lbl_yes.setCaption("Ja");
        lbl_yes.setEnabled(false);
        lbl_yes.setImmediate(false);
        lbl_yes.setVisible(false);
        lbl_yes.setWidth("-1px");
        lbl_yes.setHeight("-1px");
        lbl_yes.setValue("1");
        al_localization_labels.addComponent(lbl_yes, "top:0.0px;left:0.0px;");
        
        return al_localization_labels;
    }

    @AutoGenerated
    private AbsoluteLayout buildAl_passive_fields() {
        // common part: create layout
        al_passive_fields = new AbsoluteLayout();
        al_passive_fields.setEnabled(false);
        al_passive_fields.setImmediate(false);
        al_passive_fields.setVisible(false);
        al_passive_fields.setWidth("-1px");
        al_passive_fields.setHeight("-1px");
        
        // fieldBalanceWasRemoved
        fieldBalanceWasRemoved = new IntStepper();
        fieldBalanceWasRemoved.setEnabled(false);
        fieldBalanceWasRemoved.setImmediate(false);
        fieldBalanceWasRemoved.setVisible(false);
        fieldBalanceWasRemoved.setWidth("-1px");
        fieldBalanceWasRemoved.setHeight("-1px");
        al_passive_fields.addComponent(fieldBalanceWasRemoved, "top:0.0px;left:0.0px;");
        
        return al_passive_fields;
    }

}
