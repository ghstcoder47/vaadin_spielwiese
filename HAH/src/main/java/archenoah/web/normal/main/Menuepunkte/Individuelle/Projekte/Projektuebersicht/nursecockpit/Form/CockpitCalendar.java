package archenoah.web.normal.main.Menuepunkte.Individuelle.Projekte.Projektuebersicht.nursecockpit.Form;

import java.util.ArrayList;
import java.util.Date;
import java.util.HashMap;
import java.util.LinkedHashMap;
import java.util.Map;
import java.util.Map.Entry;
import java.util.Set;

import org.apache.commons.lang3.tuple.Pair;
import org.joda.time.Days;
import org.joda.time.Duration;
import org.joda.time.LocalDate;
import org.joda.time.LocalDateTime;
import org.joda.time.LocalTime;

import archenoah.lib.custom.ComponentIterator;
import archenoah.lib.custom.MyUtils;
import archenoah.lib.tool.comunication.dbclass.DBClass;
import archenoah.lib.tool.comunication.dbclass.DBClass.CustomQuery;
import archenoah.lib.vaadin.Components.Calendar.EventClickCommand;
import archenoah.lib.vaadin.Components.table.FilteringTableUpdater;
import archenoah.lib.vaadin.Language.i18n.I18nManager;
import archenoah.lib.vaadin.MenuBerechtigung.Rechteholen;
import archenoah.web.normal.UserInfo.UserData;
import archenoah.web.normal.main.Menuepunkte.Individuelle.Projekte.Projektuebersicht.nursecockpit.classes.CockpitCalendarEvent;
import archenoah.web.normal.main.Menuepunkte.Individuelle.Projekte.Projektuebersicht.nursecockpit.classes.CockpitCalendarProvider;
import archenoah.web.normal.main.Menuepunkte.Individuelle.Projekte.Projektuebersicht.nursecockpit.classes.CockpitExpensesEvent;
import archenoah.web.normal.main.Menuepunkte.Individuelle.Projekte.Projektuebersicht.nursecockpit.classes.TravelTimeEvent;
import archenoah.web.normal.main.Menuepunkte.Individuelle.Projekte.tools.ProjectParams;
import archenoah.web.normal.main.Menuepunkte.Individuelle.Projekte.tools.ProjectParams.Params;

import com.google.common.base.Joiner;
import com.vaadin.annotations.AutoGenerated;
import com.vaadin.data.Container;
import com.vaadin.data.Item;
import com.vaadin.data.util.BeanItemContainer;
import com.vaadin.server.ThemeResource;
import com.vaadin.ui.Alignment;
import com.vaadin.ui.Button;
import com.vaadin.ui.Button.ClickEvent;
import com.vaadin.ui.Button.ClickListener;
import com.vaadin.ui.Calendar;
import com.vaadin.ui.CustomComponent;
import com.vaadin.ui.HorizontalLayout;
import com.vaadin.ui.Label;
import com.vaadin.ui.MenuBar;
import com.vaadin.ui.MenuBar.Command;
import com.vaadin.ui.MenuBar.MenuItem;
import com.vaadin.ui.TabSheet;
import com.vaadin.ui.UI;
import com.vaadin.ui.VerticalLayout;
import com.vaadin.ui.Window;
import com.vaadin.ui.Window.CloseEvent;
import com.vaadin.ui.Window.CloseListener;
import com.vaadin.ui.components.calendar.CalendarComponentEvents;
import com.vaadin.ui.components.calendar.CalendarComponentEvents.DateClickEvent;
import com.vaadin.ui.components.calendar.CalendarComponentEvents.EventClick;
import com.vaadin.ui.components.calendar.CalendarComponentEvents.MoveEvent;
import com.vaadin.ui.components.calendar.CalendarComponentEvents.WeekClick;
import com.vaadin.ui.components.calendar.event.BasicEvent;

@SuppressWarnings({"serial", "rawtypes", "unchecked"})
public class CockpitCalendar extends CustomComponent {

    /*- VaadinEditorProperties={"grid":"RegularGrid,20","showGrid":true,"snapToGrid":true,"snapToObject":true,"movingGuides":false,"snappingDistance":10} */

    @AutoGenerated
    private HorizontalLayout mainLayout;

    @AutoGenerated
    private VerticalLayout mainContainer;

    @AutoGenerated
    private VerticalLayout verticalLayout_1;

    @AutoGenerated
    private Calendar calendarData;

    @AutoGenerated
    private HorizontalLayout globalFilterContainer;

    @AutoGenerated
    private Label legend;

    @AutoGenerated
    private HorizontalLayout horizontalLayout_2;

    @AutoGenerated
    private Button filterMonthReturn;

    

    

    


    

    

    

    

    

    

    

    

    

    

    

	

	

	

	

	

	

	

	

	

	

    /**
     * The constructor should first build the main layout, set the composition
     * root and then do any custom initialization.
     * 
     * The constructor will not be automatically regenerated by the visual
     * editor.
     */

    /**************** --> Allgemein <--- ********************/
    private org.slf4j.Logger log = org.slf4j.LoggerFactory.getLogger(this.getClass());
    
    // Datenbank
    private Map<Object, String> componentMap;
//    private FilteringTableUpdater tableUpdater = null;
    private FilteringTableUpdater warningUpdater = null;

    // Berrechtigung
    private int ACC_ID;

    private int permRead;
    private int permCreate;
    private int permUpdate;
    private int permDelete;

    /******************************************************/
    /**************** --> Tabsheetvars <--- *****************/
    private TabSheet tab = null;

    /******************************************************/
    /**************** --> Windowvars <--- *******************/
    private Window win = null;
    /******************************************************/

    /******************* -> Menüpunkte <- ********************/
    private MenuBar.MenuItem btn_create;
    private MenuBar.MenuItem btn_update;
    private MenuBar.MenuItem btn_read;
    private MenuBar.MenuItem btn_delete;
    private MenuBar.MenuItem btn_filter;
    private MenuBar.MenuItem btn_details;
    private MenuBar.MenuItem btn_refresh;

    
    /*******************************************************/
    /******************* --> Custom <--- ********************/
    /******************************************************/
    
    /************ ----->Einstellungen<-- ********************/
//    private final String formIdLng = "700";
    private final String formIdPerm = "40";

    /******************************************************/
    
    private String multiString;
    private String pidString;
    private ProjectParams projectParams = new ProjectParams();
    
    private LinkedHashMap<String, Pair<String, Integer>> styleMap;
    private LinkedHashMap<String, Pair<String, Integer>> styleMapE;
    private Date selectedDate = null;
    private Integer selectedNurseId = null;
    
    private ArrayList<Integer> projectIds;
    
    private ThemeResource popupIcon = new ThemeResource("image-res/icons/edit-white-16.png");

    private I18nManager i18n;
    /******************************************************/

    public CockpitCalendar() {
        init();
    }

    /***************************** ---> Feste Funtionen<--- **************************************/

    /********* INIT-Window ************/
    public void init() {
        
        Standard_Init();
        setCompositionRoot(mainLayout);

    }

    /********* Init-Standard ************/
    private void Standard_Init() {
        buildMainLayout();
        i18n = new I18nManager(this);
        
        registerComponents();
        
        setMenuPermissions();
        
        buildStyleMap();
        setLegendTooltip();
        
//        updateCalendar();
        configureComponents();

        
        //setupListenersAndDetachEvent();
        i18n.refresh();
        
    }
    
    // register components for lng and validation tools
    private void registerComponents(){
    	componentMap = new HashMap<Object, String>();
    	new ComponentIterator(mainContainer).createMap(componentMap);
    }

    
    @SuppressWarnings("unused")
    public void setPermissionsFromDatabase() {
        if (formIdPerm == "") {
            System.out.println("Form Einstellung Fehlt: Berechtigung");
            return;
        }

        ACC_ID = (int) UI.getCurrent().getSession().getSession().getAttribute("Userid");
        Rechteholen r = new Rechteholen(ACC_ID + "");
        String[][] perms = r.Datenholen();

        for (int i = 0; i < perms.length; i++) {
            if (perms[i][0].equals(formIdPerm) == true) {

                permRead = Integer.valueOf(perms[i][3]);
                permUpdate = Integer.valueOf(perms[i][4]);
                permCreate = Integer.valueOf(perms[i][6]);
                permDelete = Integer.valueOf(perms[i][5]);
                
            }
        }
    }

    public void setPermissions(int create, int read, int update, int delete) {

        permCreate = create;
        permRead = read;
        permUpdate = update;
        permDelete = delete;

    }

    private void setMenuPermissions() {
        Boolean c = (permCreate == 1);
        Boolean r = (permRead == 1);
        Boolean u = (permUpdate == 1);
        Boolean d = (permDelete == 1);

        
//        btn_details.setEnabled(r);
//        btn_details.setVisible(r);
        
//        btn_create.setEnabled(c);
//        btn_create.setVisible(c);
//
//        btn_read.setEnabled(r);
//        btn_read.setVisible(r);
//
//        btn_update.setEnabled(u);
//        btn_update.setVisible(u);
//
//        btn_delete.setEnabled(d);
//        btn_delete.setVisible(d);
    }

    /************ -><- ******************/

    /***************** Comands *********************/
    
    CloseListener closeListener = new CloseListener() {
		
		@Override
		public void windowClose(CloseEvent e) {
			updateCalendar(false);
		}
	};
    
	
    public Command cmd_btn_refresh = new Command() {
        @Override
        public void menuSelected(MenuItem selectedItem) {

            updateCalendar();

        }
    };

    /******************************************/

    public void setProjectIds(ArrayList<Integer> projectIds) {
        this.projectIds = projectIds;
//        updateCalendar(false); // called by nurseSelect in CockpitDataView for now to avoid duplicate queries
    }
    
    public ArrayList<Integer> getProjectIds() {
        return projectIds;
    }
    
    public void setDate(Date date) {
        Boolean update = selectedDate != date;
        
        selectedDate = date;
        
        if(update) {
            updateCalendar();
        }
    }
    
    public void setNurse(Integer nurseId) {
        Boolean update = selectedNurseId != nurseId;
        
        selectedNurseId = nurseId;
        if(update) {
            updateCalendar(false);
        }
        
    }
    
    private void configureComponents(){
    	
        configureCalendar();
        
        filterMonthReturn.setImmediate(true);
        filterMonthReturn.setVisible(false);
        filterMonthReturn.addClickListener(new ClickListener() {
            
            @Override
            public void buttonClick(ClickEvent event) {
                
                returnToMonthlyView();
                
            }
        });
     
    }
    
    private void configureCalendar(){
        
        calendarData.setImmediate(true);
        
        calendarData.setHandler(new EventClickCommand() {
            
            @Override
            public void eventClickExtended(EventClick event) {
                
                if(event.getCalendarEvent() instanceof CockpitCalendarEvent) {
                    this.setWindow(((CockpitCalendarEvent) event.getCalendarEvent()).onClick());
                    this.setParent(calendarData);
                }
                
                if(event.getCalendarEvent() instanceof CockpitExpensesEvent) {
                    this.setWindow(((CockpitExpensesEvent) event.getCalendarEvent()).onClick());
                    this.setParent(calendarData);
                }
                
            }
        });
        
        calendarData.setHandler(new CalendarComponentEvents.DateClickHandler() {
            
            @Override
            public void dateClick(DateClickEvent event) {
                
                if(returnToMonthlyView()){
                    return;
                }
                
                setWeeklyView(event.getDate());
                
                calendarData.setStyleName("no-arrows");
            }

            
        });
        
        calendarData.setHandler(new CalendarComponentEvents.WeekClickHandler() {
            
            @Override
            public void weekClick(WeekClick event) {
                
                if(returnToMonthlyView()){
                    return;
                }
                
                Date clickedDate = LocalDate.now().withWeekOfWeekyear(event.getWeek()).toDate();
                setWeeklyView(clickedDate);
                
                calendarData.setStyleName("no-arrows");
            }
                
        });
        
        calendarData.setHandler(new CalendarComponentEvents.EventMoveHandler() {
            
            @Override
            public void eventMove(MoveEvent event) {
                
                updateCalendar(false);
                
            }
        });
        
        calendarData.setFirstVisibleHourOfDay(6);
        calendarData.setLastVisibleHourOfDay(22);
        
    }

    private Boolean returnToMonthlyView(){
        if(!calendarData.isMonthlyMode()){
            calendarData.setStyleName(null);
            filterMonthReturn.setVisible(false);
            setCalendarRange();
            return true;
        }
        return false;
    }
    
    private LocalDate getSelectedMonthStart(){
        
        LocalDate selected = new LocalDate(this.selectedDate);
        LocalDate date = new LocalDate(selected.getYear(), selected.getMonthOfYear(), 1);
        return date;
    }
    
    private LocalDate getSelectedMonthEnd(){
        LocalDate date = getSelectedMonthStart().plusMonths(1).minusDays(1);
        return date;
    }
    
    public void setWeeklyView(Date date) {
        
        LocalDate start = MyUtils.getWeekMonday(date, 0);
        LocalDate end = start.plusWeeks(1).minusDays(1);
        
        setCalendarRange(start, end);
    }
    
    public void setCalendarRange() {
        
        setCalendarRange(getSelectedMonthStart(), 
            getSelectedMonthEnd());
        
    }
    
    public void setCalendarRange(LocalDate start, LocalDate end){
        
        filterMonthReturn.setVisible(Days.daysBetween(start, end).getDays() <= 7);
       
        calendarData.setStartDate(start.toDate());
        calendarData.setEndDate(end.toDate());
        
    }
    
    
    
    private void buildStyleMap(){
        
        styleMap = new LinkedHashMap<String, Pair<String, Integer>>();
        
        styleMap.put("Erteilt", Pair.of("full", 10));
        styleMap.put("Angenommen", Pair.of("nurse_edit", 20));
        styleMap.put("Bearbeitung", Pair.of("nurse_edit", 30)); //FOR only
        styleMap.put("Freigegeben für CS", Pair.of("order_placed", 40));
        styleMap.put("Daten Validiert", Pair.of("order_prepared", 50));
        styleMap.put("Abgeschlossen", Pair.of("nurse_sent", 60));
        
        styleMapE = new LinkedHashMap<String, Pair<String, Integer>>();
        
        styleMapE.put("Zurück zur Bearbeitung", Pair.of("warning", 120)); 
        styleMapE.put("Bearbeitung", Pair.of("nurse_edit", 130)); 
        styleMapE.put("Eingabe Abgeschlossen", Pair.of("order_placed", 140));
        styleMapE.put("Kontrolliert", Pair.of("order_prepared", 150));
        styleMapE.put("Abgeschlossen", Pair.of("nurse_sent", 160));
        styleMapE.put("Abgelehnt", Pair.of("unaccepted", 170));

    }
    
    private void setLegendTooltip() {
        
        StringBuilder tooltip = new StringBuilder();
        
        tooltip.append("<div>Protokolle:</div>");
        tooltip.append("<div class=\"v-calendar package-legend\">");
        for (Entry<String, Pair<String, Integer>> entry : styleMap.entrySet()) {
            tooltip.append("<div class=\"legend-entry v-calendar-event-all-day v-calendar-event-" + entry.getValue().getLeft()  +"-all-day\">" + entry.getKey() +"</div>");
        }
        
        tooltip.append("<div>Beauftragte Tätigkeiten:</div>");
        for (Entry<String, Pair<String, Integer>> entry : styleMapE.entrySet()) {
            tooltip.append("<div class=\"legend-entry v-calendar-event-all-day v-calendar-event-" + entry.getValue().getLeft()  +"-all-day\">" + entry.getKey() +"</div>");
        }

        
        
        
        tooltip.append("</div>");
        
        legend.setDescription(tooltip.toString());
        
    }
    
    
    /********************************/
    
	private void updateCalendar() {
	    updateCalendar(true);
	}
	
    private void updateCalendar(Boolean setRange) {
        
        if(setRange){
            setCalendarRange();
        }
        
//        calendarData.setEnabled(false);
        
        if(selectedDate == null) {
            return;
        }
        
        BeanItemContainer<BasicEvent> container;
        container = generateCalendarEntries();

        updateCalendarEntries(container);
        
    }

    
    private void sortContainer(BeanItemContainer<BasicEvent> container){
        container.sort(new Object[]{"start", "index", "projectCode", "nurseName"}, new boolean[]{true, false, false, false});
    }
    
    private void updateCalendarEntries(BeanItemContainer<BasicEvent> container){
        sortContainer(container);
        CockpitCalendarProvider provider = new CockpitCalendarProvider(container);
        calendarData.setEventProvider(provider); 
        
//        calendarData.setContainerDataSource(container,
//                "caption", "description", "start", "end", "styleName");
        calendarData.setSizeFull();
    }
    
    private BeanItemContainer<BasicEvent> generateCalendarEntries(){
        
        // Use a container of built-in BasicEvents
        final BeanItemContainer<BasicEvent> container =
            new BeanItemContainer<BasicEvent>(BasicEvent.class);
        
        Container con = dbGetEvents();
        for (Object iid : con.getItemIds()) {
            Item item = con.getItem(iid);
            
            CockpitCalendarEvent event = new CockpitCalendarEvent(item, closeListener, styleMap, popupIcon);
            
            container.addBean(event);
            generateTravelEvents(container, event);
            
        }
        
        Container expenses = dbGetExpenses();
        for (Object iid : expenses.getItemIds()) {
            Item item = expenses.getItem(iid);
            
            CockpitExpensesEvent event = new CockpitExpensesEvent(item, closeListener, styleMapE, popupIcon);
            
            container.addBean(event);
            generateTravelEvents(container, event);
            
        }
        
        return container;
        
    }

    private void generateTravelEvents(BeanItemContainer<BasicEvent> container, BasicEvent event) {
        
        if(!(event instanceof TravelTimeEvent)) {
            return;
        }
        
        Long tr = ((TravelTimeEvent)event).getTravelTime();
        Duration dur = new Duration(new LocalTime(tr).getMillisOfDay());
        
        if(tr == null || Duration.ZERO.equals(dur)) {
            return;
        }
        
        BasicEvent after = new BasicEvent("Rückfahrt", "(berechnet)<br />" + event.getCaption(),
            event.getEnd(), new LocalDateTime(event.getEnd()).plus(dur.dividedBy(2)).toDate());
        container.addBean(after);
        
        BasicEvent before = new BasicEvent("Hinfahrt", "(berechnet)<br />" + event.getCaption(),
            new LocalDateTime(event.getStart()).minus(dur.dividedBy(2)).toDate(), event.getStart());
        container.addBean(before);
        
    }
    
    private LocalDate getVisibleStart(){
        return MyUtils.getWeekMonday(new LocalDate(calendarData.getStartDate()), 0);
    }
    
    private LocalDate getVisibleEnd(){
        return MyUtils.getWeekMonday(new LocalDate(calendarData.getEndDate()), 1).minusDays(1);
    }
    
    private String generateBetweenCondition(){
        
        // fix for weekly refresh
        LocalDate start = getVisibleStart();
        LocalDate end = getVisibleEnd();
        setCalendarRange();
        
        String between = " BETWEEN '"+ MyUtils.formatSqlDate(getVisibleStart())
        +"' and '"+MyUtils.formatSqlDate(getVisibleEnd().plusDays(1))+"'";
        
        setCalendarRange(start, end);
        
        return between;
    }
    
    private String generateWeekBetweenCondition(LocalDate monday){
        
        LocalDateTime stop = monday.plusWeeks(1).toLocalDateTime(LocalTime.MIDNIGHT).minusSeconds(1);
        
        String between = " BETWEEN '"+ MyUtils.formatSqlDate(monday)
                +"' and '"+MyUtils.formatSqlDate(stop)+"'";
        return between;

    }
    
    private Container dbGetEvents() {
        CustomQuery q = new DBClass().CustomQuery;
        
        if(multiString == null) { //only generate once after init
            Set<Integer> multiSet = projectParams.getProjectsFor(Params.multi_nurse).keySet();
            if(multiSet != null && multiSet.size() > 0) {
                multiString = " OR project IN (" + Joiner.on(",").join(multiSet) + ")";
            }
        }
        
        if(pidString == null) {
            UserData userData = UserData.get();
            ArrayList<Integer> npids = userData.getNurse().getProjectIds();
            if(npids != null && npids.size() > 0) {
                pidString = userData.getNurse().isNurse() ? (" and project in(" + Joiner.on(",").join(userData.getNurse().getProjectIds()) + ")" ) : "";
            }else {
                pidString = "";
            }
            
        }
        
        String projectManagerString = "";
        if(projectIds != null && projectIds.size() > 0) {
            projectManagerString = " and project in(" + Joiner.on(",").join(projectIds) + ")";
        }
        
        String sql = "select *"
         + "\n " + "from view_protokoll__overview"
         + "\n " + "where date " + generateBetweenCondition()
         + "\n " + (selectedNurseId != null ? " and (nurse = " + selectedNurseId + multiString  + ")" + ((projectIds != null) ? projectManagerString : pidString) : projectManagerString);
        q.setSqlString(sql);
//        q.db.debugNextQuery(true);
        return q.query();
    }
    
    private Container dbGetExpenses() {
        
        
        CustomQuery q = new DBClass().CustomQuery;
        String sql = "  select"
         + "\n " + "      CED_ID as id"
         + "\n " + "        , CED_DATE as date"
         + "\n " + "      , STR_TO_DATE(CED_START,'%H:%i') as `start`"
         + "\n " + "      , STR_TO_DATE(CED_END,'%H:%i') as `end`"
         + "\n " + "      , CED_FAHRZEIT as travel"
         + "\n " + "      , AUL_ID as user_id"
         + "\n " + "      , CONCAT_WS(' ', AUL_VORNAME, AUL_NAME) as user"
         + "\n " + "      , CEA_ACTIVITY as activity"
         + "\n " + "      , SS_NAME as status"
         + "\n " + "      , CED_COMMENT as comment"
         + "\n " + "      from cust_expenses_data"
         + "\n " + "      left join cms_auth_stammdaten_user on CED_ID_USER = AUL_ID"
         + "\n " + "      left join cust_expenses_activity on CEA_ID = CED_ID_CEA"
         + "\n " + "      left join cust_schulung_status on SS_CODE = 'EXP' and SS_PROZESS = CED_STATUS"
         + "\n " + "            left join cust_krankenschwester_stammdaten_ks on KSK_U_ID = CED_ID_USER"
         + "\n " + "      where "
         + "\n " + "            CEA_COST = 0 and CED_DATE " + generateBetweenCondition()
         + "\n " + (selectedNurseId != null ? " and (KSK_ID = " + selectedNurseId + ")" : "")
         + "\n " + "      order by CED_DATE ASC";
        q.setSqlString(sql);
        
        return q.query();
    }
    
    @AutoGenerated
    private HorizontalLayout buildMainLayout() {
        // common part: create layout
        mainLayout = new HorizontalLayout();
        mainLayout.setImmediate(false);
        mainLayout.setWidth("100%");
        mainLayout.setHeight("100%");
        mainLayout.setMargin(false);
        
        // top-level component properties
        setWidth("100.0%");
        setHeight("100.0%");
        
        // mainContainer
        mainContainer = buildMainContainer();
        mainLayout.addComponent(mainContainer);
        mainLayout.setExpandRatio(mainContainer, 1.0f);
        mainLayout.setComponentAlignment(mainContainer, new Alignment(20));
        
        return mainLayout;
    }

    @AutoGenerated
    private VerticalLayout buildMainContainer() {
        // common part: create layout
        mainContainer = new VerticalLayout();
        mainContainer.setImmediate(false);
        mainContainer.setWidth("100.0%");
        mainContainer.setHeight("100.0%");
        mainContainer.setMargin(true);
        mainContainer.setSpacing(true);
        
        // globalFilterContainer
        globalFilterContainer = buildGlobalFilterContainer();
        mainContainer.addComponent(globalFilterContainer);
        mainContainer.setComponentAlignment(globalFilterContainer, new Alignment(48));
        
        // verticalLayout_1
        verticalLayout_1 = buildVerticalLayout_1();
        mainContainer.addComponent(verticalLayout_1);
        mainContainer.setExpandRatio(verticalLayout_1, 12.0f);
        
        return mainContainer;
    }

    @AutoGenerated
    private HorizontalLayout buildGlobalFilterContainer() {
        // common part: create layout
        globalFilterContainer = new HorizontalLayout();
        globalFilterContainer.setImmediate(false);
        globalFilterContainer.setWidth("100.0%");
        globalFilterContainer.setHeight("-1px");
        globalFilterContainer.setMargin(false);
        globalFilterContainer.setSpacing(true);
        
        // horizontalLayout_2
        horizontalLayout_2 = buildHorizontalLayout_2();
        globalFilterContainer.addComponent(horizontalLayout_2);
        globalFilterContainer.setExpandRatio(horizontalLayout_2, 1.0f);
        
        // legend
        legend = new Label();
        legend.setImmediate(false);
        legend.setWidth("-1px");
        legend.setHeight("-1px");
        legend.setValue("Legende");
        globalFilterContainer.addComponent(legend);
        globalFilterContainer.setExpandRatio(legend, 1.0f);
        globalFilterContainer.setComponentAlignment(legend, new Alignment(33));
        
        return globalFilterContainer;
    }

    @AutoGenerated
    private HorizontalLayout buildHorizontalLayout_2() {
        // common part: create layout
        horizontalLayout_2 = new HorizontalLayout();
        horizontalLayout_2.setImmediate(false);
        horizontalLayout_2.setWidth("100.0%");
        horizontalLayout_2.setHeight("-1px");
        horizontalLayout_2.setMargin(false);
        
        // filterMonthReturn
        filterMonthReturn = new Button();
        filterMonthReturn.setCaption("zurück");
        filterMonthReturn.setImmediate(true);
        filterMonthReturn.setWidth("-1px");
        filterMonthReturn.setHeight("-1px");
        horizontalLayout_2.addComponent(filterMonthReturn);
        horizontalLayout_2.setComponentAlignment(filterMonthReturn, new Alignment(34));
        
        return horizontalLayout_2;
    }

    @AutoGenerated
    private VerticalLayout buildVerticalLayout_1() {
        // common part: create layout
        verticalLayout_1 = new VerticalLayout();
        verticalLayout_1.setImmediate(false);
        verticalLayout_1.setWidth("100.0%");
        verticalLayout_1.setHeight("100.0%");
        verticalLayout_1.setMargin(false);
        verticalLayout_1.setSpacing(true);
        
        // calendarData
        calendarData = new Calendar();
        calendarData.setImmediate(true);
        calendarData.setWidth("100.0%");
        calendarData.setHeight("100.0%");
        verticalLayout_1.addComponent(calendarData);
        verticalLayout_1.setExpandRatio(calendarData, 2.0f);
        
        return verticalLayout_1;
    }
}
